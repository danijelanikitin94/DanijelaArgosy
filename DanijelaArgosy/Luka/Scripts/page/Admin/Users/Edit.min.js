function setAllLimits(){var n=$("#txtLimit").val(),t=$("#ddlTimeFrame").val();if(n==0||n=="")return prompt.notify({question:"Product Limit should be greater than 0.",type:"error"}),!1;if(t=="null")return prompt.notify({question:"Time Frame is required.",type:"error"}),!1;var i=$("div[data-argosy-view=UserEditAddPartLimits]").getKendoGrid(),r=i.dataSource.total(),u={question:"Do you want to set all product limits("+r+")?",button:"Set",type:"warning",yes:function(){changePartLimits(n,t);$("#txtLimit").val("0");$("#ddlTimeFrame").val("null")}};prompt.alert(u)}function viewPartLimits(n){var i=$(n).closest("tr"),t=$("div[data-argosy-view=UserEditAddPartLimits]").getKendoGrid().dataSource.data()[i.index()];if(t.LimitQuantity=i.find("input").val().trim(),t.Days=n.value,(t.LimitQuantity==""||t.LimitQuantity=="0")&&t.Active==!1)return!1;if(t.LimitQuantity!=""&&t.LimitQuantity!="0"&&n.value!="null")updatePartLimits(t);else return!1}function editPartLimit(n){var i=$(n).closest("tr"),t=$("div[data-argosy-view=UserEditAddPartLimits]").getKendoGrid().dataSource.data()[i.index()];if(n.value.trim()=="0"&&t.Active==!1)return!1;if(t.Days=i.find("select").val(),t.Days=="null"&&t.Active==!1&&prompt.notify({question:"Time Frame is required.",type:"error"}),t.LimitQuantity!=n.value.trim())if(t.LimitQuantity=n.value.trim(),t.Days!="null"&&t.LimitQuantity!=""&&t.LimitQuantity!=null)updatePartLimits(t);else return!1}function showAddPartCategoryModal(){$.fancybox({href:"#PartCat"})}function showAddEditProductLimitsModal(){$.fancybox({href:"#AddProLim"})}function closeModal(){$.fancybox.close()}function clearAllLimits(){var n={question:"Do you want to clear all limits?",button:"Clear",type:"warning",yes:function(){clearAllPartLimits()}};prompt.alert(n)}function userUpdate(){var n={question:"Do you want to update this User?",button:"update",type:"warning",yes:function(){$("form.update-user")[0].submit();$.fancybox.close()}};prompt.alert(n)}function changePartLimits(n,t){var i={userId:$("#UserId").val(),limit:n,timeFrame:t};$.ajax({url:"/Admin/Users/UpdateAllLimits",type:"POST",data:JSON.stringify(i),dataType:"json",traditonal:!0,contentType:"application/json; charset=utf-8",success:function(n){var t,i;n.ReturnCode==ReturnCode.Success?prompt.notify({question:"The Product Limits were successfully updated.",type:"success"}):prompt.clientResponseError(n);t=$("div[data-argosy-view=UserEditAddPartLimits]").getKendoGrid();t.dataSource.read();t.refresh(!0);i=$("div[data-argosy-view=UserPartLimitsGrid]").find(".k-collapse-grid").getKendoGrid();i.dataSource.read();i.refresh(!0)}});$.fancybox.close()}function clearAllPartLimits(){var n={userId:$("#UserId").val()};$.ajax({url:"/Admin/Users/DeleteUserAllPartLimits",type:"POST",data:JSON.stringify(n),dataType:"json",traditonal:!0,contentType:"application/json; charset=utf-8",success:function(n){var t,i;n.ReturnCode==ReturnCode.Success?prompt.notify({question:"The Product Limits were successfully deleted.",type:"success"}):prompt.clientResponseError(n);t=$("div[data-argosy-view=UserEditAddPartLimits]").getKendoGrid();t.dataSource.read();t.refresh(!0);i=$("div[data-argosy-view=UserPartLimitsGrid]").find(".k-collapse-grid").getKendoGrid();i.dataSource.read();i.refresh(!0)}});$.fancybox.close()}function updatePartLimits(n){var t={partLimit:n};$.ajax({url:"/Admin/Users/UpdateUserPartLimit",type:"POST",data:JSON.stringify(t),dataType:"json",traditonal:!0,contentType:"application/json; charset=utf-8",success:function(n){var t,i;n.ReturnCode==ReturnCode.Success?prompt.notify({question:"The Product Limit for "+n.Data[0].Key+" was "+(n.Data[0].Value?"not":"")+" successfully updated.",type:n.Data[0].Value?"error":"success"}):prompt.clientResponseError(n);t=$("div[data-argosy-view=UserPartLimitsGrid]").find(".k-collapse-grid").getKendoGrid();t.dataSource.read();t.refresh(!0);i=$("div[data-argosy-view=UserEditAddPartLimits]").getKendoGrid();i.dataSource.read();i.refresh(!0)}})}function addPartCategory(){var n=this.getSelectedRecords(),t;n.length!=0?(t={userId:$("#UserId").val(),partCategories:n},$.ajax({url:"/Admin/Users/AddPartCategoryToUser",type:"POST",data:JSON.stringify(t),dataType:"json",traditional:!0,contentType:"application/json; charset=utf-8",success:function(n){var t,i;n.ReturnCode==ReturnCode.Success?prompt.notify({question:"The part categories were "+(this.Value?"not":"")+" successfully added to the user.",type:this.Value?"error":"success"}):prompt.clientResponseError(n);t=$("div[data-argosy-view=UserPartCategoriesGrid]").find(".k-collapse-grid").getKendoGrid();t.dataSource.read();t.refresh(!0);i=$("div[data-argosy-view=PartCategoryModalGridView]").getKendoGrid();i.dataSource.read();i.refresh(!0)}})):prompt.notify({question:"Select at least one Part category to add",type:"error"});$.fancybox.close()}function getSelectedRecords(){var n=[],t=$("div[data-argosy-view=PartCategoryModalGridView]").getKendoGrid();return $(t.select()).each(function(){n.push(t.dataItem(this))}),n}$(document).ready(function(){$("#resultado").val()!=""&&prompt.notify({question:$("#resultado").val(),type:$("#resultado").val().indexOf("error")==-1?"success":"error"})});addExtraStylingToGrid=function(){$(".k-grid table tbody tr").hover(function(){$(this).toggleClass("k-grid k-state-hover")});$("table.k-focusable tbody tr").hover(function(){$(this).toggleClass("k-state-hover")})};$("#clkManagePics").on("click",function(){$("#arwManagePics").hasClass("fa-minus-circle")?($("#divManagePics").hide("slow"),$("#arwManagePics").removeClass("fa-minus-circle"),$("#arwManagePics").addClass("fa-plus-circle")):($("#divManagePics").show("slow"),$("#arwManagePics").removeClass("fa-plus-circle"),$("#arwManagePics").addClass("fa-minus-circle"))});$("#grid_editlimits").kendoGrid({dataSource:{type:"odata",pageSize:5},groupable:!1,sortable:!0,selectable:!0,scrollable:!1,dataBound:addExtraStylingToGrid,pageable:{refresh:!1,pageSizes:!1,previousNext:!0,numeric:!1,buttonCount:1},columns:[{title:"Active",template:"<input type='checkbox' />",width:"50px"},{title:"Product",template:"Product name can be long"},{title:"Order Limit",template:"Product name can be long"},{title:"Time Frame",template:"Product name can be long"}]});addExtraStylingToGrid=function(){$(".k-grid table tbody tr").hover(function(){$(this).toggleClass("k-grid k-state-hover")});$("table.k-focusable tbody tr").hover(function(){$(this).toggleClass("k-state-hover")})};$("#grid").kendoGrid({dataSource:{type:"odata",pageSize:5},groupable:!1,sortable:!0,selectable:!0,scrollable:!1,dataBound:addExtraStylingToGrid,pageable:{refresh:!0,pageSizes:!0,buttonCount:5},columns:[{title:"Transaction Date",template:"10/25/2014"},{title:"<span class='textr'>Amount<\/span>",template:"<span class='textr'>$1,500.00<\/span>"},{title:"Order Number",template:"TWG-1254"},{title:"Adjustment Reason",template:"Order Placed Debit"},{title:"<a href='#' class='btn btn-excel'><i class='fa la fa-file-excel-o'><\/i><\/a>",width:"30px"}]});