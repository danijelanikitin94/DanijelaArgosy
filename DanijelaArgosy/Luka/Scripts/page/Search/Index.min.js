function setupEventListeners(){$(document).on("PRODUCT_VIEW_LISTENERS_LOADED ASSET_VIEW_LISTENERS_LOADED",function(){searchForTerms(!0)});$(document).on("ASSET_VIEW_DATABOUND",function(n,t){var i=$("#spanDAM").hasClass("checked");t.Count>0?i||$("#chDAM").trigger("click"):i&&$("#chDAM").trigger("click")})}function setupEvents(){$("#chProducts").on("click",function(){var t=$("#spanProducts"),n=$("#divProductResults"),i=$("#spanDAM"),r=$("#divDAMResults");t.hasClass("checked")?(t.removeClass("checked"),n.hide("slow"),i.hasClass("checked")&&r.removeClass("col-sm-6 border1").addClass("col-sm-12")):(t.addClass("checked"),n.show("slow"),i.hasClass("checked")?(r.removeClass("col-sm-12").addClass("col-sm-6 border1"),n.removeClass("col-sm-12").addClass("col-sm-6")):n.removeClass("col-sm-6").addClass("col-sm-12"))});$("#chDAM").on("click",function(){var t=$("#spanDAM"),n=$("#divDAMResults"),r=$("#spanProducts"),i=$("#divProductResults");t.hasClass("checked")?(t.removeClass("checked"),n.hide("slow"),r.hasClass("checked")&&(i.removeClass("col-sm-6"),n.removeClass("border1"),i.addClass("col-sm-12"))):(t.addClass("checked"),n.show("slow"),r.hasClass("checked")?(i.removeClass("col-sm-12").addClass("col-sm-6"),n.removeClass("col-sm-12").addClass("col-sm-6 border1")):n.removeClass("col-sm-6").addClass("col-sm-12"))});$("#searchBtn").off("click").on("click",function(){var n=$("input.search"),t=[];t.push(n.val());addTerms(t,$(".term-ul"));n.val("");searchForTerms()});$("#advanceSearchBtn").off("click").on("click",function(){var n=$("#advs-keyword"),t=[];t.push(n.val());addTerms(t,$(".term-ul"));n.val("");searchForTerms(!1,!0)});$(document).keypress(function(){event.keyCode==13&&($.fancybox.isOpen===!0?$("#advanceSearchBtn").trigger("click"):$("#searchBtn").trigger("click"),event.preventDefault()?event.preventDefault():event.returnValue=!1);event.returnValue=!0})}function searchForTerms(n,t){var u="",i=basePartSearch,r=baseAssetSearch,f;$(".search-terms").each(function(){var n=$(this).text();n&&(u+=n+" ")});t&&(i.Sku=$.trim($("#advs-sku").val()),i.PartName=$.trim($("#advs-partName").val()),i.Description=$.trim($("#advs-description").val()),i.FormNo=$.trim($("#advs-formNo").val()),i.Code=$.trim($("#advs-code").val()),i.Type=$.trim($("#advs-type").val()),i.Plant=$.trim($("#advs-plant").val()),i.Manufacturer=$.trim($("#advs-mfr").val()),i.VendorSku=$.trim($("#advs-vendorSku").val()),i.InternalPartId=$.trim($("#advs-internalPartId").val()),r.MinDpi=$("#advs-minDpi").val(),r.MaxDpi=$("#advs-maxDpi").val(),r.TYPE=$("#advs-imageTypes").val());i.Keyword=u;r.Keywords=u;f=!0;n&&(f=!1);$(document).trigger(argosyEvents.FULL_TEXT_SEARCH,{read:f,currentPartSearch:i,currentAssetSearch:r})}function BuildSearchTermsFromQueryString(){var u=getQuerystring("searchFor",""),i=[],r,n,t;i.push(u.replace("+"," "));r=$(".term-search-div");n=$("<ul/>",{"class":"maru10 term-ul"});n.appendTo(r);t=$("<li/>");$("<div/>",{"class":"floatl lineheight padl10 padr10 search-for-div",text:"Searching for:"}).appendTo(t);t.appendTo(n);addTerms(i,n)}function addTerms(n,t){$(n).each(function(){var r="",i,n;if(this.indexOf("-")===0&&(r="-red"),this.length>0){i=$("<li/>",{"class":"floatl marr10 term-li"});n=$("<label/>",{"class":"search-terms finger keyword-box"+r,text:this});$("<i/>",{"class":"fa fa-times small_txt",title:"Delete Filter"}).prependTo(n);n.appendTo(i);n.off("click").on("click",function(){$(this).parent().remove();checkForTerms();searchForTerms()});i.appendTo(t)}});checkForTerms()}function checkForTerms(){var i=$(".term-ul"),n=$(".search-for-div"),t=$("#btnClearAll");i.children("li").length>1?(n.fadeIn(),t.fadeIn()):(n.hide(),t.hide())}var basePartSearch={Active:"Y",PartGroupId:0,Keyword:"",Sku:"",PartName:"",Description:"",FormNo:"",Code:"",Type:"",Plant:"",Manufacturer:"",VendorSku:"",InternalPartId:"",ExcludeChildConfigParts:!0},baseAssetSearch={AssetGroupId:0,Keywords:"",Name:"",TypeId:"",MinDpi:0,MaxDpi:0};$(function(){$(".top-search").hide();$("#btnClearAll").on("click",function(n){n.preventDefault();$(".term-li").remove();checkForTerms();searchForTerms()});BuildSearchTermsFromQueryString();setupEvents();setupEventListeners()});