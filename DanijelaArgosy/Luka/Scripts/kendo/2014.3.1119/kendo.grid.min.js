(function(n,t){t(["./kendo.data","./kendo.columnsorter","./kendo.editable","./kendo.window","./kendo.filtermenu","./kendo.columnmenu","./kendo.groupable","./kendo.pager","./kendo.selectable","./kendo.sortable","./kendo.reorderable","./kendo.resizable","./kendo.mobile.actionsheet","./kendo.mobile.pane","./kendo.ooxml","./kendo.excel","./kendo.pdf"],n)})(function(){return function(n,t){function ci(n){return new Array(n+1).join('<td class="k-group-cell">&nbsp;<\/td>')}function ti(n){var t,i=" ";if(n){if(typeof n===p)return n;for(t in n)i+=t+'="'+n[t]+'"'}return i}function tr(t,i){n("th, th .k-grid-filter, th .k-link",t).add(document.body).css("cursor",i)}function ir(n){var t,i,r={},u={};if(!fi(n))for(et(n)||(n=[n]),t=0,i=n.length;t<i;t++)r[n[t].aggregate]=0,u[n[t].field]=r;return u}function ht(t,i,r,u,f){var o=i,e;for(i=n(),f=f||1,e=0;e<f;e++)i=i.add(t.eq(o+e));typeof r=="number"?i[u?"insertBefore":"insertAfter"](t.eq(r)):i.appendTo(r)}function d(t,i,r){return n(t).add(i).find(r)}function cf(n,t,i){var f,c,u,s;for(i=et(i)?i:[i],f=0,c=i.length;f<c;f++)if(u=i[f],h(u)&&u.click){s=u.name||u.text;t.on(o+r,"a.k-grid-"+(s||"").replace(/\s/g,""),{commandName:s},e(u.click,n))}}function eu(n,t,i){return dt(n,function(n){n=typeof n===p?{field:n}:n;var r;return(!it(n)||i)&&(n.attributes=li(n.attributes),n.footerAttributes=li(n.footerAttributes),n.headerAttributes=li(n.headerAttributes),r=!0),n.columns&&(n.columns=eu(n.columns,t,r)),f({encoded:t,hidden:r},n)})}function rr(n,t){var i=[];return ur(n,t,i),i[i.length-1]}function ur(n,t,i){var r,u;for(i=i||[],r=0;r<t.length;r++){if(n===t[r])return!0;if(t[r].columns){if(u=i.length,i.push(t[r]),ur(n,t[r].columns,i))return!0;i.splice(u,i.length-u)}}return!1}function ii(n,t){var i=t?wf:li;n.hidden=!t;n.attributes=i(n.attributes);n.footerAttributes=i(n.footerAttributes);n.headerAttributes=i(n.headerAttributes)}function it(n){return g([n]).length>0}function g(n){return l(n,function(n){var t=!n.hidden;return t&&n.columns&&(t=g(n.columns).length>0),t})}function lf(t){return n(t).map(function(){return this.toArray()})}function af(n,t,i){var r=ri(s(t)),u=ri(rt(t)),f=n.rowSpan;n.rowSpan=i?r>u?f-(r-u)||1:f+(u-r):r>u?f+(r-u):f-(u-r)||1}function ou(t,i,r,u,f,e,o){var s=ri(t),h=ri([i]),c,l;s>h&&(c=new Array(o+1).join('<th class="k-group-cell k-header">&nbsp;<\/th>'),l=e.children(":not(.k-filter-row)"),n(new Array(s-h+1).join("<tr>"+c+"<\/tr>")).insertAfter(l.last()));yf(e,s-h);hu(r,u,f,e)}function su(n,t,r){var e,o,s,f,h;for(r=r||0,s=t,t=u(t),f=0,h=t.length;f<h;f++)e=fr(t[f],s),o=n.find(">tr:not(.k-filter-row)").eq(e.row).find(".k-header:not(.k-group-cell,.k-hierarchy-cell)").eq(e.cell),o.attr(i.attr("index"),r+f);return t.length}function ri(n){for(var r,i=0,t=0;t<n.length;t++)n[t].columns&&(r=ri(n[t].columns),r>i&&(i=r));return 1+i}function hu(t,i,r,u){for(var o=wt(t[0],i),h=r.find(">tr:not(.k-filter-row):eq("+o.row+")>th.k-header"),s=n(),c=o.cell,e,f=0;f<t.length;f++)s=s.add(h.eq(c+f));for(u.find(">tr:not(.k-filter-row)").eq(o.row).append(s),e=[],f=0;f<t.length;f++)t[f].columns&&(e=e.concat(t[f].columns));e.length&&hu(e,i,r,u)}function fr(n,t,i,r){var f,u;for(i=i||0,r=r||{},r[i]=r[i]||0,u=0;u<t.length;u++){if(t[u]==n){f={cell:r[i],row:i};break}else if(t[u].columns&&(f=fr(n,t[u].columns,i+1,r),f))break;r[i]++}return f}function cu(n,t,i,r){var e,f,u;return t.columns?(t=t.columns,t[r?0:t.length-1]):(e=rr(t,n),f=e?e.columns:n,u=y(t,f),u===0&&r?u++:u!=f.length-1||r?(u>0||u===0&&!r)&&(u+=r?-1:1):u--,t=f[Math.max(u,0)],t&&t!=i&&t.columns)?cu(n,t,i,r):null}function wt(n,t,i,r){var f,u;for(i=i||0,r=r||{},r[i]=r[i]||0,u=0;u<t.length;u++){if(t[u]==n){f={cell:r[i],row:i};break}else if(t[u].columns&&(f=wt(n,t[u].columns,i+1,r),f))break;t[u].hidden||r[i]++}return f}function er(n){var t=ct(s(n));return t.concat(ct(rt(n)))}function ct(n){for(var i=[],r=[],t=0;t<n.length;t++)i.push(n[t]),n[t].columns&&(r=r.concat(n[t].columns));return r.length&&(i=i.concat(ct(r))),i}function bt(n){for(var i=0,t,r=0;r<n.length;r++)t=n[r],t.columns?i+=bt(t.columns):t.hidden&&i++;return i}function lu(n){for(var t,r=0,i=0,u=n.length;i<u;i++)t=n[i].style.width,t&&t.indexOf("%")==-1&&(r+=parseInt(t,10));return r}function vf(n,t){for(var r=n.find("tr:not(.k-filter-row) th:not(.k-group-cell,.k-hierarchy-cell)"),u,i=0;i<r.length;i++)u=r[i].rowSpan,u>1&&(r[i].rowSpan=u-t||1)}function yf(n,t){for(var r=n.find("tr:not(.k-filter-row) th:not(.k-group-cell,.k-hierarchy-cell)"),i=0;i<r.length;i++)r[i].rowSpan+=t}function or(t){for(var r=t.find("tr:not(.k-filter-row)"),f=r.filter(function(){return!n(this).children().length}).remove().length,u=r.find("th:not(.k-group-cell,.k-hierarchy-cell)"),i=0;i<u.length;i++)u[i].rowSpan>1&&(u[i].rowSpan-=f);return r.length-f}function au(n,t,i,r,u){for(var o,e=[],f=0,s=n.length;f<s;f++)o=i[r]||[],o.push(t.eq(u+f)),i[r]=o,n[f].columns&&(e=e.concat(n[f].columns));e.length&&au(e,t,i,r+1,u+n.length)}function s(n){return l(n,function(n){return n.locked})}function rt(n){return l(n,function(n){return!n.locked})}function pf(n){return l(n,function(n){return!n.locked&&it(n)})}function sr(n){return l(n,function(n){return n.locked&&it(n)})}function ut(n){for(var i=[],t=0;t<n.length;t++)n[t].hidden||(n[t].columns?i=i.concat(ut(n[t].columns)):i.push(n[t]));return i}function u(n){for(var i=[],t=0;t<n.length;t++){if(!n[t].columns){i.push(n[t]);continue}i=i.concat(u(n[t].columns))}return i}function nt(t){var u=t.find(">tr:not(.k-filter-row)"),r=n(),f;return u.length>1&&(r=u.find("th:not(.k-group-cell,.k-hierarchy-cell)").filter(function(){return this.rowSpan>1})),r=r.add(u.last().find("th:not(.k-group-cell,.k-hierarchy-cell)")),f=i.attr("index"),r.sort(function(t,i){return t=parseInt(n(t).attr(f),10),i=parseInt(n(i).attr(f),10),t>i?1:t<i?-1:0}),r}function vu(t){var a=t.closest("table"),f=n().add(t),o=t.closest("tr"),s=a.find("tr:not(.k-filter-row)"),h=s.index(o),i,u;if(h>0){var v=s.eq(h-1),c=v.find("th:not(.k-group-cell,.k-hierarchy-cell)").filter(function(){return!n(this).attr("rowspan")}),r=0,e=o.find("th:not(.k-group-cell,.k-hierarchy-cell)").index(t),l=t.prevAll(":not(.k-group-cell,.k-hierarchy-cell)").filter(function(){return this.colSpan>1});for(i=0;i<l.length;i++)r+=l[i].colSpan||1;for(e+=Math.max(r-1,0),r=0,i=0;i<c.length;i++)if(u=c.eq(i),r+=u.attr("colSpan")?u[0].colSpan:1,e>=i&&e<r){f=vu(u).add(f);break}}return f}function hr(t){var y=t.closest("table"),e=n().add(t),o=t.closest("tr"),a=y.find("tr:not(.k-filter-row)"),p=a.index(o)+t[0].rowSpan,s=i.attr("colspan"),h,v,c,l;if(p<=a.length-1){var u=o.next(),w=o.find("th:not(.k-group-cell,.k-hierarchy-cell)").index(t),f=t.prevAll(":not(.k-group-cell,.k-hierarchy-cell)"),r;for(f=f.filter(function(){return!this.rowSpan||this.rowSpan===1}),h=0,r=0;r<f.length;r++)h+=parseInt(f.eq(r).attr(s),10)||1;for(v=u.find("th:not(.k-group-cell,.k-hierarchy-cell)"),c=parseInt(t.attr(s),10)||1,r=0;r<c;)u=v.eq(r+h),e=e.add(hr(u)),l=parseInt(u.attr(s),10),l>1&&(c-=l-1),r++}return e}function yu(t,i,r){var u,f=t;return rf?t[0].innerHTML=r:(u=document.createElement("div"),u.innerHTML="<table><tbody>"+r+"<\/tbody><\/table>",t=u.firstChild.firstChild,i[0].replaceChild(t,f[0]),t=n(t)),t}function li(n){n=n||{};var t=n.style;return t?(t=t.replace(/((.*)?display)(.*)?:([^;]*)/i,"$1:none"),t===n.style&&(t=t.replace(/(.*)?/i,"display:none;$1"))):t="display:none",f({},n,{style:t})}function wf(n){n=n||{};var t=n.style;return t&&(n.style=t.replace(/(display\s*:\s*none\s*;?)*/ig,"")),n}function ai(t,r,u,f){var e=t.find(">colgroup"),o,s=dt(r,function(n){return(o=n.width,o&&parseInt(o,10)!==0)?i.format('<col style="width:{0}"/>',typeof o===p?o:o+"px"):"<col />"});(u||e.find(".k-hierarchy-col").length)&&s.splice(0,0,'<col class="k-hierarchy-col" />');e.length&&e.remove();e=n(new Array(f+1).join('<col class="k-group-col">')+s.join(""));e.is("colgroup")||(e=n("<colgroup/>").append(e));t.prepend(e);c.msie&&c.version==8&&(t.css("display","inline-table"),window.setTimeout(function(){t.css("display","")},1))}function bf(n,t){for(var r=0,i=0,u=t.length;i<u;i++)t[i].locked&&(n.eq(i).insertBefore(n.eq(r)),r++)}function pu(n){for(var r={},i,t=0,u=n.length;t<u;t++)i=n[t],r[i.value]=i.text;return r}function kf(n,t,r){var f=r&&r.length&&h(r[0])&&"value"in r[0],u=f?pu(r)[n]:n;return u=u!=null?u:"",t?i.format(t,u):u}function ft(n,t,i){for(var u=0,f,r=n[u];r;){if(f=i?!0:r.style.display!=="none",f&&!of.test(r.className)&&--t<0){r.style.display=i?"":"none";break}r=n[++u]}}function wu(t,i){for(var f=0,e=t.length,r,u;f<e;f+=1)u=t.eq(f),u.is(".k-grouping-row,.k-detail-row")?(r=u.children(":not(.k-group-cell):first,.k-detail-cell").last(),r.attr("colspan",parseInt(r.attr("colspan"),10)-1)):(u.hasClass("k-grid-edit-row")&&(r=u.children(".k-edit-container")[0])&&(r=n(r),r.attr("colspan",parseInt(r.attr("colspan"),10)-1),r.find("col").eq(i).remove(),u=r.find("tr:first")),ft(u[0].cells,i,!1))}function bu(t,i){for(var f=0,e=t.length,r,u,o;f<e;f+=1)u=t.eq(f),u.is(".k-grouping-row,.k-detail-row")?(r=u.children(":not(.k-group-cell):first,.k-detail-cell").last(),r.attr("colspan",parseInt(r.attr("colspan"),10)+1)):(u.hasClass("k-grid-edit-row")&&(r=u.children(".k-edit-container")[0])&&(r=n(r),r.attr("colspan",parseInt(r.attr("colspan"),10)+1),ai(r.find(">form>table"),g(o),!1,0),u=r.find("tr:first")),ft(u[0].cells,i,!0))}function ku(n,t,i){i=i||1;for(var r,u=0,f=n.length;u<f;u++)r=n.eq(u).children().last(),r.attr("colspan",parseInt(r.attr("colspan"),10)+i),r=t.eq(u).children().last(),r.attr("colspan",parseInt(r.attr("colspan"),10)-i)}function du(n){for(var r=0,u=n.find(">colgroup>col"),t=0,i=u.length;t<i;t+=1)r+=parseInt(u[t].style.width,10);return r}function df(n,t){if(n=n[0],t=t[0],n.rows.length!==t.rows.length){var r=n.offsetHeight,u=t.offsetHeight,i,f;r>u?(i=t.rows[t.rows.length-1],uu.test(i.className)&&(i=t.rows[t.rows.length-2]),f=r-u):(i=n.rows[n.rows.length-1],uu.test(i.className)&&(i=n.rows[n.rows.length-2]),f=u-r);i.style.height=i.offsetHeight+f+"px"}}function ui(n,t){var i,r=n.offsetHeight,u=t.offsetHeight;r>u?i=r+"px":r<u&&(i=u+"px");i&&(n.style.height=t.style.height=i)}function lr(n,t){var r,u,i;if(typeof n===p&&n===t||h(n)&&n.name===t)return n;if(et(n))for(r=0,u=n.length;r<u;r++)if(i=n[r],typeof i===p&&i===t||i.name===t)return i;return null}function a(t,i){var u=c.msie,r,f,e;if(i===!0){if(t=n(t),r=!0||u&&t.parent().is(".k-grid-content,.k-grid-header-wrap"),r&&(f=t.parent().scrollTop(),e=t.parent().scrollLeft()),u)try{t[0].setActive()}catch(o){t[0].focus()}else t[0].focus();r&&(t.parent().scrollTop(f),t.parent().scrollLeft(e))}else n(t).one("focusin",function(n){n.preventDefault()}).focus()}function gf(t){var u=n(t.currentTarget),f=u.is("th"),e=this.table.add(this.lockedTable),o=this.thead.parent().add(n(">table",this.lockedHeader)),s=n(t.target).is(":button,a,:input,a>.k-icon,textarea,span.k-icon,span.k-link,.k-input,.k-multiselect-wrap"),r=u.closest("table")[0];i.support.touch||s&&u.find(i.roleSelector("filtercell")).length||(r===e[0]||r===e[1]||r===o[0]||r===o[1])&&(n(t.target).is("a.k-i-collapse, a.k-i-expand")||(this.current(u),(f||!s)&&setTimeout(function(){hf&&n(i._activeElement()).hasClass("k-widget")||a(r,!0)}),f&&t.preventDefault()))}function ne(t,i,r,u){if(t=n(t),u){var f=i;i=r;r=f}return i.not(t).length!=i.length?t:t[0]==r[0]?i.eq(0):i.eq(1)}function gu(n,r,u,f,e){var o,s,c=e?"prevAll":"nextAll",h;if(n){if(o=n.parent()[c](ei).first(),!o[0]&&(e||n.is("th"))||!e&&n[0].rowSpan>1){if(r=ne(r,u,f,e),a(r),e&&!n.is(".k-header"))return nt(r.find("thead:first")).eq(n.index());o=r.find((e?">thead>":">tbody>")+ei).first()}!e&&n[0].colSpan>1&&n.is(".k-header")?n=hr(n).eq(1):n.is(".k-header")&&e?(h=vu(n),n=h.eq(h.length-2)):(s=n.attr(i.attr("index")),(s===t||e)&&(s=n.index()),n=o.children().eq(s));n[0]&&n.is(ot)||(n=o.children(ot).first())}else n=u.find(vt);return n}function te(n,t,i,r,u){var f=i.length>1;return n?n.prevAll(":visible")[0]?n=n.prevAll(k).first():f&&(t==i[1]?(a(i[0]),n=u(n.parent()).children(k).last()):t==r[1]&&(a(r[0]),n=r.eq(0).find("tr>"+k).last())):n=i.find(vt),n}function ie(n,t,i,r,u){var f=i.length>1;return n?n.nextAll(":visible")[0]?n=n.nextAll(k).first():f&&(t==i[0]?(a(i[1]),n=u(n.parent()).children(k).first()):t==r[0]&&(a(r[1]),n=r.eq(1).find("tr>"+k).first())):n=i.find(vt),n}function re(n,t,i,r,u){var o=i.length==2,e=!0,f=u?n.prevAll(k+":first"):n.nextAll(":visible:first");return f.length||(f=n.parent(),o&&(e=u&&t==i[0]||!u&&t==i[1],f=r(f)),e&&(f=f[u?"prevAll":"nextAll"]("tr:not(.k-grouping-row):not(.k-detail-row):visible:first")),f=f.children(k+(u?":last":":first"))),f}function nf(n,t,i){return'<tr class="k-grouping-row">'+ci(t)+'<td colspan="'+n+'" aria-expanded="true"><p class="k-reset"><a class="k-icon k-i-collapse" href="#" tabindex="-1"><\/a>'+i+"<\/p><\/td><\/tr>"}function ue(n){return'<tr class="k-grouping-row"><td colspan="'+n+'" aria-expanded="true"><p class="k-reset">&nbsp;<\/p><\/td><\/tr>'}var i=window.kendo,lt=i.ui,ar=i.data.DataSource,tf=lt.Groupable,rf=i.support.tbodyInnerHtml,at=i._activeElement,kt=lt.Widget,v=i.keys,h=n.isPlainObject,f=n.extend,dt=n.map,l=n.grep,et=n.isArray,y=n.inArray,vr=Array.prototype.push,e=n.proxy,uf=i.isFunction,fi=n.isEmptyObject,tt=Math,vi="progress",yi="error",k=":not(.k-group-cell):not(.k-hierarchy-cell):visible",ff="tbody>tr:not(.k-grouping-row):not(.k-detail-row):not(.k-group-footer) > td:not(.k-group-cell):not(.k-hierarchy-cell)",ei="tr:not(.k-footer-template):visible",ot=":not(.k-group-cell):not(.k-hierarchy-cell):visible",vt=ei+":first>"+ot+":first",pi="th.k-header:not(.k-group-cell):not(.k-hierarchy-cell)",r=".kendoGrid",oi="edit",wi="save",yr="remove",bi="detailInit",pr="filterMenuInit",wr="columnMenuInit",b="change",ki="columnHide",di="columnShow",br="saveChanges",gi="dataBound",kr="detailExpand",dr="detailCollapse",gt="k-state-focused",gr="k-state-selected",nu="columnResize",tu="columnReorder",iu="columnLock",ru="columnUnlock",o="click",nr="height",yt="tabIndex",pt="function",p="string",ef=/(\}|\#)/ig,si=/#/ig,hi="[\\x20\\t\\r\\n\\f]",of=new RegExp("(^|"+hi+")(k-group-cell|k-hierarchy-cell)("+hi+"|$)"),uu=new RegExp("(^|"+hi+")(k-filter-row)("+hi+"|$)"),sf='<a class="k-button k-button-icontext #=className#" #=attr# href="\\#"><span class="#=iconClass# #=imageClass#"><\/span>#=text#<\/a>',st=!1,c=i.support.browser,ni=c.msie&&c.version==7,hf=c.msie&&c.version==8,fu=kt.extend({init:function(n,t){var i=this;kt.fn.init.call(i,n,t);i._refreshHandler=e(i.refresh,i);i.setDataSource(t.dataSource);i.wrap()},setDataSource:function(n){var t=this;t.dataSource&&t.dataSource.unbind(b,t._refreshHandler);t.dataSource=n;t.dataSource.bind(b,t._refreshHandler)},options:{name:"VirtualScrollable",itemHeight:n.noop},destroy:function(){var n=this;kt.fn.destroy.call(n);n.dataSource.unbind(b,n._refreshHandler);n.wrapper.add(n.verticalScrollbar).off(r);n.drag&&(n.drag.destroy(),n.drag=null);n.wrapper=n.element=n.verticalScrollbar=null;n._refreshHandler=null},wrap:function(){var t=this,o=i.support.scrollbar()+1,u=t.element,f;u.css({width:"auto",overflow:"hidden"}).css(st?"padding-left":"padding-right",o);t.content=u.children().first();f=t.wrapper=t.content.wrap('<div class="k-virtual-scrollable-wrap"/>').parent().bind("DOMMouseScroll"+r+" mousewheel"+r,e(t._wheelScroll,t));i.support.kineticScrollNeeded&&(t.drag=new i.UserEvents(t.wrapper,{global:!0,start:function(n){n.sender.capture()},move:function(n){t.verticalScrollbar.scrollTop(t.verticalScrollbar.scrollTop()-n.y.delta);f.scrollLeft(f.scrollLeft()-n.x.delta);n.preventDefault()}}));t.verticalScrollbar=n('<div class="k-scrollbar k-scrollbar-vertical" />').css({width:o}).appendTo(u).bind("scroll"+r,e(t._scroll,t))},_wheelScroll:function(t){if(!t.ctrlKey){var f=this.verticalScrollbar.scrollTop(),u=i.wheelDeltaY(t);if(u){t.preventDefault();n(t.currentTarget).one("wheel"+r,!1);this.verticalScrollbar.scrollTop(f+-u)}}},_scroll:function(n){var t=this,i=n.currentTarget.scrollTop,f=t.dataSource,r=t.itemHeight,e=f.skip()||0,o=t._rangeStart||e,s=t.element.innerHeight(),h=!!(t._scrollbarTop&&t._scrollbarTop>i),u=tt.max(tt.floor(i/r),0),c=tt.max(u+tt.floor(s/r),0);t._scrollTop=i-o*r;t._scrollbarTop=i;t._fetch(u,c,h)||(t.wrapper[0].scrollTop=t._scrollTop)},_fetch:function(n,t,i){var u=this,e=u.dataSource,h=u.itemHeight,r=e.take(),f=u._rangeStart||e.skip()||0,o=tt.floor(n/r)*r,s=!1,c=.33;return n<f?(s=!0,f=tt.max(0,t-r),u._scrollTop=(n-f)*h,u._page(f,r)):t>=f+r&&!i?(s=!0,f=n,u._scrollTop=h,u._page(f,r)):u._fetching||(n<o+r-r*c&&n>r&&e.prefetch(o-r,r),t>o+r*c&&e.prefetch(o+r,r)),s},_page:function(n,t){var r=this,u=r.dataSource;clearTimeout(r._timeout);r._fetching=!0;r._rangeStart=n;u.inRange(n,t)?u.range(n,t):(i.ui.progress(r.wrapper.parent(),!0),r._timeout=setTimeout(function(){u.range(n,t)},100))},refresh:function(){var n=this,u="",t=25e4,f=n.dataSource,c=n._rangeStart,l=i.support.kineticScrollNeeded?0:i.support.scrollbar(),e=n.wrapper[0],r,o,s,h;for(i.ui.progress(n.wrapper.parent(),!1),clearTimeout(n._timeout),s=n.itemHeight=n.options.itemHeight()||0,h=e.scrollWidth>e.offsetWidth?l:0,r=f.total()*s+h,o=0;o<tt.floor(r/t);o++)u+='<div style="width:1px;height:'+t+'px"><\/div>';r%t&&(u+='<div style="width:1px;height:'+r%t+'px"><\/div>');n.verticalScrollbar.html(u);e.scrollTop=n._scrollTop;n.drag&&n.drag.cancel();c&&!n._fetching&&(n._rangeStart=f.skip(),f.page()===1&&(n.verticalScrollbar[0].scrollTop=0));n._fetching=!1}}),w={create:{text:"Add new record",imageClass:"k-add",className:"k-grid-add",iconClass:"k-icon"},cancel:{text:"Cancel changes",imageClass:"k-cancel",className:"k-grid-cancel-changes",iconClass:"k-icon"},save:{text:"Save changes",imageClass:"k-update",className:"k-grid-save-changes",iconClass:"k-icon"},destroy:{text:"Delete",imageClass:"k-delete",className:"k-grid-delete",iconClass:"k-icon"},edit:{text:"Edit",imageClass:"k-edit",className:"k-grid-edit",iconClass:"k-icon"},update:{text:"Update",imageClass:"k-update",className:"k-primary k-grid-update",iconClass:"k-icon"},canceledit:{text:"Cancel",imageClass:"k-cancel",className:"k-grid-cancel",iconClass:"k-icon"},excel:{text:"Export to Excel",imageClass:"k-i-excel",className:"k-grid-excel",iconClass:"k-icon"},pdf:{text:"Export to PDF",imageClass:"k-i-pdf",className:"k-grid-pdf",iconClass:"k-icon"}},cr=i.ui.DataBoundWidget.extend({init:function(t,u,f){var e=this;if(u=et(u)?{dataSource:u}:u,kt.fn.init.call(e,t,u),f&&(e._events=f),st=i.support.isRtl(t),e._element(),e._aria(),e._columns(e.options.columns),e._dataSource(),e._tbody(),e._pageable(),e._thead(),e._groupable(),e._toolbar(),e._setContentHeight(),e._templates(),e._navigatable(),e._selectable(),e._details(),e._editable(),e._attachCustomCommandsEvent(),e.options.autoBind?e.dataSource.fetch():e._footer(),e.lockedContent){e.wrapper.addClass("k-grid-lockedcolumns");e._resizeHandler=function(){e.resize()};n(window).on("resize"+r,e._resizeHandler)}i.notify(e)},events:[b,"dataBinding","cancel","pdfExport",gi,kr,dr,bi,pr,wr,oi,wi,yr,br,nu,tu,di,ki,iu,ru],setDataSource:function(n){var t=this,i=t.options.scrollable;t.options.dataSource=n;t._dataSource();t._pageable();t._thead();i&&(i.virtual?t.content.find(">.k-virtual-scrollable-wrap").scrollLeft(0):t.content.scrollLeft(0));t.options.groupable&&t._groupable();t.virtualScrollable&&t.virtualScrollable.setDataSource(t.options.dataSource);t.options.navigatable&&t._navigatable();t.options.selectable&&t._selectable();t.options.autoBind&&n.fetch()},options:{name:"Grid",columns:[],toolbar:null,autoBind:!0,filterable:!1,scrollable:!0,sortable:!1,selectable:!1,navigatable:!1,pageable:!1,editable:!1,groupable:!1,rowTemplate:"",altRowTemplate:"",dataSource:{},height:null,resizable:!1,reorderable:!1,columnMenu:!1,detailTemplate:null,columnResizeHandleWidth:3,mobile:"",messages:{editable:{cancelDelete:"Cancel",confirmation:"Are you sure you want to delete this record?",confirmDelete:"Delete"},commands:{create:w.create.text,cancel:w.cancel.text,save:w.save.text,destroy:w.destroy.text,edit:w.edit.text,update:w.update.text,canceledit:w.canceledit.text,excel:w.excel.text,pdf:w.pdf.text}}},destroy:function(){var t=this,u;kt.fn.destroy.call(t);t._resizeHandler&&n(window).off("resize"+r,t._resizeHandler);t.pager&&t.pager.element&&t.pager.destroy();t.pager=null;t.groupable&&t.groupable.element&&t.groupable.element.kendoGroupable("destroy");t.groupable=null;t.options.reorderable&&t.wrapper.data("kendoReorderable").destroy();t.selectable&&t.selectable.element&&t.selectable.destroy();t.selectable=null;t.resizable&&(t.resizable.destroy(),t._resizeUserEvents&&(t._resizeHandleDocumentClickHandler&&n(document).off("click",t._resizeHandleDocumentClickHandler),t._resizeUserEvents.destroy(),t._resizeUserEvents=null),t.resizable=null);t.virtualScrollable&&t.virtualScrollable.element&&t.virtualScrollable.destroy();t.virtualScrollable=null;t._destroyColumnAttachments();t._destroyEditable();t.dataSource&&(t.dataSource.unbind(b,t._refreshHandler).unbind(vi,t._progressHandler).unbind(yi,t._errorHandler),t._refreshHandler=t._progressHandler=t._errorHandler=null);u=t.element.add(t.wrapper).add(t.table).add(t.thead).add(t.wrapper.find(">.k-grid-toolbar"));t.content&&(u=u.add(t.content).add(t.content.find(">.k-virtual-scrollable-wrap")));t.lockedHeader&&t._removeLockedContainers();t.pane&&t.pane.destroy();t._draggableInstance&&t._draggableInstance.element&&t._draggableInstance.destroy();t._draggableInstance=null;u.off(r);i.destroy(t.wrapper);t.scrollables=t.thead=t.tbody=t.element=t.table=t.content=t.footer=t.wrapper=t._groupableClickHandler=t._setContentWidthHandler=null},getOptions:function(){var r=f(!0,{},this.options),u;return r.columns=i.deepExtend([],this.columns),u=this.dataSource,r.dataSource=n.extend(!0,{},u.options),r.dataSource.page=u.page(),r.dataSource.filter=u.filter(),r.dataSource.pageSize=u.pageSize(),r.dataSource.sort=u.sort(),r.dataSource.group=u.group(),r.dataSource.aggregate=u.aggregate(),r.$angular=t,r},setOptions:function(n){var r=this.getOptions();i.deepExtend(r,n);var u=this.wrapper,f=this._events,t=this.element;this.destroy();this.options=null;u[0]!==t[0]&&(u.before(t),u.remove());t.empty();this.init(t,r,f);this._setEvents(r)},items:function(){return this.lockedContent?this._items(this.tbody).add(this._items(this.lockedTable.children("tbody"))):this._items(this.tbody)},_items:function(t){return t.children().filter(function(){var t=n(this);return!t.hasClass("k-grouping-row")&&!t.hasClass("k-detail-row")&&!t.hasClass("k-group-footer")})},dataItems:function(){var t=i.ui.DataBoundWidget.fn.dataItems.call(this),r,u,n;if(this.lockedContent){for(r=t.length,u=new Array(2*r),n=r;--n>=0;)u[n]=u[n+r]=t[n];t=u}return t},_destroyColumnAttachments:function(){var t=this;(t.resizeHandle=null,t.thead)&&(this.angular("cleanup",function(){return{elements:t.thead.get()}}),t.thead.find("th").each(function(){var t=n(this),i=t.data("kendoFilterMenu"),r=t.data("kendoColumnSorter"),u=t.data("kendoColumnMenu");i&&i.destroy();r&&r.destroy();u&&u.destroy()}))},_attachCustomCommandsEvent:function(){for(var t=this,r=u(t.columns||[]),i,n=0,f=r.length;n<f;n++)i=r[n].command,i&&cf(t,t.wrapper,i)},_aria:function(){var n=this.element.attr("id")||"aria";n&&(this._cellId=n+"_active_cell")},_element:function(){var t=this,i=t.element;i.is("table")||(i=t.options.scrollable?t.element.find("> .k-grid-content > table"):t.element.children("table"),i.length||(i=n("<table />").appendTo(t.element)));ni&&i.attr("cellspacing",0);t.table=i.attr("role",t._hasDetails()?"treegrid":"grid");t._wrapper()},_createResizeHandle:function(t,i){var e=this,h=e.options.columnResizeHandleWidth,a=e.options.scrollable,u=e.resizeHandle,l=this._groups(),f,s,o;if(u&&e.lockedContent&&u.data("th")[0]!==i[0]&&(u.remove(),u=null),u||(u=e.resizeHandle=n('<div class="k-resize-handle"><div class="k-resize-handle-inner"><\/div><\/div>'),t.append(u)),st){if(f=i.position().left,a){var r=i.closest(".k-grid-header-wrap, .k-grid-header-locked"),v=c.msie?r.scrollLeft():0,y=c.webkit?r[0].scrollWidth-r[0].offsetWidth-r.scrollLeft():0,p=c.mozilla?r[0].scrollWidth-r[0].offsetWidth-(r[0].scrollWidth-r[0].offsetWidth-r.scrollLeft()):0;f-=y-p+v}}else{for(f=i[0].offsetWidth,s=nt(i.closest("thead")),o=0;o<s.length;o++){if(s[o]==i[0])break;f+=s[o].offsetWidth}l>0&&(f+=t.find(".k-group-cell:first").outerWidth()*l)}u.css({top:i.position().top,left:f-h,height:i.outerHeight(),width:h*3}).data("th",i).show()},_positionColumnResizeHandle:function(){var t=this,i=t.options.columnResizeHandleWidth,u=t.lockedHeader?t.lockedHeader.find("thead:first"):n();t.thead.add(u).on("mousemove"+r,"th",function(r){var u=n(this);if(!u.hasClass("k-group-cell")&&!u.hasClass("k-hierarchy-cell")){var f=r.clientX,e=n(window).scrollLeft(),o=u.offset().left+(st?0:this.offsetWidth);f+e>o-i&&f+e<o+i?t._createResizeHandle(u.closest("div"),u):t.resizeHandle?t.resizeHandle.hide():tr(t.wrapper,"")}})},_resizeHandleDocumentClick:function(t){n(t.target).closest(".k-column-active").length||(n(document).off(t),this._hideResizeHandle())},_hideResizeHandle:function(){this.resizeHandle&&(this.resizeHandle.data("th").removeClass("k-column-active"),this.lockedContent&&!this._isMobile?(this.resizeHandle.remove(),this.resizeHandle=null):this.resizeHandle.hide())},_positionColumnResizeHandleTouch:function(){var t=this,r=t.lockedHeader?t.lockedHeader.find("thead:first"):n();t._resizeUserEvents=new i.UserEvents(r.add(t.thead),{filter:"th:not(.k-group-cell):not(.k-hierarchy-cell)",threshold:10,hold:function(i){var r=n(i.target);i.preventDefault();r.addClass("k-column-active");t._createResizeHandle(r.closest("div"),r);t._resizeHandleDocumentClickHandler||(t._resizeHandleDocumentClickHandler=e(t._resizeHandleDocumentClick,t));n(document).on("click",t._resizeHandleDocumentClickHandler)}})},_resizable:function(){var t=this,s=t.options,h,l,e,o,v=this._isMobile,a=i.support.mobileOS?0:i.support.scrollbar(),f,c,r;s.resizable&&(h=s.scrollable?t.wrapper.find(".k-grid-header-wrap:first"):t.wrapper,v?t._positionColumnResizeHandleTouch(h):t._positionColumnResizeHandle(h),t.resizable&&t.resizable.destroy(),t.resizable=new lt.Resizable(h.add(t.lockedHeader),{handle:".k-resize-handle",hint:function(i){return n('<div class="k-grid-resize-indicator" />').css({height:i.data("th").outerHeight()+t.tbody.attr("clientHeight")})},start:function(i){var a,u,h,y;r=n(i.currentTarget).data("th");v&&t._hideResizeHandle();a=r.closest("table");u=n.inArray(r[0],nt(r.closest("thead")).filter(":visible"));f=a.parent().hasClass("k-grid-header-locked");h=f?t.lockedTable:t.table;y=t.footer||n();t.footer&&t.lockedContent&&(y=f?t.footer.children(".k-grid-footer-locked"):t.footer.children(".k-grid-footer-wrap"));tr(t.wrapper,"col-resize");c=s.scrollable?a.find("col:not(.k-group-col):not(.k-hierarchy-col):eq("+u+")").add(h.children("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col):eq("+u+")")).add(y.find("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col):eq("+u+")")):h.children("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col):eq("+u+")");l=i.x.location;e=r.outerWidth();o=f?h.children("tbody").outerWidth():t.tbody.outerWidth()},resize:function(i){var v=st?-1:1,y=e+i.x.location*v-l*v,h;if(s.scrollable){f&&t.lockedFooter?h=t.lockedFooter.children("table"):t.footer&&(h=t.footer.find(">.k-grid-footer-wrap>table"));h&&h[0]||(h=n());var b=r.closest("table"),k=f?t.lockedTable:t.table,w=!1,p=t.wrapper.width()-a,u=y;f&&o-e+u>p&&(u=e+(p-o-a*2),u<0&&(u=y),w=!0);u>10&&(c.css("width",u),o&&(u=w?p-a*2:o+i.x.location*v-l*v,k.add(b).add(h).css("width",u),f||(t._footerWidth=u)))}else y>10&&c.css("width",y)},resizeend:function(){var f=r.outerWidth(),o,s,n;tr(t.wrapper,"");e!=f&&(s=t.lockedHeader?t.lockedHeader.find("thead:first tr:first").add(t.thead.find("tr:first")):r.parent(),n=r.attr(i.attr("index")),n||(n=s.find("th:not(.k-group-cell):not(.k-hierarchy-cell)").index(r)),o=u(t.columns)[n],o.width=f,t.trigger(nu,{column:o,oldWidth:e,newWidth:f}),t._applyLockedContainersWidth(),t._syncLockedContentHeight(),t._syncLockedHeaderHeight());t._hideResizeHandle();r=null}}))},_draggable:function(){var t=this;t.options.reorderable&&(t._draggableInstance&&t._draggableInstance.destroy(),t._draggableInstance=t.wrapper.kendoDraggable({group:i.guid(),filter:t.content?".k-grid-header:first "+pi:"table:first>.k-grid-header "+pi,drag:function(){t._hideResizeHandle()},hint:function(t){return n('<div class="k-header k-drag-clue" />').css({width:t.width(),paddingLeft:t.css("paddingLeft"),paddingRight:t.css("paddingRight"),lineHeight:t.height()+"px",paddingTop:t.css("paddingTop"),paddingBottom:t.css("paddingBottom")}).html(t.attr(i.attr("title"))||t.attr(i.attr("field"))||t.text()).prepend('<span class="k-icon k-drag-status k-denied" />')}}).data("kendoDraggable"))},_reorderable:function(){var t=this,i;t.options.reorderable&&(t.wrapper.data("kendoReorderable")&&t.wrapper.data("kendoReorderable").destroy(),i=function(n,i,r){var f=n[i],e=n[r],u=rr(f,t.columns);return n=u?u.columns:t.columns,y(e,n)},t.wrapper.kendoReorderable({draggable:t._draggableInstance,dragOverContainers:function(n,r){var u=er(t.columns);return u[n].lockable!==!1&&i(u,n,r)>-1},inSameContainer:function(r){return n(r.source).parent()[0]===n(r.target).parent()[0]&&i(er(t.columns),r.sourceIndex,r.targetIndex)>-1},change:function(n){var r=er(t.columns),u=r[n.oldIndex],f=i(r,n.oldIndex,n.newIndex);t.trigger(tu,{newIndex:f,oldIndex:y(u,r),column:u});t.reorderColumn(f,u,n.position==="before")}}))},_reorderHeader:function(n,t,i){for(var r=this,o=wt(n[0],r.columns),l=wt(t,r.columns),u=[],f=0;f<n.length;f++)n[f].columns&&(u=u.concat(n[f].columns));var c=d(r.lockedHeader,r.thead,"tr:eq("+o.row+")>th.k-header:not(.k-group-cell,.k-hierarchy-cell)"),e=s(n).length,h=s([t]).length;u.length?(e>0&&h===0?ou(n,t,u,r.columns,r.lockedHeader.find("thead"),r.thead,this._groups()):e===0&&h>0&&ou(n,t,u,r.columns,r.thead,r.lockedHeader.find("thead"),this._groups()),t=cu(r.columns,t,n[0],i),t&&r._reorderHeader(u,t,i)):e!==h&&af(c[o.cell],r.columns,e);ht(c,o.cell,l.cell,i,n.length)},_reorderContent:function(t,i,r){var f=this,k=n(),g=t[0],e=y(g,u(f.columns)),c=y(i,u(f.columns)),p=y(g,ut(f.columns)),l=y(i,ut(f.columns)),w=s(f.columns).length,tt=!!i.locked,o=f.footer||f.wrapper.find(".k-grid-footer"),a,v,b,h,nt;for(a=v=l,i.hidden&&(tt?(l=f.lockedTable.find("colgroup"),a=f.lockedHeader.find("colgroup"),v=n(f.lockedFooter).find(">table>colgroup")):(l=f.tbody.prev(),a=f.thead.prev(),v=o.find(".k-grid-footer-wrap").find(">table>colgroup"))),f._hasFilterRow()&&ht(f.wrapper.find(".k-filter-row th:not(.k-group-cell,.k-hierarchy-cell)"),e,c,r,t.length),ht(d(f.lockedHeader,f.thead.prev(),"col:not(.k-group-col,.k-hierarchy-col)"),p,a,r,t.length),f.options.scrollable&&ht(d(f.lockedTable,f.tbody.prev(),"col:not(.k-group-col,.k-hierarchy-col)"),p,l,r,t.length),o&&o.length&&(ht(d(f.lockedFooter,o.find(".k-grid-footer-wrap"),">table>colgroup>col:not(.k-group-col,.k-hierarchy-col)"),p,v,r,t.length),ht(o.find(".k-footer-template>td:not(.k-group-cell,.k-hierarchy-cell)"),e,c,r,t.length)),b=f.tbody.children(":not(.k-grouping-row,.k-detail-row)"),f.lockedTable&&(w>c?w<=e&&ku(f.lockedTable.find(">tbody>tr.k-grouping-row"),f.table.find(">tbody>tr.k-grouping-row"),t.length):w>e&&ku(f.table.find(">tbody>tr.k-grouping-row"),f.lockedTable.find(">tbody>tr.k-grouping-row"),t.length),k=f.lockedTable.find(">tbody>tr:not(.k-grouping-row,.k-detail-row)")),h=0,nt=b.length;h<nt;h+=1)ht(d(k[h],b[h],">td:not(.k-group-cell,.k-hierarchy-cell)"),e,c,r,t.length)},reorderColumn:function(n,i,r){var f=this,v=rr(i,f.columns),c=v?v.columns:f.columns,o=y(i,c),e=c[n],l,h=!!e.locked,p=s(f.columns).length,a;o!==n&&(i.locked||!h||rt(f.columns).length!=1)&&(!i.locked||h||p!=1)&&(f._hideResizeHandle(),r===t&&(r=n<o),a=[i],f._reorderHeader(a,e,r),f.lockedHeader&&(or(f.thead),or(f.lockedHeader)),e.columns&&(e=u(e.columns),e=e[r?0:e.length-1]),i.columns&&(a=u(i.columns)),f._reorderContent(a,e,r),l=!!i.locked,l=l!=h,i.locked=h,c.splice(r?n:n+1,0,i),c.splice(o<n?o:o+1,1),f._templates(),f._updateColumnCellIndex(),f._updateTablesWidth(),f._applyLockedContainersWidth(),f._syncLockedHeaderHeight(),f._syncLockedContentHeight(),f._updateFirstColumnClass(),l)&&(h?f.trigger(iu,{column:i}):f.trigger(ru,{column:i}))},_updateColumnCellIndex:function(){var n,t=0;this.lockedHeader&&(n=this.lockedHeader.find("thead"),t=su(n,s(this.columns)));su(this.thead,rt(this.columns),t)},lockColumn:function(n){var t=this.columns,i;(n=typeof n=="number"?t[n]:l(t,function(t){return t.field===n})[0],!n||n.locked||n.hidden)||(i=s(t).length-1,this.reorderColumn(i,n,!1))},unlockColumn:function(n){var t=this.columns,i;(n=typeof n=="number"?t[n]:l(t,function(t){return t.field===n})[0],n&&n.locked&&!n.hidden)&&(i=s(t).length,this.reorderColumn(i,n,!0))},cellIndex:function(t){var i=0;return this.lockedTable&&!n.contains(this.lockedTable[0],t[0])&&(i=u(s(this.columns)).length),n(t).parent().children("td:not(.k-group-cell,.k-hierarchy-cell)").index(t)+i},_modelForContainer:function(t){t=n(t);t.is("tr")||this._editMode()==="popup"||(t=t.closest("tr"));var r=t.attr(i.attr("uid"));return this.dataSource.getByUid(r)},_editable:function(){var t=this,f=t.selectable&&t.selectable.options.multiple,i=t.options.editable,e=function(){var i=at(),r=t._editContainer;!r||n.contains(r[0],i)||r[0]===i||n(i).closest(".k-animation-container").length||t.editable.end()&&t.closeCell()},u;if(i){if(u=t._editMode(),u==="incell"){if(i.update!==!1)t.wrapper.on(o+r,"tr:not(.k-grouping-row) > td",function(i){var r=n(this),u=t.lockedTable&&r.closest("table")[0]===t.lockedTable[0];r.hasClass("k-hierarchy-cell")||r.hasClass("k-detail-cell")||r.hasClass("k-group-cell")||r.hasClass("k-edit-cell")||r.has("a.k-grid-delete").length||r.has("button.k-grid-delete").length||r.closest("tbody")[0]!==t.tbody[0]&&!u||n(i.target).is(":input")||(t.editable?t.editable.end()&&(f&&n(at()).blur(),t.closeCell(),t.editCell(r)):t.editCell(r))}).on("focusin"+r,function(){clearTimeout(t.timer);t.timer=null}).on("focusout"+r,function(){t.timer=setTimeout(e,1)})}else if(i.update!==!1)t.wrapper.on(o+r,"tbody>tr:not(.k-detail-row,.k-grouping-row):visible a.k-grid-edit",function(i){i.preventDefault();t.editRow(n(this).closest("tr"))});if(i.destroy!==!1)t.wrapper.on(o+r,"tbody>tr:not(.k-detail-row,.k-grouping-row):visible .k-grid-delete",function(i){i.preventDefault();i.stopPropagation();t.removeRow(n(this).closest("tr"))});else t.wrapper.on(o+r,"tbody>tr:not(.k-detail-row,.k-grouping-row):visible button.k-grid-delete",function(n){n.stopPropagation();t._confirmation()||n.preventDefault()})}},editCell:function(t){var e;t=n(t);var i=this,r=u(i.columns)[i.cellIndex(t)],f=i._modelForContainer(t);i.closeCell();f&&(!f.editable||f.editable(r.field))&&!r.command&&r.field&&(i._attachModelChange(f),i._editContainer=t,i.editable=t.addClass("k-edit-cell").kendoEditable({fields:{field:r.field,format:r.format,editor:r.editor,values:r.values},model:f,target:i,change:function(n){i.trigger(wi,{values:n.values,container:t,model:f})&&n.preventDefault()}}).data("kendoEditable"),e=t.parent().addClass("k-grid-edit-row"),i.lockedContent&&ui(e[0],i._relatedRow(e).addClass("k-grid-edit-row")[0]),i.trigger(oi,{container:t,model:f}))},_adjustLockedHorizontalScrollBar:function(){var n=this.table,t=n.parent(),r=n[0].offsetWidth>t[0].clientWidth?i.support.scrollbar():0;this.lockedContent.height(t.height()-r)},_syncLockedContentHeight:function(){this.lockedTable&&(this._adjustLockedHorizontalScrollBar(),this._adjustRowsHeight(this.table,this.lockedTable))},_syncLockedHeaderHeight:function(){if(this.lockedHeader){var n=this.lockedHeader.children("table"),t=this.thead.parent();this._adjustRowsHeight(n,t);df(n,t)}},_syncLockedFooterHeight:function(){this.lockedFooter&&this.footer&&this.footer.length&&this._adjustRowsHeight(this.lockedFooter.children("table"),this.footer.find(".k-grid-footer-wrap > table"))},_destroyEditable:function(){var n=this,t=function(){if(n.editable){var t=n.editView?n.editView.element:n._editContainer;t&&(t.off(o+r,"a.k-grid-cancel",n._editCancelClickHandler),t.off(o+r,"a.k-grid-update",n._editUpdateClickHandler));n._detachModelChange();n.editable.destroy();n.editable=null;n._editContainer=null;n._destroyEditView()}};n.editable&&(n._editMode()!=="popup"||n._isMobile?t():n._editContainer.data("kendoWindow").bind("deactivate",t).close());n._actionSheet&&(n._actionSheet.destroy(),n._actionSheet=null)},_destroyEditView:function(){this.editView&&(this.editView.purge(),this.editView=null,this.pane.navigate(""))},_attachModelChange:function(n){var t=this;t._modelChangeHandler=function(n){t._modelChange({field:n.field,model:this})};n.bind("change",t._modelChangeHandler)},_detachModelChange:function(){var n=this,i=n._editContainer,t=n._modelForContainer(i);t&&t.unbind(b,n._modelChangeHandler)},closeCell:function(t){var r=this,f=r._editContainer,s,h,e,o;f&&((s=f.closest("tr").attr(i.attr("uid")),o=r.dataSource.getByUid(s),t&&r.trigger("cancel",{container:f,model:o}))||(f.removeClass("k-edit-cell"),h=u(r.columns)[r.cellIndex(f)],e=f.parent().removeClass("k-grid-edit-row"),r._destroyEditable(),r._displayCell(f,h,o),f.hasClass("k-dirty-cell")&&n('<span class="k-dirty"/>').prependTo(f),r.lockedContent&&ui(e.css("height","")[0],r._relatedRow(e).css("height","")[0])))},_displayCell:function(n,t,r){var u=this,o={storage:{},count:0},h=f({},i.Template,u.options.templateSettings),s=i.template(u._cellTmpl(t,o),h);o.count>0&&(s=e(s,o.storage));n.empty().html(s(r));u.angular("compile",function(){return{elements:n,data:[{dataItem:r}]}})},removeRow:function(n){this._confirmation(n)&&this._removeRow(n)},_removeRow:function(t){var i=this,r,u=i._editMode();u!=="incell"&&i.cancelRow();t=n(t).hide();r=i._modelForContainer(t);r&&!i.trigger(yr,{row:t,model:r})?(i.dataSource.remove(r),(u==="inline"||u==="popup")&&i.dataSource.sync()):u==="incell"&&i._destroyEditable()},_editMode:function(){var t="incell",n=this.options.editable;return n!==!0&&(t=typeof n=="string"?n:n.mode||t),t},editRow:function(t){var s,f=this,h,c;if(t instanceof i.data.ObservableObject?s=t:(t=n(t),s=f._modelForContainer(t)),h=f._editMode(),f.cancelRow(),s&&(f._attachModelChange(s),h==="popup"?f._createPopupEditor(s):h==="inline"?f._createInlineEditor(t,s):h==="incell"&&n(t).children(k).each(function(){var t=n(this),i=u(f.columns)[t.index()];return s=f._modelForContainer(t),s&&(!s.editable||s.editable(i.field))&&i.field?(f.editCell(t),!1):void 0}),c=f.editView?f.editView.element:f._editContainer,c)){this._editCancelClickHandler||(this._editCancelClickHandler=e(this._editCancelClick,this));c.on(o+r,"a.k-grid-cancel",this._editCancelClickHandler);this._editUpdateClickHandler||(this._editUpdateClickHandler=e(this._editUpdateClick,this));c.on(o+r,"a.k-grid-update",this._editUpdateClickHandler)}},_editUpdateClick:function(n){n.preventDefault();n.stopPropagation();this.saveRow()},_editCancelClick:function(t){var i=this,u=i.options.navigatable,f=i.editable.options.model,e=i.editView?i.editView.element:i._editContainer,r;(t.preventDefault(),t.stopPropagation(),i.trigger("cancel",{container:e,model:f}))||(r=i.items().index(n(i.current()).parent()),i.cancelRow(),u&&(i.current(i.items().eq(r).children().filter(ot).first()),a(i.table,!0)))},_createPopupEditor:function(t){var r=this,s="<div "+i.attr("uid")+'="'+t.uid+'" class="k-popup-edit-form'+(r._isMobile?" k-mobile-list":"")+'"><div class="k-edit-form-container">',o,c,ft=[],l,k,d,it,rt,v,g=u(r.columns),y,ut=r.options.editable,w=ut.template,nt=h(ut)?ut.window:{},et=f({},i.Template,r.options.templateSettings),tt,b;if(nt=nt||{},w)for(typeof w===p&&(w=window.unescape(w)),s+=i.template(w,et)(t),l=0,k=g.length;l<k;l++)o=g[l],o.command&&(v=lr(o.command,"edit"),v&&(c=v));else for(l=0,k=g.length;l<k;l++)o=g[l],o.command?o.command&&(v=lr(o.command,"edit"),v&&(c=v)):(s+='<div class="k-edit-label"><label for="'+o.field+'">'+(o.title||o.field||"")+"<\/label><\/div>",(!t.editable||t.editable(o.field))&&o.field?(ft.push({field:o.field,format:o.format,editor:o.editor,values:o.values}),s+="<div "+i.attr("container-for")+'="'+o.field+'" class="k-edit-field"><\/div>'):(tt={storage:{},count:0},d=i.template(r._cellTmpl(o,tt),et),tt.count>0&&(d=e(d,tt.storage)),s+='<div class="k-edit-field">'+d(t)+"<\/div>"));c&&h(c)&&(c.text&&h(c.text)&&(it=c.text.update,rt=c.text.cancel),c.attr&&(y=c.attr));r._isMobile?(s+="<\/div><\/div>",r.editView=r.pane.append("<div data-"+i.ns+'role="view" data-'+i.ns+'init-widgets="false" class="k-grid-edit-form"><div data-'+i.ns+'role="header" class="k-header">'+r._createButton({name:"update",text:it,attr:y})+(nt.title||"Edit")+r._createButton({name:"canceledit",text:rt,attr:y})+"<\/div>"+s+"<\/div>"),b=r._editContainer=r.editView.element.find(".k-popup-edit-form")):(s+='<div class="k-edit-buttons k-state-default">',s+=r._createButton({name:"update",text:it,attr:y})+r._createButton({name:"canceledit",text:rt,attr:y}),s+="<\/div><\/div><\/div>",b=r._editContainer=n(s).appendTo(r.wrapper).eq(0).kendoWindow(f({modal:!0,resizable:!1,draggable:!0,title:"Edit",visible:!1,close:function(i){if(i.userTriggered){if(i.sender.element.focus(),r.trigger("cancel",{container:b,model:t})){i.preventDefault();return}var u=r.items().index(n(r.current()).parent());r.cancelRow();r.options.navigatable&&(r.current(r.items().eq(u).children().filter(ot).first()),a(r.table,!0))}}},nt)));r.editable=r._editContainer.kendoEditable({fields:ft,model:t,clearContainer:!1,target:r}).data("kendoEditable");r._isMobile&&b.find("input[type=checkbox],input[type=radio]").parent(".k-edit-field").addClass("k-check").prev(".k-edit-label").addClass("k-check").click(function(){n(this).next().children("input").click()});r._openPopUpEditor();r.trigger(oi,{container:b,model:t})},_openPopUpEditor:function(){this._isMobile?this.pane.navigate(this.editView,this._editAnimation):this._editContainer.data("kendoWindow").center().open()},_createInlineEditor:function(t,r){var f=this,e,s,o,c=[];f.lockedContent&&(t=t.add(f._relatedRow(t)));t.children(":not(.k-group-cell,.k-hierarchy-cell)").each(function(){if(s=n(this),e=u(f.columns)[f.cellIndex(s)],!e.command&&e.field&&(!r.editable||r.editable(e.field)))c.push({field:e.field,format:e.format,editor:e.editor,values:e.values}),s.attr(i.attr("container-for"),e.field),s.empty();else if(e.command&&(o=lr(e.command,"edit"),o)){s.empty();var l,a,t;h(o)&&(o.text&&h(o.text)&&(l=o.text.update,a=o.text.cancel),o.attr&&(t=o.attr));n(f._createButton({name:"update",text:l,attr:t})+f._createButton({name:"canceledit",text:a,attr:t})).appendTo(s)}});f._editContainer=t;f.editable=new i.ui.Editable(t.addClass("k-grid-edit-row"),{target:f,fields:c,model:r,clearContainer:!1});t.length>1&&(ui(t[0],t[1]),f._applyLockedContainersWidth());f.trigger(oi,{container:t,model:r})},cancelRow:function(){var n=this,t=n._editContainer,r;t&&(r=n._modelForContainer(t),n._destroyEditable(),n.dataSource.cancelChanges(r),n._editMode()!=="popup"?n._displayRow(t):n._displayRow(n.tbody.find("["+i.attr("uid")+"="+r.uid+"]")))},saveRow:function(){var n=this,t=n._editContainer,r=n._modelForContainer(t),i=n.editable;t&&i&&i.end()&&!n.trigger(wi,{container:t,model:r})&&n.dataSource.sync()},_displayRow:function(t){var i=this,f=i._modelForContainer(t),u,r,e,s=t.hasClass("k-state-selected"),o=t.hasClass("k-alt");f&&(i.lockedContent&&(u=n((o?i.lockedAltRowTemplate:i.lockedRowTemplate)(f)),i._relatedRow(t.last()).replaceWith(u)),i.angular("cleanup",function(){return{elements:t.get()}}),r=n((o?i.altRowTemplate:i.rowTemplate)(f)),t.replaceWith(r),i.angular("compile",function(){return{elements:r.get(),data:[{dataItem:f}]}}),s&&i.options.selectable&&i.select(r.add(u)),u&&ui(r[0],u[0]),e=r.next(),e.hasClass("k-detail-row")&&e.is(":visible")&&r.find(".k-hierarchy-cell .k-icon").removeClass("k-plus").addClass("k-minus"))},_showMessage:function(t,r){var u=this;if(!u._isMobile)return window.confirm(t.title);var f=i.template('<ul><li class="km-actionsheet-title">#:title#<\/li><li><a href="\\#" class="k-button k-grid-delete">#:confirmDelete#<\/a><\/li><\/ul>'),e=n(f(t)).appendTo(u.view.element),o=u._actionSheet=new i.mobile.ui.ActionSheet(e,{cancel:t.cancelDelete,cancelTemplate:'<li class="km-actionsheet-cancel"><a class="k-button" href="\\#">#:cancel#<\/a><\/li>',close:function(){this.destroy()},command:function(t){var i=n(t.currentTarget).parent();i.hasClass("km-actionsheet-cancel")||u._removeRow(r)},popup:u._actionSheetPopupOptions});return o.open(r),!1},_confirmation:function(n){var t=this,r=t.options.editable,i=r===!0||typeof r===p?t.options.messages.editable.confirmation:r.confirmation;return i!==!1&&i!=null?(typeof i===pt&&(i=i(t._modelForContainer(n))),t._showMessage({confirmDelete:r.confirmDelete||t.options.messages.editable.confirmDelete,cancelDelete:r.cancelDelete||t.options.messages.editable.cancelDelete,title:i===!0?t.options.messages.editable.confirmation:i},n)):!0},cancelChanges:function(){this.dataSource.cancelChanges()},saveChanges:function(){var n=this;(n.editable&&n.editable.end()||!n.editable)&&!n.trigger(br)&&n.dataSource.sync()},addRow:function(){var n=this,r,t=n.dataSource,f=n._editMode(),s=n.options.editable.createAt||"",e=t.pageSize(),o=t.view()||[];if(n.editable&&n.editable.end()||!n.editable){f!="incell"&&n.cancelRow();r=t.indexOf(o[0]);s.toLowerCase()=="bottom"&&(r+=o.length,e&&!t.options.serverPaging&&e<=o.length&&(r-=1));r<0&&(r=t.page()>t.totalPages()?(t.page()-1)*e:0);var h=t.insert(r,{}),l=h.uid,a=n.lockedContent?n.lockedTable:n.table,u=a.find("tr["+i.attr("uid")+"="+l+"]"),c=u.children("td:not(.k-group-cell,.k-hierarchy-cell)").eq(n._firstEditableColumnIndex(u));f==="inline"&&u.length?n.editRow(u):f==="popup"?n.editRow(h):c.length&&n.editCell(c);s.toLowerCase()=="bottom"&&n.lockedContent&&(n.lockedContent[0].scrollTop=n.content[0].scrollTop=n.content[0].offsetHeight)}},_firstEditableColumnIndex:function(n){for(var f=this,i,e=u(f.columns),r=f._modelForContainer(n),t=0,o=e.length;t<o;t++)if(i=e[t],r&&(!r.editable||r.editable(i.field))&&!i.command&&i.field)return t;return-1},_toolbar:function(){var t=this,h=t.wrapper,u=t.options.toolbar,s=t.options.editable,f;if(u){if(f=t.wrapper.find(".k-grid-toolbar"),f.length||(uf(u)||(u=typeof u===p?u:t._toolbarTmpl(u).replace(si,"\\#"),u=e(i.template(u),t)),f=n('<div class="k-header k-grid-toolbar" />').html(u({})).prependTo(h),t.angular("compile",function(){return{elements:f.get()}})),s&&s.create!==!1)f.on(o+r,".k-grid-add",function(n){n.preventDefault();t.addRow()}).on(o+r,".k-grid-cancel-changes",function(n){n.preventDefault();t.cancelChanges()}).on(o+r,".k-grid-save-changes",function(n){n.preventDefault();t.saveChanges()});f.on(o+r,".k-grid-excel",function(n){n.preventDefault();t.saveAsExcel()});f.on(o+r,".k-grid-pdf",function(n){n.preventDefault();t.saveAsPDF()})}},_toolbarTmpl:function(n){var u=this,t,i,r="";if(et(n))for(t=0,i=n.length;t<i;t++)r+=u._createButton(n[t]);return r},_createButton:function(n){var s=n.template||sf,r=typeof n===p?n:n.name||n.text,c=w[r]?w[r].className:"k-grid-"+(r||"").replace(/\s/g,""),u={className:c,text:r,imageClass:"",attr:"",iconClass:""},o=this.options.messages.commands,e;if(!r&&!(h(n)&&n.template))throw new Error("Custom commands should have name specified");return h(n)?(n.className&&y(u.className,n.className.split(" "))<0?n.className+=" "+u.className:n.className===t&&(n.className=u.className),r==="edit"&&h(n.text)&&(n=f(!0,{},n),n.text=n.text.edit),n.attr&&(h(n.attr)&&(n.attr=ti(n.attr)),typeof n.attr===p&&(e=n.attr.match(/class="(.+?)"/),e&&y(e[1],n.className.split(" "))<0&&(n.className+=" "+e[1]))),u=f(!0,u,w[r],{text:o[r]},n)):u=f(!0,u,w[r],{text:o[r]}),i.template(s)(u)},_hasFooters:function(){return!!this.footerTemplate||!!this.groupFooterTemplate||this.footer&&this.footer.length>0||this.wrapper.find(".k-grid-footer").length>0},_groupable:function(){var t=this;if(t._groupableClickHandler?t.table.add(t.lockedTable).off(o+r,t._groupableClickHandler):t._groupableClickHandler=function(i){var r=n(this),u=r.closest("tr");r.hasClass("k-i-collapse")?t.collapseGroup(u):t.expandGroup(u);i.preventDefault();i.stopPropagation()},t._isLocked())t.lockedTable.on(o+r,".k-grouping-row .k-i-collapse, .k-grouping-row .k-i-expand",t._groupableClickHandler);else t.table.on(o+r,".k-grouping-row .k-i-collapse, .k-grouping-row .k-i-expand",t._groupableClickHandler);t._attachGroupable()},_attachGroupable:function(){var t=this,r=t.wrapper,u=t.options.groupable,e=pi+"["+i.attr("field")+"]",o=t.content?".k-grid-header:first "+e:"table:first>.k-grid-header "+e;u&&u.enabled!==!1&&(r.has("div.k-grouping-header")[0]||n("<div>&nbsp;<\/div>").addClass("k-grouping-header").prependTo(r),t.groupable&&t.groupable.destroy(),t.groupable=new tf(r,f({},u,{draggable:t._draggableInstance,groupContainer:">div.k-grouping-header",dataSource:t.dataSource,draggableElements:o,filter:o,allowDrag:t.options.reorderable})))},_continuousItems:function(t,i){var r;if(this.lockedContent){var u=this,o=u.table.add(u.lockedTable),h=n(t,o[0]),c=n(t,o[1]),f=i?s(u.columns).length:1,l=i?u.columns.length-f:1,e=[];for(r=0;r<h.length;r+=f)vr.apply(e,h.slice(r,r+f)),vr.apply(e,c.splice(0,l));return e}},_selectable:function(){var t=this,s,f,u=[],h=t._isLocked(),o=t.options.selectable,e,c;if(o&&(t.selectable&&t.selectable.destroy(),o=i.ui.Selectable.parseOptions(o),s=o.multiple,f=o.cell,t._hasDetails()&&(u[u.length]=".k-detail-row"),(t.options.groupable||t._hasFooters())&&(u[u.length]=".k-grouping-row,.k-group-footer"),u=u.join(","),u!==""&&(u=":not("+u+")"),e=t.table,h&&(e=e.add(t.lockedTable)),c=">"+(f?ff:"tbody>tr"+u),t.selectable=new i.ui.Selectable(e,{filter:c,aria:!0,multiple:s,change:function(){t.trigger(b)},useAllItems:h&&s&&f,relatedTarget:function(i){var e,r,u,o;if(!f&&h){for(r=n(),u=0,o=i.length;u<o;u++)e=t._relatedRow(i[u]),y(e[0],i)<0&&(r=r.add(e));return r}},continuousItems:function(){return t._continuousItems(c,f)}}),t.options.navigatable))e.on("keydown"+r,function(i){var r=t.current(),u=i.target;if(i.keyCode===v.SPACEBAR&&n.inArray(u,e)>-1&&!r.is(".k-edit-cell,.k-header")&&r.parent().is(":not(.k-grouping-row,.k-detail-row,.k-group-footer)")){if(i.preventDefault(),i.stopPropagation(),r=f?r:r.parent(),h&&!f&&(r=r.add(t._relatedRow(r))),s)if(i.ctrlKey){if(r.hasClass(gr)){r.removeClass(gr);t.trigger(b);return}}else t.selectable.clear();else t.selectable.clear();t.selectable.value(r)}})},_relatedRow:function(t){var r=this.lockedTable,i,u;return(t=n(t),!r)?t:(i=t.closest(this.table.add(this.lockedTable)),u=i.find(">tbody>tr").index(t),i=i[0]===this.table[0]?r:this.table,i.find(">tbody>tr").eq(u))},clearSelection:function(){var n=this;n.selectable.clear();n.trigger(b)},select:function(t){var r=this,i=r.selectable;if(t=n(t),t.length){i.options.multiple||(i.clear(),t=t.first());r._isLocked()&&(t=t.add(t.map(function(){return r._relatedRow(this)})));i.value(t);return}return i.value()},current:function(n){var i=this,f=i.options.scrollable,r=i._current,e=i.table.add(i.thead.parent()),u;return n!==t&&n.length&&(r&&r[0]===n[0]||(r&&(r.removeClass(gt).removeAttr("id"),e.removeAttr("aria-activedescendant")),n.attr("id",i._cellId),i._current=n.addClass(gt),e.attr("aria-activedescendant",i._cellId),n.length&&f&&(u=n.closest("table").parent(),u.is(".k-grid-content")?i._scrollTo(n.parent()[0],i.content[0]):u.is(".k-grid-content-locked")&&(i._scrollTo(i._relatedRow(n.parent())[0],i.content[0]),i.lockedContent[0].scrollTop=i.content[0].scrollTop),u.is(".k-grid-content-locked,.k-grid-header-locked")||(f.virtual?i._scrollTo(n[0],i.content.find(">.k-virtual-scrollable-wrap")[0]):i._scrollTo(n[0],i.content[0]))))),i._current},_removeCurrent:function(){this._current&&(this._current.removeClass(gt),this._current=null)},_scrollTo:function(n,t){var e=n.tagName.toLowerCase(),i=e==="td"||e==="th",r=n[i?"offsetLeft":"offsetTop"],o=n[i?"offsetWidth":"offsetHeight"],u=t[i?"scrollLeft":"scrollTop"],f=t[i?"clientWidth":"clientHeight"],s=r+o,h=0;h=u>r?r:s>u+f?o<=f?s-f:r:u;t[i?"scrollLeft":"scrollTop"]=h},_navigatable:function(){var t=this,f=e(t.current,t),u=t.table.add(t.lockedTable),o=t.thead.parent().add(n(">table",t.lockedHeader)),l=t._isLocked(),s=u,h=i.support.isRtl(t.element);if(t.options.navigatable){t.options.scrollable&&(s=u.add(o),o.attr(yt,-1));s.off("mousedown"+r+" focus"+r+" focusout"+r+" keydown"+r);o.on("keydown"+r,function(n){n.altKey&&n.keyCode==v.DOWN&&(f().find(".k-grid-filter, .k-header-column-menu").click(),n.stopImmediatePropagation())}).find("a.k-link").attr("tabIndex",-1);u.attr(yt,tt.max(u.attr(yt)||0,0)).on("mousedown"+r+" keydown"+r,".k-detail-cell",function(n){n.target!==n.currentTarget&&n.stopImmediatePropagation()});s.on(i.support.touch?"touchstart"+r:"mousedown"+r,ei+">"+ot,e(gf,t)).on("focus"+r,function(){if(!i.support.touch){var t=f();t&&t.is(":visible")?t.addClass(gt):f(n(this).find(vt));u.attr(yt,-1);o.attr(yt,-1);n(this).attr(yt,0)}}).on("focusout"+r,function(){var n=f();n&&n.removeClass(gt)}).on("keydown"+r,function(i){var l=i.keyCode,s=!1,p=!i.isDefaultPrevented()&&!n(i.target).is(":button,a,:input,a>.k-icon"),it=t.options.pageable,b=t.dataSource,w=t._editMode()=="incell",k,g,rt=i.shiftKey,nt=e(t._relatedRow,t),r=f(),tt,d,y;if(r&&r.is("th")&&(p=!0),p&&l==v.UP)f(gu(r,i.currentTarget,u,o,!0)),s=!0;else if(p&&l==v.DOWN)f(gu(r,i.currentTarget,u,o)),s=!0;else if(p&&l==(h?v.RIGHT:v.LEFT))f(te(r,i.currentTarget,u,o,nt)),s=!0;else if(p&&l==(h?v.LEFT:v.RIGHT))f(ie(r,i.currentTarget,u,o,nt)),s=!0;else if(p&&it&&v.PAGEDOWN==l)b.page(b.page()+1),s=!0;else if(p&&it&&v.PAGEUP==l)b.page(b.page()-1),s=!0;else if(l==v.ENTER||v.F2==l){if(r=r?r:u.find(vt),!r.length)return;n(i.target).is("table")||n.contains(r[0],i.target)||(r=n(i.target).closest("[role=gridcell]"));r.is("th")?(r.find(".k-link").click(),s=!0):r.parent().is(".k-master-row,.k-grouping-row")?(r.parent().find(".k-icon:first").click(),s=!0):(tt=r.find(":kendoFocusable:first"),!r.hasClass("k-edit-cell")&&tt[0]&&r.hasClass("k-state-focused")?(tt.focus(),s=!0):t.options.editable&&!n(i.target).is(":button,.k-button,textarea")&&(d=n(i.target).closest("[role=gridcell]"),d[0]||(d=r),t._handleEditing(d,!1,w?i.currentTarget:u[0]),s=!0))}else v.ESC==l?(k=at(),r&&n.contains(r[0],k)&&!r.hasClass("k-edit-cell")&&!r.parent().hasClass("k-grid-edit-row")?(a(i.currentTarget,!0),s=!0):t._editContainer&&(!r||t._editContainer.has(r[0])||r[0]===t._editContainer[0])&&(w?t.closeCell(!0):(g=n(r).parent().index(),k&&k.blur(),t.cancelRow(),g>=0&&t.current(u.find(">tbody>tr").eq(g).children().filter(ot).first())),c.msie&&c.version<9&&document.body.focus(),a(w?i.currentTarget:u[0],!0),s=!0)):v.TAB==l&&(r=n(r),t.options.editable&&w&&(y=n(at()).closest(".k-edit-cell"),y[0]&&y[0]!==r[0]&&(r=y)),y=re(r,i.currentTarget,u,nt,rt),!r.is("th")&&y.length&&t.options.editable&&w&&(t._handleEditing(r,y,y.closest(u)),s=!0));s&&(i.preventDefault(),i.stopPropagation())})}},_handleEditing:function(t,i,r){var u=this,f=n(at()),e=u._editMode(),l=c.msie,v=l&&c.version<9,o=u._editContainer,s,h;if(r=n(r),h=e=="incell"?t.hasClass("k-edit-cell"):t.parent().hasClass("k-grid-edit-row"),u.editable){if(n.contains(o[0],f[0])&&(c.opera||v?f.change().triggerHandler("blur"):(f.blur(),l&&f.blur())),!u.editable){a(r);return}if(u.editable.end())e=="incell"?u.closeCell():(u.saveRow(),h=!0);else{e=="incell"?u.current(o):u.current(o.children().filter(k).first());s=o.find(":kendoFocusable:first")[0];s&&s.focus();return}}i&&u.current(i);v&&document.body.focus();a(r,!0);(h||i)&&!i||(e=="incell"?u.editCell(u.current()):u.editRow(u.current().parent()))},_wrapper:function(){var n=this,r=n.table,i=n.options.height,t=n.element;t.is("div")||(t=t.wrap("<div/>").parent());n.wrapper=t.addClass("k-grid k-widget");i&&(n.wrapper.css(nr,i),r.css(nr,"auto"));n._initMobile()},_initMobile:function(){var r=this.options,t=this,u;this._isMobile=r.mobile===!0&&i.support.mobileOS||r.mobile==="phone"||r.mobile==="tablet";this._isMobile&&(u=this.wrapper.addClass("k-grid-mobile").wrap("<div data-"+i.ns+'role="view" data-'+i.ns+'init-widgets="false"><\/div>').parent(),this.pane=i.mobile.ui.Pane.wrap(u),this.view=this.pane.view(),this._actionSheetPopupOptions=n(document.documentElement).hasClass("km-root")?{modal:!1}:{align:"bottom center",position:"bottom center",effect:"slideIn:up"},r.height&&this.pane.element.parent().css(nr,r.height),this._editAnimation="slide",this.view.bind("show",function(){t._isLocked()&&(t._updateTablesWidth(),t._applyLockedContainersWidth(),t._syncLockedContentHeight(),t._syncLockedHeaderHeight(),t._syncLockedFooterHeight())}))},_tbody:function(){var i=this,r=i.table,t;t=r.find(">tbody");t.length||(t=n("<tbody/>").appendTo(r));i.tbody=t.attr("role","rowgroup")},_scrollable:function(){var t=this,f,o,l=t.options,e=l.scrollable,h=e!==!0&&e.virtual&&!t.virtualScrollable,c=!i.support.kineticScrollNeeded||h?i.support.scrollbar():0,s,u;if(e)if(f=t.wrapper.children(".k-grid-header"),f[0]||(f=n('<div class="k-grid-header" />').insertBefore(t.table)),f.css(st?"padding-left":"padding-right",e.virtual?c+1:c),o=n('<table role="grid" />'),ni&&o.attr("cellspacing",0),o.append(t.thead),f.empty().append(n('<div class="k-grid-header-wrap" />').append(o)),t.content=t.table.parent(),t.content.is(".k-virtual-scrollable-wrap, .km-scroll-container")&&(t.content=t.content.parent()),t.content.is(".k-grid-content, .k-virtual-scrollable-wrap")||(t.content=t.table.wrap('<div class="k-grid-content" />').parent()),h&&(t.virtualScrollable=new fu(t.content,{dataSource:t.dataSource,itemHeight:function(){return t._averageRowHeight()}})),t.scrollables=f.children(".k-grid-header-wrap"),s=t.wrapper.find(".k-grid-footer"),s.length&&(t.scrollables=t.scrollables.add(s.children(".k-grid-footer-wrap"))),e.virtual)t.content.find(">.k-virtual-scrollable-wrap").unbind("scroll"+r).bind("scroll"+r,function(){t.scrollables.scrollLeft(this.scrollLeft);t.lockedContent&&(t.lockedContent[0].scrollTop=this.scrollTop)});else if(t.content.unbind("scroll"+r).bind("scroll"+r,function(){t.scrollables.scrollLeft(this.scrollLeft);t.lockedContent&&(t.lockedContent[0].scrollTop=this.scrollTop)}),u=t.content.data("kendoTouchScroller"),u&&u.destroy(),u=i.touchScroller(t.content),u&&u.movable){t.touchScroller=u;u.movable.bind("change",function(n){t.scrollables.scrollLeft(-n.sender.x);t.lockedContent&&t.lockedContent.scrollTop(-n.sender.y)});t.one(gi,function(n){n.sender.wrapper.addClass("k-grid-backface")})}},_setContentWidth:function(){var t=this,u="k-grid-content-expander",f='<div class="'+u+'"><\/div>',r=t.resizable,i;t.options.scrollable&&t.wrapper.is(":visible")&&(i=t.table.parent().children("."+u),t._setContentWidthHandler=e(t._setContentWidth,t),t.dataSource&&t.dataSource.view().length?i[0]&&(i.remove(),r&&r.unbind("resize",t._setContentWidthHandler)):(i[0]||(i=n(f).appendTo(t.table.parent()),r&&r.bind("resize",t._setContentWidthHandler)),t.thead&&i.width(t.thead.width())),t._applyLockedContainersWidth())},_applyLockedContainersWidth:function(){if(this.options.scrollable&&this.lockedHeader){var r=this.thead.parent(),u=r.parent(),t=this.wrapper[0].clientWidth,e=this._groups(),o=i.support.scrollbar(),h=this.lockedHeader.find(">table>colgroup>col:not(.k-group-col, .k-hierarchy-col)"),c=r.find(">colgroup>col:not(.k-group-col, .k-hierarchy-col)"),n=lu(h),s=lu(c),f;e>0&&(n+=this.lockedHeader.find(".k-group-cell:first").outerWidth()*e);n>=t&&(n=t-3*o);this.lockedHeader.add(this.lockedContent).width(n);u[0].style.width=u.parent().width()-n-2+"px";r.add(this.table).width(s);this.virtualScrollable&&(t-=o);this.content[0].style.width=t-n-2+"px";this.lockedFooter&&this.lockedFooter.length&&(this.lockedFooter.width(n),f=this.footer.find(".k-grid-footer-wrap"),f[0].style.width=u[0].clientWidth+"px",f.children().first().width(s))}},_setContentHeight:function(){var n=this,u=n.options,t=n.wrapper.innerHeight(),e=n.wrapper.children(".k-grid-header"),r=i.support.scrollbar(),f;u.scrollable&&n.wrapper.is(":visible")&&(t-=e.outerHeight(),n.pager&&(t-=n.pager.element.outerHeight()),u.groupable&&(t-=n.wrapper.children(".k-grouping-header").outerHeight()),u.toolbar&&(t-=n.wrapper.children(".k-grid-toolbar").outerHeight()),n.footerTemplate&&(t-=n.wrapper.children(".k-grid-footer").outerHeight()),f=function(n){var t,i;return n[0].style.height?!0:(t=n.height(),n.height("auto"),i=n.height(),t!=i)?(n.height(""),!0):(n.height(""),!1)},f(n.wrapper)&&(t>r*2?(n.lockedContent&&(r=n.table[0].offsetWidth>n.table.parent()[0].clientWidth?r:0,n.lockedContent.height(t-r)),n.content.height(t)):n.content.height(r*2+1)))},_averageRowHeight:function(){var n=this,i=n._items(n.tbody).length,t=n._rowHeight,r;return i===0?t:(n._rowHeight||(n._rowHeight=t=n.table.outerHeight()/i,n._sum=t,n._measures=1),r=n.table.outerHeight()/i,t!==r&&(n._measures++,n._sum+=r,n._rowHeight=n._sum/n._measures),t)},_dataSource:function(){var n=this,u=n.options,r,i=u.dataSource;i=et(i)?{data:i}:i;h(i)&&(f(i,{table:n.table,fields:n.columns}),r=u.pageable,h(r)&&r.pageSize!==t&&(i.pageSize=r.pageSize));n.dataSource&&n._refreshHandler?n.dataSource.unbind(b,n._refreshHandler).unbind(vi,n._progressHandler).unbind(yi,n._errorHandler):(n._refreshHandler=e(n.refresh,n),n._progressHandler=e(n._requestStart,n),n._errorHandler=e(n._error,n));n.dataSource=ar.create(i).bind(b,n._refreshHandler).bind(vi,n._progressHandler).bind(yi,n._errorHandler)},_error:function(){this._progress(!1)},_requestStart:function(){this._progress(!0)},_modelChange:function(t){var r=this,p=r.tbody,c=t.model,e=r.tbody.find("tr["+i.attr("uid")+"="+c.uid+"]"),o,s,l,w=e.hasClass("k-alt"),f,h=r._items(p).index(e),v=r.lockedContent,y,a,b,k,d;if(v&&(o=r._relatedRow(e)),e.add(o).children(".k-edit-cell").length&&!r.options.rowTemplate)e.add(o).children(":not(.k-group-cell,.k-hierarchy-cell)").each(function(){s=n(this);l=u(r.columns)[r.cellIndex(s)];l.field===t.field&&(s.hasClass("k-edit-cell")?s.addClass("k-dirty-cell"):(r._displayCell(s,l,c),n('<span class="k-dirty"/>').prependTo(s)))});else if(!e.hasClass("k-grid-edit-row")){for(a=n().add(e),v&&(f=(w?r.lockedAltRowTemplate:r.lockedRowTemplate)(c),a=a.add(o),o.replaceWith(f)),f=(w?r.altRowTemplate:r.rowTemplate)(c),e.replaceWith(f),f=r._items(p).eq(h),v&&(e=e.add(o),o=r._relatedRow(f)[0],ui(f[0],o),f=f.add(o)),y=r.options.selectable,y&&e.hasClass("k-state-selected")&&r.select(f),k=a.children(":not(.k-group-cell,.k-hierarchy-cell)"),b=f.children(":not(.k-group-cell,.k-hierarchy-cell)"),h=0,d=r.columns.length;h<d;h++)l=r.columns[h],s=b.eq(h),y&&k.eq(h).hasClass("k-state-selected")&&s.addClass("k-state-selected"),l.field===t.field&&n('<span class="k-dirty"/>').prependTo(s);r.trigger("itemChange",{item:f,data:c,ns:lt})}},_pageable:function(){var t=this,u,r=t.options.pageable;r&&(u=t.wrapper.children("div.k-grid-pager"),u.length||(u=n('<div class="k-pager-wrap k-grid-pager"/>').appendTo(t.wrapper)),t.pager&&t.pager.destroy(),t.pager=typeof r=="object"&&r instanceof i.ui.Pager?r:new i.ui.Pager(u,f({},r,{dataSource:t.dataSource})))},_footer:function(){var t=this,r=t.dataSource.aggregates(),u="",h=t.footerTemplate,f=t.options,e,i=t.footer||t.wrapper.find(".k-grid-footer"),o,s,c;h?(r=fi(r)?ir(t.dataSource.aggregate()):r,u=n(t._wrapFooter(h(r))),i.length?(o=u,t.angular("cleanup",function(){return{elements:i.get()}}),i.replaceWith(o),i=t.footer=o):i=f.scrollable?t.footer=f.pageable?u.insertBefore(t.wrapper.children("div.k-grid-pager")):u.appendTo(t.wrapper):t.footer=u.insertBefore(t.tbody),t.angular("compile",function(){return{elements:i.find("td").get(),data:dt(t.columns,function(n){return{column:n,aggregate:r[n.field]}})}})):i&&!t.footer&&(t.footer=i);i.length&&(f.scrollable&&(e=i.attr("tabindex",-1).children(".k-grid-footer-wrap"),t.scrollables=t.scrollables.filter(function(){return!n(this).is(".k-grid-footer-wrap")}).add(e)),t._footerWidth&&i.find("table").css("width",t._footerWidth),e&&(s=t.content.scrollLeft(),c=f.scrollable!==!0&&f.scrollable.virtual&&!t.virtualScrollable,c&&(s=t.wrapper.find(".k-virtual-scrollable-wrap").scrollLeft()),e.scrollLeft(s)));t.lockedContent&&(t._appendLockedColumnFooter(),t._applyLockedContainersWidth(),t._syncLockedFooterHeight())},_wrapFooter:function(t){var u=this,r="",f=i.support.mobileOS?0:i.support.scrollbar();return u.options.scrollable?(r=n('<div class="k-grid-footer"><div class="k-grid-footer-wrap"><table'+(ni?' cellspacing="0"':"")+"><tbody>"+t+"<\/tbody><\/table><\/div><\/div>"),u._appendCols(r.find("table")),r.css(st?"padding-left":"padding-right",f),r):'<tfoot class="k-grid-footer">'+t+"<\/tfoot>"},_columnMenu:function(){var n=this,v,w=u(n.columns),r,o=n.options,e=o.columnMenu,y,b,k,p,tt=l(n.columns,function(n){return n.columns!==t}).length>0,it=this._isMobile,rt=function(t){n.trigger(wr,{field:t.field,container:t.container})},ut=function(n){a(n.closest("table"),!0)},d=o.$angular,h,g,c;if(e)for(typeof e=="boolean"&&(e={}),p=nt(n.thead),h=0,g=p.length;h<g;h++)r=w[h],c=p.eq(h),!r.command&&(r.field||c.attr("data-"+i.ns+"field"))&&(v=c.data("kendoColumnMenu"),v&&v.destroy(),b=r.sortable!==!1&&e.sortable!==!1&&o.sortable!==!1?f({},o.sortable,{compare:(r.sortable||{}).compare}):!1,k=o.filterable&&r.filterable!==!1&&e.filterable!==!1?f({pane:n.pane},r.filterable,o.filterable):!1,y={dataSource:n.dataSource,values:r.values,columns:e.columns,sortable:b,filterable:k,messages:e.messages,owner:n,closeCallback:ut,init:rt,pane:n.pane,filter:it?":not(.k-column-active)":"",lockedColumns:!tt&&r.lockable!==!1&&s(w).length>0},d&&(y.$angular=d),c.kendoColumnMenu(y))},_headerCells:function(){return this.thead.find("th").filter(function(){var t=n(this);return!t.hasClass("k-group-cell")&&!t.hasClass("k-hierarchy-cell")})},_filterable:function(){var t=this,e=u(t.columns),h,c,s,y=function(n){t.trigger(pr,{field:n.field,container:n.container})},w=function(n){a(n.closest("table"),!0)},r=t.options.filterable,n,v,o,l;if(r&&typeof r.mode==p&&r.mode.indexOf("menu")==-1&&(r=!1),r&&!t.options.columnMenu)for(c=nt(t.thead),n=0,v=c.length;n<v;n++)s=c.eq(n),e[n].filterable!==!1&&!e[n].command&&(e[n].field||s.attr("data-"+i.ns+"field"))&&(h=s.data("kendoFilterMenu"),h&&h.destroy(),o=e[n].filterable,l=f({},r,o,{dataSource:t.dataSource,values:e[n].values,closeCallback:w,init:y,pane:t.pane}),o&&o.messages&&(l.messages=f(!0,{},r.messages,o.messages)),s.kendoFilterMenu(l))},_filterRow:function(){var e=this,h,t,l;if(e._hasFilterRow()){var a=u(e.columns),p=e.options.filterable,w=e.thead.find(".k-filter-row");for(this._updateHeader(this.dataSource.group().length),h=0;h<a.length;h++){var o,r=a[h],v=e.options.filterable.operators,y=!1,s=n("<th/>"),c=r.field;if(r.hidden&&s.hide(),w.append(s),c&&r.filterable!==!1){if(t=r.filterable&&r.filterable.cell||{},o=e.options.dataSource,o instanceof ar&&(o=e.options.dataSource.options),l=f(!0,{},p.messages),r.filterable&&f(!0,l,r.filterable.messages),t.enabled===!1){s.html("&nbsp;");continue}t.dataSource&&(o=t.dataSource,y=!0);r.filterable&&r.filterable.operators&&(v=r.filterable.operators);n("<span/>").attr(i.attr("field"),c).kendoFilterCell({dataSource:e.dataSource,suggestDataSource:o,customDataSource:y,field:c,messages:l,values:r.values,template:t.template,delay:t.delay,inputWidth:t.inputWidth,suggestionOperator:t.suggestionOperator,minLength:t.minLength,dataTextField:t.dataTextField,operator:t.operator,operators:v,showOperators:t.showOperators}).appendTo(s)}else s.html("&nbsp;")}}},_sortable:function(){var r=this,l=u(r.columns),n,o,s,h=r.options.sortable,e,t,c;if(h){for(e=nt(r.thead),t=0,c=e.length;t<c;t++)n=l[t],n.sortable!==!1&&!n.command&&n.field&&(s=e.eq(t),o=s.data("kendoColumnSorter"),o&&o.destroy(),s.attr("data-"+i.ns+"field",n.field).kendoColumnSorter(f({},h,n.sortable,{dataSource:r.dataSource,aria:!0,filter:":not(.k-column-active)"})));e=null}},_columns:function(t){var r=this,f=r.table,e,c=f.find("col"),u,o=r.options.dataSource,h;if(t=t.length?t:dt(f.find("th"),function(t,r){t=n(t);var f=t.attr(i.attr("sortable")),e=t.attr(i.attr("filterable")),o=t.attr(i.attr("type")),s=t.attr(i.attr("groupable")),u=t.attr(i.attr("field")),h=t.attr(i.attr("menu"));return u||(u=t.text().replace(/\s|[^A-z0-9]/g,"")),{field:u,type:o,sortable:f!=="false",filterable:e!=="false",groupable:s!=="false",menu:h,template:t.attr(i.attr("template")),width:c.eq(r).css("width")}}),e=!(r.table.find("tbody tr").length>0&&(!o||!o.transport)),r.options.scrollable){if(h=t,u=s(t),t=rt(t),u.length>0&&t.length===0)throw new Error("There should be at least one non locked columns");bf(r.element.find("tr:has(th):first").find("th:not(.k-group-cell)"),h);t=u.concat(t)}r.columns=eu(t,e)},_groups:function(){var n=this.dataSource.group();return n?n.length:0},_tmpl:function(n,t,r,u){var o=this,a=f({},i.Template,o.options.templateSettings),s,v=t.length,y,l={storage:{},count:0},h,b,p=o._hasDetails(),c=[],w=o._groups();if(!n){for(n="<tr",r&&c.push("k-alt"),p&&c.push("k-master-row"),c.length&&(n+=' class="'+c.join(" ")+'"'),v&&(n+=" "+i.attr("uid")+'="#='+i.expr("uid",a.paramName)+'#"'),n+=" role='row'>",w>0&&!u&&(n+=ci(w)),p&&(n+='<td class="k-hierarchy-cell"><a class="k-icon k-plus" href="\\#" tabindex="-1"><\/a><\/td>'),s=0;s<v;s++)h=t[s],y=h.template,b=typeof y,n+="<td"+ti(h.attributes)+" role='gridcell'>",n+=o._cellTmpl(h,l),n+="<\/td>";n+="<\/tr>"}return(n=i.template(n,a),l.count>0)?e(n,l.storage):n},_headerCellText:function(n){var e=this,o=f({},i.Template,e.options.templateSettings),t=n.headerTemplate,u=typeof t,r=n.title||n.field||"";return u===pt?r=i.template(t,o)({}):u===p&&(r=t),r},_cellTmpl:function(n,t){var s=this,v=f({},i.Template,s.options.templateSettings),c=n.template,l=v.paramName,u=n.field,r="",o,y,a=n.format,w=typeof c,e=n.values;if(n.command){if(et(n.command)){for(o=0,y=n.command.length;o<y;o++)r+=s._createButton(n.command[o]);return r.replace(si,"\\#")}return s._createButton(n.command).replace(si,"\\#")}return w===pt?(t.storage["tmpl"+t.count]=c,r+="#=this.tmpl"+t.count+"("+l+")#",t.count++):w===p?r+=c:e&&e.length&&h(e[0])&&"value"in e[0]&&u?(r+="#var v ="+i.stringify(pu(e)).replace(si,"\\#")+"#",r+="#var f = v[",v.useWithBlock||(r+=l+"."),r+=u+"]#",r+="${f != null ? f : ''}"):(r+=n.encoded?"#:":"#=",a&&(r+='kendo.format("'+a.replace(ef,"\\$1")+'",'),u?(u=i.expr(u,l),r+=u+"==null?'':"+u):r+="''",a&&(r+=")"),r+="#"),r},_templates:function(){var t=this,i=t.options,h=t.dataSource,c=h.group(),a=t.footer||t.wrapper.find(".k-grid-footer"),r=h.aggregate(),o=u(t.columns),f=u(s(t.columns)),e=i.scrollable?u(rt(t.columns)):o;if(i.scrollable&&f.length){if(i.rowTemplate||i.altRowTemplate)throw new Error("Having both row template and locked columns is not supported");t.rowTemplate=t._tmpl(i.rowTemplate,e,!1,!0);t.altRowTemplate=t._tmpl(i.altRowTemplate||i.rowTemplate,e,!0,!0);t.lockedRowTemplate=t._tmpl(i.rowTemplate,f);t.lockedAltRowTemplate=t._tmpl(i.altRowTemplate||i.rowTemplate,f,!0)}else t.rowTemplate=t._tmpl(i.rowTemplate,e),t.altRowTemplate=t._tmpl(i.altRowTemplate||i.rowTemplate,e,!0);t._hasDetails()&&(t.detailTemplate=t._detailTmpl(i.detailTemplate||""));(!t._group||fi(r))&&(fi(r)||a.length)&&!l(o,function(n){return n.footerTemplate}).length||(t.footerTemplate=t._footerTmpl(o,r,"footerTemplate","k-footer-template"));c&&l(o,function(n){return n.groupFooterTemplate}).length&&(r=n.map(c,function(n){return n.aggregates}),t.groupFooterTemplate=t._footerTmpl(e,r,"groupFooterTemplate","k-group-footer",f.length),i.scrollable&&f.length&&(t.lockedGroupFooterTemplate=t._footerTmpl(f,r,"groupFooterTemplate","k-group-footer")))},_footerTmpl:function(n,t,r,u,o){var v=this,y=f({},i.Template,v.options.templateSettings),p=y.paramName,s="",l,w,h,b,k={},a=0,d={},g=v._groups(),nt=ir(t),c;for(s+='<tr class="'+u+'">',g>0&&!o&&(s+=ci(g)),v._hasDetails()&&(s+='<td class="k-hierarchy-cell">&nbsp;<\/td>'),l=0,w=n.length;l<w;l++)c=n[l],h=c[r],b=typeof h,s+="<td"+ti(c.footerAttributes)+">",h?(b!==pt&&(d=nt[c.field]?f({},y,{paramName:p+"['"+c.field+"']"}):{},h=i.template(h,d)),k["tmpl"+a]=h,s+="#=this.tmpl"+a+"("+p+")#",a++):s+="&nbsp;",s+="<\/td>";return(s+="<\/tr>",s=i.template(s,y),a>0)?e(s,k):s},_detailTmpl:function(n){var o=this,t="",s=f({},i.Template,o.options.templateSettings),a=s.paramName,h={},r=0,c=o._groups(),l=g(u(o.columns)).length,v=typeof n;return(t+='<tr class="k-detail-row">',c>0&&(t+=ci(c)),t+='<td class="k-hierarchy-cell"><\/td><td class="k-detail-cell"'+(l?' colspan="'+l+'"':"")+">",v===pt?(h["tmpl"+r]=n,t+="#=this.tmpl"+r+"("+a+")#",r++):t+=n,t+="<\/td><\/tr>",t=i.template(t,s),r>0)?e(t,h):t},_hasDetails:function(){var n=this;return n.options.detailTemplate!==null||(n._events[bi]||[]).length},_hasFilterRow:function(){var t=this.options.filterable,r=t&&typeof t.mode==p&&t.mode.indexOf("row")!=-1,i=this.columns,u=n.grep(i,function(n){return n.filterable===!1});return i.length&&u.length==i.length&&(r=!1),r},_details:function(){var t=this;if(t.options.scrollable&&t._hasDetails()&&s(t.columns).length)throw new Error("Having both detail template and locked columns is not supported");t.table.on(o+r,".k-hierarchy-cell .k-plus, .k-hierarchy-cell .k-minus",function(i){var o=n(this),f=o.hasClass("k-plus"),u=o.closest("tr.k-master-row"),r,s=t.detailTemplate,e,h=t._hasDetails();return o.toggleClass("k-plus",!f).toggleClass("k-minus",f),r=u.next(),h&&!r.hasClass("k-detail-row")&&(e=t.dataItem(u),r=n(s(e)).addClass(u.hasClass("k-alt")?"k-alt":"").insertAfter(u),t.angular("compile",function(){return{elements:r.get(),data:[{dataItem:e}]}}),t.trigger(bi,{masterRow:u,detailRow:r,data:e,detailCell:r.find(".k-detail-cell")})),t.trigger(f?kr:dr,{masterRow:u,detailRow:r}),r.toggle(f),t._current&&t._current.attr("aria-expanded",f),i.preventDefault(),!1})},dataItem:function(t){if(t=n(t)[0],!t)return null;for(var f=this.tbody.children(),u=t.sectionRowIndex,r=u,i=0;i<u;i++)/k-grouping-row|k-detail-row|k-group-footer/.test(f[i].className)&&r--;return this._data[r]},expandRow:function(t){n(t).find("> td .k-plus, > td .k-i-expand").click()},collapseRow:function(t){n(t).find("> td .k-minus, > td .k-i-collapse").click()},_createHeaderCells:function(n,r){for(var c=this,f,h,e="",a=u(c.columns),s,o=0,l=n.length;o<l;o++)f=n[o].column||n[o],h=c._headerCellText(f),s=y(f,a),f.command?(e+="<th"+ti(f.headerAttributes),r&&!n[o].colSpan&&(e+=" rowspan='"+r+"'"),s>-1&&(e+=i.attr("index")+"='"+s+"'"),e+=">"+h+"<\/th>"):(e+="<th role='columnheader' "+i.attr("field")+"='"+(f.field||"")+"' ",r&&!n[o].colSpan&&(e+=" rowspan='"+r+"'"),n[o].colSpan>1&&(e+='colspan="'+(n[o].colSpan-bt(f.columns))+'" ',e+=i.attr("colspan")+"='"+n[o].colSpan+"'"),f.title&&(e+=i.attr("title")+'="'+f.title.replace(/'/g,"'")+'" '),f.groupable!==t&&(e+=i.attr("groupable")+"='"+f.groupable+"' "),f.aggregates&&f.aggregates.length&&(e+=i.attr("aggregates")+"='"+f.aggregates+"'"),s>-1&&(e+=i.attr("index")+"='"+s+"'"),e+=ti(f.headerAttributes),e+=">"+h+"<\/th>");return e},_appendLockedColumnContent:function(){for(var i=this.columns,o=this.table.find("colgroup"),a=o.find("col:not(.k-group-col,.k-hierarchy-col)"),s=n(),c=0,f,r,e,l=0,t=0,h=i.length;t<h;t++)if(i[t].locked)if(it(i[t])){for(r=1,i[t].columns&&(r=u(i[t].columns).length-bt(i[t].columns)),r=r||1,e=0;e<r;e++)s=s.add(a.eq(t+l+e-c));l+=r-1}else c++;f=n('<div class="k-grid-content-locked"><table'+(ni?' cellspacing="0"':"")+"><colgroup/><tbody><\/tbody><\/table><\/div>");o.detach();f.find("colgroup").append(s);o.insertBefore(this.table.find("tbody"));this.lockedContent=f.insertBefore(this.content);this.lockedTable=f.children("table")},_appendLockedColumnFooter:function(){var i=this,o=i.footer,c=o.find(".k-footer-template>td"),l=o.find(".k-grid-footer-wrap>table>colgroup>col"),h=n('<div class="k-grid-footer-locked"><table><colgroup /><tbody><tr class="k-footer-template"><\/tr><\/tbody><\/table><\/div>'),t,e,a=i._groups(),r=n(),f=n();for(r=r.add(c.filter(".k-group-cell")),t=0,e=u(s(i.columns)).length;t<e;t++)r=r.add(c.eq(t+a));for(f=f.add(l.filter(".k-group-col")),t=0,e=u(sr(i.columns)).length;t<e;t++)f=f.add(l.eq(t+a));r.appendTo(h.find("tr"));f.appendTo(h.find("colgroup"));i.lockedFooter=h.prependTo(o)},_appendLockedColumnHeader:function(t){var f=this,r=this.columns,i,c,l,a,g,nt,e,tt,rt,o=[],p=0,w=n(),ot=f._hasFilterRow(),ut=0,b=n(),ft,s=0,et=n(),k,h,v,y,d;for(a=f.thead.prev().find("col:not(.k-group-col,.k-hierarchy-col)"),tt=f.thead.find("tr:first .k-header:not(.k-group-cell,.k-hierarchy-cell)"),rt=f.thead.find(".k-filter-row").find("th:not(.k-group-cell,.k-hierarchy-cell)"),k=0,i=0,l=r.length;i<l;i++){if(r[i].locked){if(ft=tt.eq(i),s=u(r[i].columns||[]).length,it(r[i])){for(r[i].columns&&(h=s-bt(r[i].columns)),h=h||1,v=0;v<h;v++)w=w.add(a.eq(i+k+v-p));k+=h-1}for(au([r[i]],hr(ft),o,0,0),s=s||1,y=0;y<s;y++)b=b.add(rt.eq(ut+y));ut+=s}r[i].columns&&(p+=bt(r[i].columns));it(r[i])||p++}if(o.length){for(c='<div class="k-grid-header-locked" style="width:1px"><table'+(ni?' cellspacing="0"':"")+"><colgroup/><thead>",c+=new Array(o.length+1).join("<tr><\/tr>"),c+=(ot?'<tr class="k-filter-row" />':"")+"<\/thead><\/table><\/div>",e=n(c),a=e.find("colgroup"),a.append(f.thead.prev().find("col.k-group-col").add(w)),g=e.find("thead tr:not(.k-filter-row)"),i=0,l=o.length;i<l;i++)et=lf(o[i]),g.eq(i).append(f.thead.find("tr:eq("+i+") .k-group-cell").add(et));d=or(this.thead);o.length<d&&vf(e,d);nt=e.find(".k-filter-row");nt.append(f.thead.find(".k-filter-row .k-group-cell").add(b));this.lockedHeader=e.prependTo(t);this._syncLockedHeaderHeight()}},_removeLockedContainers:function(){var n=this.lockedHeader.add(this.lockedContent).add(this.lockedFooter);i.destroy(n);n.off(r).remove();this.lockedHeader=this.lockedContent=this.lockedFooter=null;this.selectable=null},_thead:function(){var t=this,c=t.columns,l=t._hasDetails()&&c.length,v=t._hasFilterRow(),o,u="",f=t.table.find(">thead"),y=t.element.find("thead:first").length>0,i,h,a;if(f.length||(f=n("<thead/>").insertBefore(t.tbody)),t.lockedHeader&&t.thead?(i=t.thead.find("tr:has(th):not(.k-filter-row)").html(""),t._removeLockedContainers()):i=y?t.element.find("thead:first tr:has(th):not(.k-filter-row)"):t.element.find("tr:has(th):first"),!i.length&&(i=f.children().first(),!i.length)){for(h=[{rowSpan:1,cells:[],index:0}],t._prepareColumns(h,c),o=0;o<h.length;o++)u+="<tr>",l&&(u+='<th class="k-hierarchy-cell">&nbsp;<\/th>'),u+=t._createHeaderCells(h[o].cells,h[o].rowSpan),u+="<\/tr>";i=n(u)}v&&(a=n("<tr/>"),a.addClass("k-filter-row"),l&&a.prepend('<th class="k-hierarchy-cell">&nbsp;<\/th>'),f.append(a));i.children().length?l&&!i.find(".k-hierarchy-cell")[0]&&i.prepend('<th class="k-hierarchy-cell">&nbsp;<\/th>'):(u="",l&&(u+='<th class="k-hierarchy-cell">&nbsp;<\/th>'),u+=t._createHeaderCells(c),i.html(u));i.attr("role","row").find("th").addClass("k-header");t.options.scrollable||f.addClass("k-grid-header");i.find("script").remove().end().prependTo(f);t.thead&&t._destroyColumnAttachments();this.angular("cleanup",function(){return{elements:f.find("th").get()}});this.angular("compile",function(){return{elements:f.find("th").get(),data:dt(c,function(n){return{column:n}})}});t.thead=f.attr("role","rowgroup");t._sortable();t._filterable();t._filterRow();t._scrollable();t._updateCols();t._columnMenu();this.options.scrollable&&s(this.columns).length&&(t._appendLockedColumnHeader(t.thead.closest(".k-grid-header")),t._appendLockedColumnContent(),t.lockedContent.bind("DOMMouseScroll"+r+" mousewheel"+r,e(t._wheelScroll,t)),t._applyLockedContainersWidth());t._updateFirstColumnClass();t._resizable();t._draggable();t._reorderable();t.groupable&&t._attachGroupable()},_updateFirstColumnClass:function(){var i=this,t=i.columns||[],f=i._hasDetails()&&t.length,r,u;f||i._groups()||(r=n(),u=i.thead.find(">tr:not(.k-filter-row):not(:first)"),t=rt(t),u.length&&t[0]&&!t[0].columns&&(r=r.add(u)),i._isLocked()&&(u=i.lockedHeader.find("thead>tr:not(.k-filter-row):not(:first)"),t=s(i.columns),u.length&&t[0]&&!t[0].columns&&(r=r.add(u))),r.each(function(){var t=n(this).find("th");t.removeClass("k-first");t.eq(0).addClass("k-first")}))},_prepareColumns:function(n,t,i,r){for(var f,e=r||n[n.length-1],o=n[e.index+1],s=0,u=0;u<t.length;u++)f={column:t[u],colSpan:0},e.cells.push(f),t[u].columns&&t[u].columns.length&&(o||(o={rowSpan:0,cells:[],index:n.length},n.push(o)),f.colSpan=t[u].columns.length,this._prepareColumns(n,t[u].columns,f,o),s+=f.colSpan-1,e.rowSpan=n.length-e.index);i&&(i.colSpan+=s)},_wheelScroll:function(t){var u,e,f;if(!t.ctrlKey&&(u=this.content,this.options.scrollable.virtual&&(u=this.virtualScrollable.verticalScrollbar),e=u.scrollTop(),f=i.wheelDeltaY(t),f)){t.preventDefault();n(t.currentTarget).one("wheel"+r,!1);u.scrollTop(e+-f)}},_isLocked:function(){return this.lockedHeader!=null},_updateCols:function(n){n=n||this.thead.parent().add(this.table);this._appendCols(n,this._isLocked())},_updateLockedCols:function(n){this._isLocked()&&(n=n||this.lockedHeader.find("table").add(this.lockedTable),ai(n,ut(sr(this.columns)),this._hasDetails(),this._groups()))},_appendCols:function(n,t){t?ai(n,ut(pf(this.columns)),this._hasDetails(),0):ai(n,ut(g(this.columns)),this._hasDetails(),this._groups())},_autoColumns:function(n){if(n&&n.toJSON){var t=this,i;n=n.toJSON();for(i in n)t.columns.push({field:i});t._thead();t._templates()}},_rowsHtml:function(n,t){for(var f=this,r="",e=t.rowTemplate,o=t.altRowTemplate,i=0,u=n.length;i<u;i++)r+=i%2?o(n[i]):e(n[i]),f._data.push(n[i]);return r},_groupRowHtml:function(n,t,r,u,e,o){var h=this,s="",c,p,w=n.field,a=l(h.columns,function(n){return n.field==w})[0]||{},v=a.groupHeaderTemplate,b=(a.title||w)+": "+kf(n.value,a.format,a.values),nt=h._groupAggregatesDefaultObject||{},k=f(nt,n.aggregates),d=f({},{field:n.field,value:n.value,aggregates:k},n.aggregates[n.field]),tt=e.rowTemplate,it=e.altRowTemplate,g=e.groupFooterTemplate,y=n.items;if(v&&(b=typeof v===pt?v(d):i.template(v)(d)),s+=u(t,r,b),n.hasSubgroups)for(c=0,p=y.length;c<p;c++)s+=h._groupRowHtml(y[c],o?t:t-1,r+1,u,e,o);else s+=h._rowsHtml(y,e);return g&&(s+=g(k)),s},collapseGroup:function(t){t=n(t);var e,h=this.options.groupable,c=h.showFooter,u=c?0:1,o,f=n(),r,s,i;for(this._isLocked()&&(t.closest("div").hasClass("k-grid-content-locked")?f=this.tbody.children("tr:eq("+t.index()+")").nextAll("tr"):(f=t.nextAll("tr"),t=this.lockedTable.find(">tbody>tr:eq("+t.index()+")"))),e=t.find(".k-group-cell").length,t.find(".k-icon").addClass("k-i-expand").removeClass("k-i-collapse"),t.find("td:first").attr("aria-expanded",!1),t=t.nextAll("tr"),r=0,s=t.length;r<s;r++){if(i=t.eq(r),o=i.find(".k-group-cell").length,i.hasClass("k-grouping-row")?u++:i.hasClass("k-group-footer")&&u--,o<=e||i.hasClass("k-group-footer")&&u<0)break;i.hide();f.eq(r).hide()}},expandGroup:function(t){t=n(t);var h=this,f,i,e,u=n(),r,s,o=1;for(this._isLocked()&&(t.closest("div").hasClass("k-grid-content-locked")?u=this.tbody.children("tr:eq("+t.index()+")").nextAll("tr"):(u=t.nextAll("tr"),t=this.lockedTable.find(">tbody>tr:eq("+t.index()+")"))),f=t.find(".k-group-cell").length,t.find(".k-icon").addClass("k-i-collapse").removeClass("k-i-expand"),t.find("td:first").attr("aria-expanded",!0),t=t.nextAll("tr"),r=0,s=t.length;r<s;r++){if(i=t.eq(r),e=i.find(".k-group-cell").length,e<=f)break;e!=f+1||i.hasClass("k-detail-row")||(i.show(),u.eq(r).show(),i.hasClass("k-grouping-row")&&i.find(".k-icon").hasClass("k-i-collapse")&&h.expandGroup(i),i.hasClass("k-master-row")&&i.find(".k-icon").hasClass("k-minus")&&(i.next().show(),u.eq(r+1).show()));i.hasClass("k-grouping-row")&&o++;i.hasClass("k-group-footer")&&(o==1?(i.show(),u.eq(r).show()):o--)}},_updateHeader:function(t){var r=this,i=r._isLocked()?r.lockedHeader.find("thead"):r.thead,f=i.find("tr.k-filter-row").find("th.k-group-cell").length,u=i.find("tr:first").find("th.k-group-cell").length,e=i.children("tr:not(:first)").filter(function(){return!n(this).children(":visible").length});t>u?(n(new Array(t-u+1).join('<th class="k-group-cell k-header">&nbsp;<\/th>')).prependTo(i.children("tr:not(.k-filter-row)")),r.element.is(":visible")&&e.find("th.k-group-cell").hide()):t<u&&i.find("tr").each(function(){n(this).find("th.k-group-cell").filter(":eq("+t+"),:gt("+t+")").remove()});t>f&&n(new Array(t-f+1).join('<th class="k-group-cell k-header">&nbsp;<\/th>')).prependTo(i.find(".k-filter-row"))},_firstDataItem:function(n,t){return n&&t&&(n=n.hasSubgroups?this._firstDataItem(n.items[0],t):n.items[0]),n},_updateTablesWidth:function(){var t=this,i;t._isLocked()&&(i=n(">.k-grid-footer>.k-grid-footer-wrap>table",t.wrapper).add(t.thead.parent()).add(t.table),t._footerWidth=du(i.eq(0)),i.width(t._footerWidth),i=n(">.k-grid-footer>.k-grid-footer-locked>table",t.wrapper).add(t.lockedHeader.find(">table")).add(t.lockedTable),i.width(du(i.eq(0))))},hideColumn:function(t){var i=this,rt,s,r,w,a,b,e=0,k,ut,v=i.footer||i.wrapper.find(".k-grid-footer"),o=i.columns,p=i.lockedHeader?nt(i.lockedHeader.find(">table>thead")).filter(":visible").length:0,f,tt;if(t=typeof t=="number"?o[t]:h(t)?l(ct(o),function(n){return n===t})[0]:l(ct(o),function(n){return n.field===t})[0],t&&it(t)){if(t.columns&&t.columns.length){for(b=wt(t,o),ii(t,!1),ft(d(n(">table>thead",i.lockedHeader),i.thead,">tr:eq("+b.row+")>th"),b.cell,!1),r=0;r<t.columns.length;r++)this.hideColumn(t.columns[r]);i.trigger(ki,{column:t});return}if(f=y(t,g(u(o))),ii(t,!1),i._setParentsVisibility(t,!1),i._templates(),i._updateCols(),i._updateLockedCols(),tt=i.thead,k=f,i.lockedHeader&&p>f?tt=i.lockedHeader.find(">table>thead"):k-=p,rt=nt(tt).filter(":visible").eq(k),rt[0].style.display="none",ft(d(n(">table>thead",i.lockedHeader),i.thead,">tr.k-filter-row>th"),f,!1),v[0]&&(i._updateCols(v.find(">.k-grid-footer-wrap>table")),i._updateLockedCols(v.find(">.k-grid-footer-locked>table")),ft(v.find(".k-footer-template>td"),f,!1)),i.lockedTable&&p>f?wu(i.lockedTable.find(">tbody>tr"),f):wu(i.tbody.children(),f-p),i.lockedTable)i._updateTablesWidth(),i._applyLockedContainersWidth(),i._syncLockedContentHeight(),i._syncLockedHeaderHeight(),i._syncLockedFooterHeight();else{for(w=i.thead.prev().find("col"),r=0,ut=w.length;r<ut;r+=1)if(a=w[r].style.width,a&&a.indexOf("%")==-1)e+=parseInt(a,10);else{e=0;break}s=n(">.k-grid-header table:first,>.k-grid-footer table:first",i.wrapper).add(i.table);i._footerWidth=null;e&&(s.width(e),i._footerWidth=e);c.msie&&c.version==8&&(s.css("display","inline-table"),setTimeout(function(){s.css("display","table")},1))}i._updateFirstColumnClass();i.trigger(ki,{column:t})}},_setParentsVisibility:function(t,r){var h=this.columns,e,o=[],u,s,f,c,l=r?function(n){return g(n.columns).length&&n.hidden}:function(n){return!g(n.columns).length&&!n.hidden};if(ur(t,h,o)&&o.length)for(e=o.length-1;e>=0;e--)u=o[e],s=fr(u,h),f=d(n(">table>thead",this.lockedHeader),this.thead,">tr:eq("+s.row+")>th:not(.k-group-cell):not(.k-hierarchy-cell)").eq(s.cell),l(u)&&(ii(u,r),f[0].style.display=r?"":"none"),f.filter("["+i.attr("colspan")+"]").length&&(c=parseInt(f.attr(i.attr("colspan")),10),f[0].colSpan=c-bt(u.columns)||1)},showColumn:function(t){var i=this,r,g,tt,a,e,v,p,w,b,o=i.columns,s=i.footer||i.wrapper.find(".k-grid-footer"),c=i.lockedHeader?nt(i.lockedHeader.find(">table>thead")).length:0,f,k;if(t=typeof t=="number"?o[t]:h(t)?l(ct(o),function(n){return n===t})[0]:l(ct(o),function(n){return n.field===t})[0],t&&!it(t)){if(t.columns&&t.columns.length){for(p=wt(t,o),ii(t,!0),ft(d(n(">table>thead",i.lockedHeader),i.thead,">tr:eq("+p.row+")>th"),p.cell,!0),r=0;r<t.columns.length;r++)this.showColumn(t.columns[r]);i.trigger(di,{column:t});return}if(f=y(t,u(o)),ii(t,!0),i._setParentsVisibility(t,!0),i._templates(),i._updateCols(),i._updateLockedCols(),k=i.thead,v=f,i.lockedHeader&&c>f?k=i.lockedHeader.find(">table>thead"):v-=c,tt=nt(k).eq(v),tt[0].style.display="",ft(d(n(">table>thead",i.lockedHeader),i.thead,">tr.k-filter-row>th"),f,!0),s[0]&&(i._updateCols(s.find(">.k-grid-footer-wrap>table")),i._updateLockedCols(s.find(">.k-grid-footer-locked>table")),ft(s.find(".k-footer-template>td"),f,!0)),i.lockedTable&&c>f?bu(i.lockedTable.find(">tbody>tr"),f):bu(i.tbody.children(),f-c),i.lockedTable)i._updateTablesWidth(),i._applyLockedContainersWidth(),i._syncLockedContentHeight(),i._syncLockedHeaderHeight();else if(a=n(">.k-grid-header table:first,>.k-grid-footer table:first",i.wrapper).add(i.table),t.width){for(e=0,b=i.thead.prev().find("col"),r=0,g=b.length;r<g;r+=1){if(w=b[r].style.width,w.indexOf("%")>-1){e=0;break}e+=parseInt(w,10)}i._footerWidth=null;e&&(a.width(e),i._footerWidth=e)}else a.width("");i._updateFirstColumnClass();i.trigger(di,{column:t})}},_progress:function(n){var t=this.element;this.lockedContent?t=this.wrapper:this.element.is("table")?t=this.element.parent():this.content&&this.content.length&&(t=this.content);i.ui.progress(t,n)},_resize:function(){this.content&&(this._setContentHeight(),this._setContentWidth())},_isActiveInTable:function(){var t=at();return this.table[0]===t||n.contains(this.table[0],t)||this._isLocked()&&(this.lockedTable[0]===t||n.contains(this.lockedTable[0],t))},refresh:function(t){var i=this,f=i.dataSource.view(),h=i.options.navigatable,u,s=n(i.current()),e=!1,r=(i.dataSource.group()||[]).length,o=r+ut(g(i.columns)).length;t&&t.action==="itemchange"&&i.editable||(t=t||{},i.trigger("dataBinding",{action:t.action||"rebind",index:t.index,items:t.items}))||(i._angularItems("cleanup"),h&&(i._isActiveInTable()||i._editContainer&&i._editContainer.data("kendoWindow"))&&(e=s.is("th"),u=0,e&&(u=i.thead.find("th:not(.k-group-cell)").index(s))),i._destroyEditable(),i._progress(!1),i._hideResizeHandle(),i._data=[],i.columns.length||(i._autoColumns(i._firstDataItem(f[0],r)),o=r+i.columns.length),i._group=r>0||i._group,i._group&&(i._templates(),i._updateCols(),i._updateLockedCols(),i._updateHeader(r),i._group=r>0),i._renderContent(f,o,r),i._renderLockedContent(f,o,r),i._footer(),i._setContentHeight(),i._setContentWidth(),i.lockedTable&&(i.options.scrollable.virtual?i.content.find(">.k-virtual-scrollable-wrap").trigger("scroll"):i.content.trigger("scroll")),u>=0&&(i._removeCurrent(),e?i.current(i.thead.find("th:not(.k-group-cell)").eq(u)):i.current(i.table.add(i.lockedTable).find(vt).first()),i._current&&a(i._current.closest("table")[0],!0)),i.touchScroller&&i.touchScroller.contentResized(),i.selectable&&i.selectable.resetTouchEvents(),i._angularItems("compile"),i.trigger(gi))},_renderContent:function(n,t,i){var r=this,u,o,e="",f=r.lockedContent!=null,s={rowTemplate:r.rowTemplate,altRowTemplate:r.altRowTemplate,groupFooterTemplate:r.groupFooterTemplate};if(t=f?t-ut(sr(r.columns)).length:t,i>0)for(t=f?t-i:t,r.detailTemplate&&t++,r.groupFooterTemplate&&(r._groupAggregatesDefaultObject=ir(r.dataSource.aggregate())),u=0,o=n.length;u<o;u++)e+=r._groupRowHtml(n[u],t,0,f?ue:nf,s,f);else e+=r._rowsHtml(n,s);r.tbody=yu(r.tbody,r.table,e)},_renderLockedContent:function(n,t,i){var f="",r,o,s={rowTemplate:this.lockedRowTemplate,altRowTemplate:this.lockedAltRowTemplate,groupFooterTemplate:this.lockedGroupFooterTemplate},e;if(this.lockedContent){if(e=this.lockedTable,i>0)for(t=t-g(u(rt(this.columns))).length,r=0,o=n.length;r<o;r++)f+=this._groupRowHtml(n[r],t,0,nf,s);else f=this._rowsHtml(n,s);yu(e.children("tbody"),e,f);this._syncLockedContentHeight()}},_adjustRowsHeight:function(n,t){for(var r=n[0].rows,c=r.length,u=t[0].rows,f=n.add(t),l=f.length,e=[],i=0;i<c;i++){if(!u[i])break;r[i].style.height&&(r[i].style.height=u[i].style.height="");var o=r[i].offsetHeight,s=u[i].offsetHeight,h=0;o>s?h=o:o<s&&(h=s);e.push(h)}for(i=0;i<l;i++)f[i].style.display="none";for(i=0;i<c;i++)e[i]&&(r[i].style.height=u[i].style.height=e[i]+"px");for(i=0;i<l;i++)f[i].style.display=""}});i.ExcelMixin&&i.ExcelMixin.extend(cr.prototype);i.PDFMixin&&i.PDFMixin.extend(cr.prototype);lt.plugin(cr);lt.plugin(fu)}(window.kendo.jQuery),window.kendo},typeof define=="function"&&define.amd?define:function(n,t){t()});
//# sourceMappingURL=kendo.grid.min.js.map
