(function(n,t){t(["./kendo.datepicker","./kendo.numerictextbox","./kendo.dropdownlist"],n)})(function(){return function(n){function c(t,i){t.filters&&(t.filters=n.grep(t.filters,function(n){return c(n,i),n.filters?n.filters.length:n.field!=i}))}function l(n){var i,u,t,f,e,r;if(n&&n.length)for(r=[],i=0,u=n.length;i<u;i++)t=n[i],e=t.text||t.value||t,f=t.value==null?t.text||t:t.value,r[i]={text:e,value:f};return r}function d(t,i){return n.grep(t,function(t){return t.filters?(t.filters=n.grep(t.filters,function(n){return n.field!=i}),t.filters.length):t.field!=i})}var t=window.kendo,s=t.ui,i=n.proxy,u="kendoPopup",h="init",r=".kendoFilterMenu",f="Is equal to",e="Is not equal to",a={number:"numerictextbox",date:"datepicker"},v={string:"text",number:"number",date:"date"},y=t.isFunction,o=s.Widget,p='<div><div class="k-filter-help-text">#=messages.info#<\/div><label><input type="radio" data-#=ns#bind="checked: filters[0].value" value="true" name="filters[0].value"/>#=messages.isTrue#<\/label><label><input type="radio" data-#=ns#bind="checked: filters[0].value" value="false" name="filters[0].value"/>#=messages.isFalse#<\/label><div><button type="submit" class="k-button k-primary">#=messages.filter#<\/button><button type="reset" class="k-button">#=messages.clear#<\/button><\/div><\/div>',w='<div><div class="k-filter-help-text">#=messages.info#<\/div><select data-#=ns#bind="value: filters[0].operator" data-#=ns#role="dropdownlist">#for(var op in operators){#<option value="#=op#">#=operators[op]#<\/option>#}#<\/select>#if(values){#<select data-#=ns#bind="value:filters[0].value" data-#=ns#text-field="text" data-#=ns#value-field="value" data-#=ns#source=\'#=kendo.stringify(values).replace(/\'/g,"&\\#39;")#\' data-#=ns#role="dropdownlist" data-#=ns#option-label="#=messages.selectValue#"><\/select>#}else{#<input data-#=ns#bind="value:filters[0].value" class="k-textbox" type="text" #=role ? "data-" + ns + "role=\'" + role + "\'" : ""# />#}##if(extra){#<select class="k-filter-and" data-#=ns#bind="value: logic" data-#=ns#role="dropdownlist"><option value="and">#=messages.and#<\/option><option value="or">#=messages.or#<\/option><\/select><select data-#=ns#bind="value: filters[1].operator" data-#=ns#role="dropdownlist">#for(var op in operators){#<option value="#=op#">#=operators[op]#<\/option>#}#<\/select>#if(values){#<select data-#=ns#bind="value:filters[1].value" data-#=ns#text-field="text" data-#=ns#value-field="value" data-#=ns#source=\'#=kendo.stringify(values).replace(/\'/g,"&\\#39;")#\' data-#=ns#role="dropdownlist" data-#=ns#option-label="#=messages.selectValue#"><\/select>#}else{#<input data-#=ns#bind="value: filters[1].value" class="k-textbox" type="text" #=role ? "data-" + ns + "role=\'" + role + "\'" : ""#/>#}##}#<div><button type="submit" class="k-button k-primary">#=messages.filter#<\/button><button type="reset" class="k-button">#=messages.clear#<\/button><\/div><\/div>',b='<div data-#=ns#role="view" data-#=ns#init-widgets="false" class="k-grid-filter-menu"><div data-#=ns#role="header" class="k-header"><button class="k-button k-cancel">#=messages.cancel#<\/button>#=field#<button type="submit" class="k-button k-submit">#=messages.filter#<\/button><\/div><form class="k-filter-menu k-mobile-list"><ul class="k-filter-help-text"><li><span class="k-link">#=messages.info#<\/span><ul><li class="k-item"><label class="k-label">#=messages.operator#<select data-#=ns#bind="value: filters[0].operator">#for(var op in operators){#<option value="#=op#">#=operators[op]#<\/option>#}#<\/select><\/label><\/li><li class="k-item"><label class="k-label">#=messages.value##if(values){#<select data-#=ns#bind="value:filters[0].value"><option value="">#=messages.selectValue#<\/option>#for(var val in values){#<option value="#=values[val].value#">#=values[val].text#<\/option>#}#<\/select>#}else{#<input data-#=ns#bind="value:filters[0].value" class="k-textbox" type="#=inputType#" #=useRole ? "data-" + ns + "role=\'" + role + "\'" : ""# />#}#<\/label><\/li>#if(extra){#<\/ul><ul class="k-filter-help-text"><li><span class="k-link"><\/span><li class="k-item"><label class="k-label"><input type="radio" name="logic" class="k-check" data-#=ns#bind="checked: logic" value="and" />#=messages.and#<\/label><\/li><li class="k-item"><label class="k-label"><input type="radio" name="logic" class="k-check" data-#=ns#bind="checked: logic" value="or" />#=messages.or#<\/label><\/li><\/ul><ul class="k-filter-help-text"><li><span class="k-link"><\/span><li class="k-item"><label class="k-label">#=messages.operator#<select data-#=ns#bind="value: filters[1].operator">#for(var op in operators){#<option value="#=op#">#=operators[op]#<\/option>#}#<\/select><\/label><\/li><li class="k-item"><label class="k-label">#=messages.value##if(values){#<select data-#=ns#bind="value:filters[1].value"><option value="">#=messages.selectValue#<\/option>#for(var val in values){#<option value="#=values[val].value#">#=values[val].text#<\/option>#}#<\/select>#}else{#<input data-#=ns#bind="value:filters[1].value" class="k-textbox" type="#=inputType#" #=useRole ? "data-" + ns + "role=\'" + role + "\'" : ""# />#}#<\/label><\/li>#}#<\/ul><\/li><li class="k-button-container"><button type="reset" class="k-button">#=messages.clear#<\/button><\/li><\/ul><\/div><\/form><\/div>',k='<div data-#=ns#role="view" data-#=ns#init-widgets="false" class="k-grid-filter-menu"><div data-#=ns#role="header" class="k-header"><button class="k-button k-cancel">#=messages.cancel#<\/button>#=field#<button type="submit" class="k-button k-submit">#=messages.filter#<\/button><\/div><form class="k-filter-menu k-mobile-list"><ul class="k-filter-help-text"><li><span class="k-link">#=messages.info#<\/span><ul><li class="k-item"><label class="k-label"><input class="k-check" type="radio" data-#=ns#bind="checked: filters[0].value" value="true" name="filters[0].value"/>#=messages.isTrue#<\/label><\/li><li class="k-item"><label class="k-label"><input class="k-check" type="radio" data-#=ns#bind="checked: filters[0].value" value="false" name="filters[0].value"/>#=messages.isFalse#<\/label><\/li><\/ul><\/li><li class="k-button-container"><button type="reset" class="k-button">#=messages.clear#<\/button><\/li><\/ul><\/form><\/div>',g=o.extend({init:function(u,f){var e=this,h="string",l,a,c,s;if(o.fn.init.call(e,u,f),l=e.operators=f.operators||{},u=e.element,f=e.options,!f.appendToElement){c=u.addClass("k-with-icon k-filterable").find(".k-grid-filter");c[0]||(c=u.prepend('<a class="k-grid-filter" href="#"><span class="k-icon k-filter"/><\/a>').find(".k-grid-filter"));c.attr("tabindex",-1).on("click"+r,i(e._click,e))}e.link=c||n();e.dataSource=f.dataSource;e.field=f.field||u.attr(t.attr("field"));e.model=e.dataSource.reader.model;e._parse=function(n){return n+""};e.model&&e.model.fields&&(s=e.model.fields[e.field],s&&(h=s.type||"string",s.parse&&(e._parse=i(s.parse,s))));f.values&&(h="enums");e.type=h;l=l[h]||f.operators[h];for(a in l)break;e._defaultFilter=function(){return{field:e.field,operator:a||"eq",value:""}};e._refreshHandler=i(e.refresh,e);e.dataSource.bind("change",e._refreshHandler);f.appendToElement?e._init():e.refresh()},_init:function(){var u=this,f=u.options.ui,o=y(f),e;u.pane=u.options.pane;u.pane&&(u._isMobile=!0);o||(e=f||a[u.type]);u._isMobile?u._createMobileForm(e):u._createForm(e);u.form.on("submit"+r,i(u._submit,u)).on("reset"+r,i(u._reset,u));o&&u.form.find(".k-textbox").removeClass("k-textbox").each(function(){f(n(this))});u.form.find("["+t.attr("role")+"=numerictextbox]").removeClass("k-textbox").end().find("["+t.attr("role")+"=datetimepicker]").removeClass("k-textbox").end().find("["+t.attr("role")+"=timepicker]").removeClass("k-textbox").end().find("["+t.attr("role")+"=datepicker]").removeClass("k-textbox");u.refresh();u.trigger(h,{field:u.field,container:u.form})},_createForm:function(f){var e=this,o=e.options,h=e.operators||{},s=e.type;h=h[s]||o.operators[s];e.form=n('<form class="k-filter-menu"/>').html(t.template(s==="boolean"?p:w)({field:e.field,format:o.format,ns:t.ns,messages:o.messages,extra:o.extra,operators:h,type:s,role:f,values:l(o.values)}));o.appendToElement?(e.element.append(e.form),e.popup=e.element.closest(".k-popup").data(u)):e.popup=e.form[u]({anchor:e.link,open:i(e._open,e),activate:i(e._activate,e),close:function(){e.options.closeCallback&&e.options.closeCallback(e.element)}}).data(u);e.form.on("keydown"+r,i(e._keydown,e))},_createMobileForm:function(i){var r=this,f=r.options,e=r.operators||{},u=r.type;e=e[u]||f.operators[u];r.form=n("<div />").html(t.template(u==="boolean"?k:b)({field:r.field,format:f.format,ns:t.ns,messages:f.messages,extra:f.extra,operators:e,type:u,role:i,useRole:!t.support.input.date&&u==="date"||u==="number",inputType:v[u],values:l(f.values)}));r.view=r.pane.append(r.form.html());r.form=r.view.element.find("form");r.view.element.on("click",".k-submit",function(n){r.form.submit();n.preventDefault()}).on("click",".k-cancel",function(n){r._closeForm();n.preventDefault()})},refresh:function(){var n=this,i=n.dataSource.filter()||{filters:[],logic:"and"};n.filterModel=t.observable({logic:"and",filters:[n._defaultFilter(),n._defaultFilter()]});n.form&&t.bind(n.form.children().first(),n.filterModel);n._bind(i)?n.link.addClass("k-state-active"):n.link.removeClass("k-state-active")},destroy:function(){var n=this;o.fn.destroy.call(n);n.form&&(t.unbind(n.form),t.destroy(n.form),n.form.unbind(r),n.popup&&(n.popup.destroy(),n.popup=null),n.form=null);n.view&&(n.view.purge(),n.view=null);n.link.unbind(r);n._refreshHandler&&(n.dataSource.unbind("change",n._refreshHandler),n.dataSource=null);n.element=n.link=n._refreshHandler=n.filterModel=null},_bind:function(n){for(var i=this,s=n.filters,f=!1,o=0,e=i.filterModel,r,t,u=0,h=s.length;u<h;u++)t=s[u],t.field==i.field?(e.set("logic",n.logic),r=e.filters[o],r||(e.filters.push({field:i.field}),r=e.filters[o]),r.set("value",i._parse(t.value)),r.set("operator",t.operator),o++,f=!0):t.filters&&(f=f||i._bind(t));return f},_merge:function(t){var f=this,s=t.logic||"and",r=t.filters,e,i=f.dataSource.filter()||{filters:[],logic:"and"},u,o;for(c(i,f.field),r=n.grep(r,function(n){return n.value!==""&&n.value!=null}),u=0,o=r.length;u<o;u++)e=r[u],e.value=f._parse(e.value);return r.length&&(i.filters.length?(t.filters=r,i.logic!=="and"&&(i.filters=[{logic:i.logic,filters:i.filters}],i.logic="and"),r.length>1?i.filters.push(t):i.filters.push(r[0])):(i.filters=r,i.logic=s)),i},filter:function(n){n=this._merge(n);n.filters.length&&this.dataSource.filter(n)},clear:function(){var i=this,t=i.dataSource.filter()||{filters:[]};t.filters=n.grep(t.filters,function(n){return n.filters?(n.filters=d(n.filters,i.field),n.filters.length):n.field!=i.field});t.filters.length||(t=null);i.dataSource.filter(t)},_submit:function(n){n.preventDefault();n.stopPropagation();this.filter(this.filterModel.toJSON());this._closeForm()},_reset:function(){this.clear();this._closeForm()},_closeForm:function(){this._isMobile?this.pane.navigate("",this.options.animations.right):this.popup.close()},_click:function(n){n.preventDefault();n.stopPropagation();this.popup||this.pane||this._init();this._isMobile?this.pane.navigate(this.view,this.options.animations.left):this.popup.toggle()},_open:function(){var t;n(".k-filter-menu").not(this.form).each(function(){t=n(this).data(u);t&&t.close()})},_activate:function(){this.form.find(":kendoFocusable:first").focus()},_keydown:function(n){n.keyCode==t.keys.ESC&&this.popup.close()},events:[h],options:{name:"FilterMenu",extra:!0,appendToElement:!1,type:"string",operators:{string:{eq:f,neq:e,startswith:"Starts with",contains:"Contains",doesnotcontain:"Does not contain",endswith:"Ends with"},number:{eq:f,neq:e,gte:"Is greater than or equal to",gt:"Is greater than",lte:"Is less than or equal to",lt:"Is less than"},date:{eq:f,neq:e,gte:"Is after or equal to",gt:"Is after",lte:"Is before or equal to",lt:"Is before"},enums:{eq:f,neq:e}},messages:{info:"Show items with value that:",isTrue:"is true",isFalse:"is false",filter:"Filter",clear:"Clear",and:"And",or:"Or",selectValue:"-Select value-",operator:"Operator",value:"Value",cancel:"Cancel"},animations:{left:"slide",right:"slide:right"}}});s.plugin(g)}(window.kendo.jQuery),window.kendo},typeof define=="function"&&define.amd?define:function(n,t){t()});
//# sourceMappingURL=kendo.filtermenu.min.js.map
