(function(n,t){t(["./kendo.scheduler.view"],n)})(function(){return function(n,t){function p(n){var t=new Date(1980,1,1,0,0,0);return c(t,r(n)),t}function o(n,t,i){return n>=t&&n<=i}function l(n,t,i,r){return r=r?n<=i:n<i,n>t&&r}function w(n,t,r,u){var f=n._continuousEvents,s=f[f.length-1],h=e(t.start.startDate()).getTime(),o;if(u&&s&&e(s.start.startDate()).getTime()==h){for(o=f.length-1;o>-1;o--)if(f[o].isAllDay||e(f[o].start.startDate()).getTime()<h)break;f.splice(o+1,0,{element:r,isAllDay:!0,uid:r.attr(i.attr("uid")),start:t.start,end:t.end})}else f.push({element:r,isAllDay:u,uid:r.attr(i.attr("uid")),start:t.start,end:t.end})}function it(n){var i=[],t=n.workWeekStart;for(i.push(t);n.workWeekEnd!=t;)t>6?t-=7:t++,i.push(t);return i}var i=window.kendo,y=i.ui,c=i.date.setTime,f=y.SchedulerView,h=n.extend,b=n.proxy,e=i.date.getDate,v=i.date.MS_PER_MINUTE,u=i.date.MS_PER_DAY,r=i.date.getMilliseconds,s=".kendoMultiDayView",k=i.template('<div title="(#=kendo.format("{0:t} - {1:t}", start, end)#): #=title.replace(/"/g,"&\\#34;")#"><div class="k-event-template k-event-time">#:kendo.format("{0:t} - {1:t}", start, end)#<\/div><div class="k-event-template">${title}<\/div><\/div>'),d=i.template('<div title="(#=kendo.format("{0:t}", start)#): #=title.replace(/"/g,"&\\#34;")#"><div class="k-event-template">${title}<\/div><\/div>'),g=i.template("<span class='k-link k-nav-day'>#=kendo.toString(date, 'ddd M/dd')#<\/span>"),nt='<div role="gridcell" aria-selected="false" data-#=ns#uid="#=uid#"#if (resources[0]) { #style="background-color:#=resources[0].color#; border-color: #=resources[0].color#"class="k-event#=inverseColor ? " k-event-inverse" : ""#" #} else {#class="k-event"#}#><span class="k-event-actions"># if(data.tail || data.middle) {#<span class="k-icon k-i-arrow-w"><\/span>#}## if(data.isException()) {#<span class="k-icon k-i-exception"><\/span># } else if(data.isRecurring()) {#<span class="k-icon k-i-refresh"><\/span># } #<\/span>{0}<span class="k-event-actions">#if (showDelete) {#<a href="\\#" class="k-link k-event-delete"><span class="k-icon k-si-close"><\/span><\/a>#}## if(data.head || data.middle) {#<span class="k-icon k-i-arrow-e"><\/span>#}#<\/span>#if(resizable && !singleDay && !data.tail && !data.middle){#<span class="k-resize-handle k-resize-w"><\/span>#}##if(resizable && !singleDay && !data.head && !data.middle){#<span class="k-resize-handle k-resize-e"><\/span>#}#<\/div>',tt='<div role="gridcell" aria-selected="false" data-#=ns#uid="#=uid#" #if (resources[0]) { #style="background-color:#=resources[0].color #; border-color: #=resources[0].color#"class="k-event#=inverseColor ? " k-event-inverse" : ""#"#} else {#class="k-event"#}#><span class="k-event-actions"># if(data.isException()) {#<span class="k-icon k-i-exception"><\/span># } else if(data.isRecurring()) {#<span class="k-icon k-i-refresh"><\/span># } #<\/span>{0}<span class="k-event-actions">#if (showDelete) {#<a href="\\#" class="k-link k-event-delete"><span class="k-icon k-si-close"><\/span><\/a>#}#<\/span><span class="k-event-top-actions"># if(data.tail || data.middle) {#<span class="k-icon k-i-arrow-n"><\/span># } #<\/span><span class="k-event-bottom-actions"># if(data.head || data.middle) {#<span class="k-icon k-i-arrow-s"><\/span># } #<\/span># if(resizable && !data.tail && !data.middle) {#<span class="k-resize-handle k-resize-n"><\/span># } ## if(resizable && !data.head && !data.middle) {#<span class="k-resize-handle k-resize-s"><\/span># } #<\/div>',a=f.extend({init:function(n,t){var i=this;f.fn.init.call(i,n,t);i.title=i.options.title||i.options.name;i._workDays=it(i.options);i._templates();i._editable();i.calculateDateRange();i._groups();i._currentTime()},_currentTimeMarkerUpdater:function(){var t=new Date,r=this.options,f,o,s,u,c,l,a;for(r.currentTimeMarker.useLocalTimezone===!1&&(f=r.dataSource.options.schema.timezone,r.dataSource&&f&&(o=i.timezone.offset(t,f),t=i.timezone.convert(t,t.getTimezoneOffset(),o))),this.times.find(".k-current-time").remove(),s=!r.group||r.group.orientation=="horizontal"?1:this.groups.length,u=0;u<s;u++){var v=this.groups[u],h=i.date.toUtcTime(t),e=v.timeSlotRanges(h,h+1);if(e.length===0)return;c=e[0].collection;l=c.slotByStartDate(t);l&&(a=n("<div class='k-current-time'><\/div>"),a.appendTo(this.times).css({top:Math.round(e[0].innerRect(t,new Date(t.getTime()+1),!1).top),height:"1px",right:"1px",left:0}))}},_currentTime:function(){var n=this,i=n.options.currentTimeMarker,r;i!==!1&&i.updateInterval!==t&&(r=i.updateInterval,n._currentTimeMarkerUpdater(),n._currentTimeUpdateTimer=setInterval(b(this._currentTimeMarkerUpdater,n),r))},_updateResizeHint:function(n,t,r,u){var l=n.isMultiDay(),k=this.groups[t],v=k.ranges(r,u,l,n.isAllDay),o,h,b,c,e;for(this._removeResizeHint(),o=0;o<v.length;o++){var a=v[o],s=a.startSlot(),y=s.offsetWidth,p=s.clientHeight,w=s.offsetTop;l?y=a.innerWidth():(h=a.outerRect(r,u,this.options.snap),w=h.top,p=h.bottom-h.top);b=f.fn._createResizeHint.call(this,s.offsetLeft,w,y,p);this._resizeHint=this._resizeHint.add(b)}c="t";e=this.content;l&&(c="M/dd",e=this.element.find(".k-scheduler-header-wrap:has(.k-scheduler-header-all-day) > div"),e.length||(e=this.content));this._resizeHint.appendTo(e);this._resizeHint.find(".k-label-top,.k-label-bottom").text("");this._resizeHint.first().addClass("k-first").find(".k-label-top").text(i.toString(i.timezone.toLocalDate(r),c));this._resizeHint.last().addClass("k-last").find(".k-label-bottom").text(i.toString(i.timezone.toLocalDate(u),c))},_updateMoveHint:function(n,t,u){var s=n.isMultiDay(),w=this.groups[t],o=i.date.toUtcTime(n.start)+u,f=o+n.duration(),l=w.ranges(o,f,s,n.isAllDay),a,e,v,c;for(o=i.timezone.toLocalDate(o),f=i.timezone.toLocalDate(f),this._removeMoveHint(),!s&&(r(f)===0||r(f)<r(this.startTime()))&&l.length>1&&l.pop(),a=0;a<l.length;a++){var y=l[a],h=y.start,p=this._createEventElement(n.clone({start:o,end:f}),!s);p.addClass("k-event-drag-hint");e={left:h.offsetLeft+2,top:h.offsetTop};this._isRtl&&(e.left=h.clientWidth*.1+h.offsetLeft+2);s?e.width=y.innerWidth()-4:(v=y.outerRect(o,f,this.options.snap),e.top=v.top,e.height=v.bottom-v.top,e.width=h.clientWidth*.9-4);p.css(e);this._moveHint=this._moveHint.add(p)}c=this.content;s&&(c=this.element.find(".k-scheduler-header-wrap:has(.k-scheduler-header-all-day) > div"),c.length||(c=this.content));this._moveHint.appendTo(c)},_slotByPosition:function(n,t){var u,i,f,r;for(this._isVerticallyGrouped()?(i=this.content.offset(),t+=this.content[0].scrollTop,n+=this.content[0].scrollLeft):i=this.element.find(".k-scheduler-header-wrap:has(.k-scheduler-header-all-day)").find(">div").offset(),i&&(n-=i.left,t-=i.top),n=Math.ceil(n),t=Math.ceil(t),r=0;r<this.groups.length;r++)if(f=this.groups[r],u=f.daySlotByPosition(n,t),u)return u;for(i&&(n+=i.left,t+=i.top),i=this.content.offset(),n-=i.left,t-=i.top,this._isVerticallyGrouped()||(t+=this.content[0].scrollTop,n+=this.content[0].scrollLeft),n=Math.ceil(n),t=Math.ceil(t),r=0;r<this.groups.length;r++)if(f=this.groups[r],u=f.timeSlotByPosition(n,t),u)return u;return null},_groupCount:function(){var n=this.groupedResources;return n.length?this._groupOrientation()==="vertical"?this._rowCountForLevel(n.length-1):this._columnCountForLevel(n.length)/this._columnOffsetForResource(n.length):1},_columnCountInResourceView:function(){var n=this.groupedResources;return!n.length||this._isVerticallyGrouped()?this._columnCountForLevel(0):this._columnOffsetForResource(n.length)},_timeSlotGroups:function(n,t){var v=this._timeSlotInterval(),h=this.content.find("tr:not(.k-scheduler-header-all-day)"),i,u,o,f,c,s,y,p,e;for(h.attr("role","row"),i=h.length,this._isVerticallyGrouped()&&(i=Math.floor(i/n)),u=0;u<n;u++)for(o=0,this._isVerticallyGrouped()&&(o=u),f=o*i,s=0,this._isVerticallyGrouped()||(s=u);f<(o+1)*i;){for(y=h[f].children,p=this.groups[u],f%i==0&&(c=r(new Date(+this.startTime()))),e=s*t;e<(s+1)*t;e++){var l=y[e],w=e%t,k=p.getTimeSlotCollection(w),a=this._dates[w],d=Date.UTC(a.getFullYear(),a.getMonth(),a.getDate()),b=d+c,g=b+v;l.setAttribute("role","gridcell");l.setAttribute("aria-selected",!1);k.addTimeSlot(l,b,g)}c+=v;f++}},_daySlotGroups:function(n,t){var s,r,h,f,u,e,o,l;for(s=this._isVerticallyGrouped()?this.element.find(".k-scheduler-header-all-day"):this.element.find(".k-scheduler-header-all-day tr"),s.attr("role","row"),r=0;r<n;r++){h=0;this._isVerticallyGrouped()&&(h=r);var a=this.groups[r],v=a.getDaySlotCollection(0),y=s[h].children,c=0;for(this._isVerticallyGrouped()||(c=r),f=0,u=c*t;u<(c+1)*t;u++)e=y[u],u%t==0&&(f=0),o=this._dates[f],l=Date.UTC(o.getFullYear(),o.getMonth(),o.getDate()),f++,e.setAttribute("role","gridcell"),e.setAttribute("aria-selected",!1),v.addDaySlot(e,l,l+i.date.MS_PER_DAY)}},_groups:function(){var r=this._groupCount(),u=this._columnCountInResourceView(),t,f,n;for(this.groups=[],t=0;t<r;t++){for(f=this._addResourceView(t),n=0;n<u;n++)f.addTimeSlotCollection(this._dates[n],i.date.addDays(this._dates[n],1));this.options.allDaySlot&&f.addDaySlotCollection(this._dates[0],i.date.addDays(this._dates[this._dates.length-1],1))}this._timeSlotGroups(r,u);this.options.allDaySlot&&this._daySlotGroups(r,u)},options:{name:"MultiDayView",selectedDateFormat:"{0:D}",allDaySlot:!0,showWorkHours:!1,title:"",startTime:i.date.today(),endTime:i.date.today(),minorTickCount:2,majorTick:60,majorTimeHeaderTemplate:"#=kendo.toString(date, 't')#",minorTimeHeaderTemplate:"&nbsp;",groupHeaderTemplate:"#=text#",slotTemplate:"&nbsp;",allDaySlotTemplate:"&nbsp;",eventTemplate:k,allDayEventTemplate:d,dateHeaderTemplate:g,editable:!0,workDayStart:new Date(1980,1,1,8,0,0),workDayEnd:new Date(1980,1,1,17,0,0),workWeekStart:1,workWeekEnd:5,footer:{command:"workDay"},messages:{allDay:"all day",showFullDay:"Show full day",showWorkDay:"Show business hours"},currentTimeMarker:{updateInterval:1e4,useLocalTimezone:!0}},events:["remove","add","edit"],_templates:function(){var n=this.options,t=h({},i.Template,n.templateSettings);this.eventTemplate=this._eventTmpl(n.eventTemplate,tt);this.allDayEventTemplate=this._eventTmpl(n.allDayEventTemplate,nt);this.majorTimeHeaderTemplate=i.template(n.majorTimeHeaderTemplate,t);this.minorTimeHeaderTemplate=i.template(n.minorTimeHeaderTemplate,t);this.dateHeaderTemplate=i.template(n.dateHeaderTemplate,t);this.slotTemplate=i.template(n.slotTemplate,t);this.allDaySlotTemplate=i.template(n.allDaySlotTemplate,t);this.groupHeaderTemplate=i.template(n.groupHeaderTemplate,t)},_editable:function(){this.options.editable&&(this._isMobile()?this._touchEditable():this._mouseEditable())},_mouseEditable:function(){var t=this;t.element.on("click"+s,".k-event a:has(.k-si-close)",function(r){t.trigger("remove",{uid:n(this).closest(".k-event").attr(i.attr("uid"))});r.preventDefault()});if(t.options.editable.create!==!1)t.element.on("dblclick"+s,".k-scheduler-content td",function(i){var r,u;n(this).parent().hasClass("k-scheduler-header-all-day")||(r=t._slotByPosition(i.pageX,i.pageY),r&&(u=t._resourceBySlot(r),t.trigger("add",{eventInfo:h({start:r.startDate(),end:r.endDate()},u)})),i.preventDefault())}).on("dblclick"+s,".k-scheduler-header-all-day td",function(n){var r=t._slotByPosition(n.pageX,n.pageY),u;r&&(u=t._resourceBySlot(r),t.trigger("add",{eventInfo:h({},{isAllDay:!0,start:i.date.getDate(r.startDate()),end:i.date.getDate(r.startDate())},u)}));n.preventDefault()});if(t.options.editable.update!==!1)t.element.on("dblclick"+s,".k-event",function(r){t.trigger("edit",{uid:n(this).closest(".k-event").attr(i.attr("uid"))});r.preventDefault()})},_touchEditable:function(){var t=this;t.options.editable.create!==!1&&(t._addUserEvents=new i.UserEvents(t.element,{filter:".k-scheduler-content td",tap:function(i){var r,u;n(i.target).parent().hasClass("k-scheduler-header-all-day")||(r=t._slotByPosition(i.x.location,i.y.location),r&&(u=t._resourceBySlot(r),t.trigger("add",{eventInfo:h({start:r.startDate(),end:r.endDate()},u)})),i.preventDefault())}}),t._allDayUserEvents=new i.UserEvents(t.element,{filter:".k-scheduler-header-all-day td",tap:function(n){var r=t._slotByPosition(n.x.location,n.y.location),u;r&&(u=t._resourceBySlot(r),t.trigger("add",{eventInfo:h({},{isAllDay:!0,start:i.date.getDate(r.startDate()),end:i.date.getDate(r.startDate())},u)}));n.preventDefault()}}));t.options.editable.update!==!1&&(t._editUserEvents=new i.UserEvents(t.element,{filter:".k-event",tap:function(r){var u=n(r.target).closest(".k-event");u.hasClass("k-event-active")||t.trigger("edit",{uid:u.attr(i.attr("uid"))});r.preventDefault()}}))},_layout:function(n){for(var o,u,f=[],r=[],s=this.options,t=this,e=0;e<n.length;e++)o={},o.text=t.dateHeaderTemplate({date:n[e]}),i.date.isToday(n[e])&&(o.className="k-today"),f.push(o);return u=this.groupedResources,s.allDaySlot&&r.push({text:s.messages.allDay,allDay:!0,cellContent:function(i){var r=i;return i=u.length&&t._groupOrientation()!=="vertical"?i%n.length:i,t.allDaySlotTemplate({date:n[i],resources:function(){return t._resourceBySlot({groupIndex:r})}})}}),this._forTimeRange(this.startTime(),this.endTime(),function(n,i,u,f){var e=i?t.majorTimeHeaderTemplate:t.minorTimeHeaderTemplate,o={text:e({date:n}),className:f?"k-slot-cell":""};r.push(o)}),u.length&&(this._groupOrientation()==="vertical"?r=this._createRowsLayout(u,r,this.groupHeaderTemplate):f=this._createColumnsLayout(u,f,this.groupHeaderTemplate)),{columns:f,rows:r}},_footer:function(){var i=this.options,t,u,r;if(i.footer!==!1){t='<div class="k-header k-scheduler-footer">';u=i.footer.command;u&&u==="workDay"?(t+='<ul class="k-reset k-header">',t+='<li class="k-state-default k-scheduler-fullday"><a href="#" class="k-link"><span class="k-icon k-i-clock"><\/span>',t+=(i.showWorkHours?i.messages.showFullDay:i.messages.showWorkDay)+"<\/a><\/li>",t+="<\/ul>"):t+="&nbsp;";t+="<\/div>";this.footer=n(t).appendTo(this.element);r=this;this.footer.on("click"+s,".k-scheduler-fullday",function(n){n.preventDefault();r.trigger("navigate",{view:r.name||i.name,date:r.startDate(),isWorkDay:!i.showWorkHours})})}},_forTimeRange:function(n,t,i,f){n=p(n);t=p(t);var d=this,l=r(n),o=r(t),a=d.options.minorTickCount,g=d.options.majorTick*v,h=g/a||1,e=new Date(+n),nt=e.getDate(),y,w=0,s,b="";for(s=u/h,l!=o&&(l>o&&(o+=u),s=(o-l)/h),s=Math.round(s);w<s;w++){var k=w%(g/h),tt=k===0,it=k<a-1,rt=k===a-1;b+=i(e,tt,it,rt);c(e,h,!1)}return o&&(y=r(e),nt<e.getDate()&&(y+=u),y>o&&(e=new Date(+t))),f&&(b+=f(e)),b},_content:function(n){var t=this,c=t.options,l=t.startTime(),a=this.endTime(),o=1,s=1,v=n.length,r="",y=this.groupedResources,p=this.slotTemplate,w=this.allDaySlotTemplate,f=!1,e,h,u;for(y.length&&(f=t._groupOrientation()==="vertical",f?(s=this._rowCountForLevel(this.rowLevels.length-2),c.allDaySlot&&(e=function(i){for(var u='<tr class="k-scheduler-header-all-day">',f=function(){return t._resourceBySlot({groupIndex:i})},r=0,e=n.length;r<e;r++)u+="<td>"+w({date:n[r],resources:f})+"<\/td>";return u+"<\/tr>"})):o=this._columnCountForLevel(this.columnLevels.length-2)),r+="<tbody>",h=function(r,e){for(var h="",s,y,c="",l,a=0,h="<tr"+(e?' class="k-middle-row"':"")+">",w=function(n){return function(){return t._resourceBySlot({groupIndex:n})}};a<o;a++)for(s=0,y=v;s<y;s++)c="",i.date.isToday(n[s])&&(c+="k-today"),(i.date.getMilliseconds(r)<i.date.getMilliseconds(t.options.workDayStart)||i.date.getMilliseconds(r)>=i.date.getMilliseconds(t.options.workDayEnd)||!t._isWorkDay(n[s]))&&(c+=" k-nonwork-hour"),h+="<td"+(c!==""?' class="'+c+'"':"")+">",l=i.date.getDate(n[s]),i.date.setTime(l,i.date.getMilliseconds(r)),h+=p({date:l,resources:w(f?u:a)}),h+="<\/td>";return h+"<\/tr>"},u=0;u<s;u++)r+=e?e(u):"",r+=this._forTimeRange(l,a,h);r+="<\/tbody>";this.content.find("table").append(r)},_isWorkDay:function(n){for(var r=n.getDay(),i=this._workDays,t=0;t<i.length;t++)if(i[t]===r)return!0;return!1},_render:function(t){var i=this,r;t=t||[];this._dates=t;this._startDate=t[0];this._endDate=t[t.length-1||0];this.createLayout(this._layout(t));this._content(t);this._footer();this.refreshLayout();r=this.element.find(".k-scheduler-header-all-day td");r.length&&(this._allDayHeaderHeight=r.first()[0].clientHeight);i.datesHeader.on("click"+s,".k-nav-day",function(t){var r=n(t.currentTarget).closest("th"),u=r.offset(),f=i._slotByPosition(u.left,u.top+r.outerHeight());i.trigger("navigate",{view:"day",date:f.startDate()})})},startTime:function(){var n=this.options;return n.showWorkHours?n.workDayStart:n.startTime},endTime:function(){var n=this.options;return n.showWorkHours?n.workDayEnd:n.endTime},startDate:function(){return this._startDate},endDate:function(){return this._endDate},_end:function(n){var t=r(this.endTime())||u;return n&&(t=0),new Date(this._endDate.getTime()+t)},nextDate:function(){return i.date.nextDay(this.endDate())},previousDate:function(){return i.date.previousDay(this.startDate())},calculateDateRange:function(){this._render([this.options.date])},destroy:function(){var n=this;n._currentTimeUpdateTimer&&clearInterval(n._currentTimeUpdateTimer);n.datesHeader&&n.datesHeader.off(s);n.element&&n.element.off(s);n.footer&&n.footer.remove();f.fn.destroy.call(this);this._isMobile()&&n.options.editable&&(n.options.editable.create!==!1&&(n._addUserEvents.destroy(),n._allDayUserEvents.destroy()),n.options.editable.update!==!1&&n._editUserEvents.destroy())},inRange:function(n){var t=f.fn.inRange.call(this,n),u=r(this.startTime()),e=r(this.endTime())||i.date.MS_PER_DAY,o=r(n.start),s=r(n.end)||i.date.MS_PER_DAY;return t&&u<=o&&s<=e},selectionByElement:function(n){var t=n.offset();return this._slotByPosition(t.left,t.top)},_timeSlotInterval:function(){var n=this.options;return n.majorTick/n.minorTickCount*v},_timeSlotIndex:function(n){var t=this.options,i=r(n),u=r(this.startTime()),f=t.majorTick/t.minorTickCount*v;return(i-u)/f},_slotIndex:function(n,t){return t?this._dateSlotIndex(n):this._timeSlotIndex(n)},_dateSlotIndex:function(n,t){for(var f=this._dates||[],s,h,r=0,e=f.length;r<e;r++)if(s=i.date.getDate(f[r]),h=new Date(i.date.getDate(f[r]).getTime()+u-(t?0:1)),o(n,s,h))return r*1;return-1},_positionAllDayEvent:function(t,i){var y=i.innerWidth(),r=i.start.index,o=i.end.index,c=f.collidingEvents(i.events(),r,o),p=this._headerColumnCount||0,w=r!==o?5:4,b=this._allDayHeaderHeight,k=i.startSlot(),u,l,e,a,h,s,v;for(t.css({left:k.offsetLeft+2,width:y-w}),i.addEvent({slotIndex:r,start:r,end:o,element:t}),c.push({slotIndex:r,start:r,end:o,element:t}),u=f.createRows(c),u.length&&u.length>p&&(this._headerColumnCount=u.length),l=i.start.offsetTop,e=0,a=u.length;e<a;e++)for(h=u[e].events,s=0,v=h.length;s<v;s++)n(h[s].element).css({top:l+e*b})},_arrangeColumns:function(n,t,i,r){var h=r.start,c,u,y,e,p;n={element:n,slotIndex:h.index,start:t,end:t+i};var o,l=h.clientWidth,a=l*.1,s,w=r.events(),v=f.collidingEvents(w,n.start,n.end);for(r.addEvent(n),v.push(n),o=f.createColumns(v),c=(l-a)/o.length,u=0,y=o.length;u<y;u++)for(s=o[u].events,e=0,p=s.length;e<p;e++)s[e].element[0].style.width=c-4+"px",s[e].element[0].style.left=(this._isRtl?a:0)+h.offsetLeft+u*c+2+"px"},_positionEvent:function(n,t,i){var f=n.startTime||n.start,e=n.endTime||n.end,r=i.innerRect(f,e,!1),u=r.bottom-r.top-2;u<0&&(u=0);t.css({top:r.top,height:u});this._arrangeColumns(t,r.top,t[0].clientHeight,i)},_createEventElement:function(t,f,s,c){var rt=f?this.eventTemplate:this.allDayEventTemplate,ut=this.options,p=ut.editable,ft=this._isMobile(),et=p&&p.destroy!==!1&&!ft,ot=p&&p.resize!==!1,b=e(this.startDate()),v=e(this.endDate()),k=r(this.startTime()),w=r(this.endTime()),d=t._time("start"),g=t._time("end"),it,a,l,y,nt,tt;return k>=w&&(w=r(new Date(this.endTime().getTime()+u-1))),f||t.isAllDay||(v=new Date(v.getTime()+u)),a=t.start,l=t.end,t.isAllDay&&(l=e(t.end)),!o(e(a),b,v)&&!o(l,b,v)||f&&d<k&&g>w?it=!0:e(a)<b||f&&d<k?c=!0:(l>v&&!f||f&&g>w)&&(s=!0),y=this.eventResources(t),t.startTime&&(a=new Date(d),a=i.timezone.apply(a,"Etc/UTC")),t.endTime&&(l=new Date(g),l=i.timezone.apply(l,"Etc/UTC")),nt=h({},{ns:i.ns,resizable:ot,showDelete:et,middle:it,head:s,tail:c,singleDay:this._dates.length==1,resources:y,inverseColor:y&&y[0]?this._shouldInverseResourceColor(y[0]):!1},t,{start:a,end:l}),tt=n(rt(nt)),this.angular("compile",function(){return{elements:tt,data:[{dataItem:nt}]}}),tt},_isInTimeSlot:function(n){var o=this.startTime(),t=this.endTime(),f=n.startTime||n.start,e=n.endTime||n.end,s;return(r(t)===r(i.date.getDate(t))&&(t=i.date.getDate(t),c(t,u-1)),n._date("end")>n._date("start")&&(e=+n._date("end")+(u-1)),e=e-n._date("end"),f=f-n._date("start"),t=r(t),o=r(o),o===f&&f===e)?!0:(s=f!==t,l(f,o,t,s)||l(e,o,t,s)||l(o,f,e)||l(t,f,e))},_isInDateSlot:function(n){var e=this.groups[0],t=e.firstSlot().start,f=e.lastSlot().end-1,r=i.date.toUtcTime(n.start),u=i.date.toUtcTime(n.end);return(o(r,t,f)||o(u,t,f)||o(t,r,u)||o(f,r,u))&&(!o(u,t,t)||o(u,r,r)||n.isAllDay)},_updateAllDayHeaderHeight:function(n){var i,t;if(this._height!==n&&(this._height=n,i=this.element.find(".k-scheduler-header-all-day td"),i.length))for(i.parent().add(this.element.find(".k-scheduler-times-all-day").parent()).height(n),t=0;t<this.groups.length;t++)this.groups[t].refresh()},_renderEvents:function(n,t){for(var d=this.datesHeader.find(".k-scheduler-header-wrap > div"),i,h,a,f,o,r,l,s,p,k,c=0,b=n.length;c<b;c++)if(i=n[c],this._isInDateSlot(i))if(h=i.isAllDay||i.end.getTime()-i.start.getTime()>=u,a=h&&!this._isVerticallyGrouped()?d:this.content,h)this.options.allDaySlot&&(r=this.groups[t],r._continuousEvents||(r._continuousEvents=[]),o=r.slotRanges(i),o.length&&(f=this._createEventElement(i,!h),this._positionAllDayEvent(f,o[0]),w(r,o[0],f,!0),f.appendTo(a)));else if(this._isInTimeSlot(i))for(r=this.groups[t],r._continuousEvents||(r._continuousEvents=[]),o=r.slotRanges(i),l=o.length,s=0;s<l;s++){var e=o[s],v=i.start,y=i.end;l>1&&(s===0?y=e.end.endDate():s==l-1?v=e.start.startDate():(v=e.start.startDate(),y=e.end.endDate()));p=i.clone({start:v,end:y,startTime:i.startTime,endTime:i.endTime});this._isInTimeSlot(p)&&(k=e.head,f=this._createEventElement(i,!h,k,e.tail),f.appendTo(a),this._positionEvent(p,f,e),w(r,e,f,!1))}},render:function(t){var r,u;this._headerColumnCount=0;this._groups();this.element.find(".k-event").remove();t=new i.data.Query(t).sort([{field:"start",dir:"asc"},{field:"end",dir:"desc"}]).toArray();r=[];this._eventsByResource(t,this.groupedResources,r);var h=this,f=n.map(this._dates,function(t){return Math.max.apply(null,n.map(r,function(i){return n.grep(i,function(n){return n.isMultiDay()&&o(t,e(n.start),e(n.end))}).length}))}),s=Math.max.apply(null,f);for(this._updateAllDayHeaderHeight((s+1)*this._allDayHeaderHeight),u=0;u<r.length;u++)this._renderEvents(r[u],u);this.refreshLayout();this.trigger("activate")},_eventsByResource:function(n,t,r){var u=t[0],o,e,h,s;if(u)for(o=u.dataSource.view(),e=0;e<o.length;e++)h=this._resourceValue(u,o[e]),s=new i.data.Query(n).filter({field:u.field,operator:f.groupEqFilter(h)}).toArray(),t.length>1?this._eventsByResource(s,t.slice(1),r):r.push(s);else r.push(n)},_columnOffsetForResource:function(n){return this._columnCountForLevel(n)/this._columnCountForLevel(n-1)},_columnCountForLevel:function(n){var t=this.columnLevels[n];return t?t.length:0},_rowCountForLevel:function(n){var t=this.rowLevels[n];return t?t.length:0},clearSelection:function(){this.content.add(this.datesHeader).find(".k-state-selected").removeAttr("id").attr("aria-selected",!1).removeClass("k-state-selected")},_updateDirection:function(n,t,i,r,u){var o=n.isAllDay,f=t[0].start,e=t[t.length-1].end;i&&(u?o||f.index!==e.index||f.collectionIndex!==e.collectionIndex||(n.backward=r):(o&&f.index===e.index||!o&&f.collectionIndex===e.collectionIndex)&&(n.backward=r))},_changeViewPeriod:function(n,t,i){var e;if(!i){var f=t?this.previousDate():this.nextDate(),o=n.start,s=n.end;return n.start=new Date(f),n.end=new Date(f),e=n.isAllDay?u:r(s),c(n.start,r(o)),c(n.end,e),this._isVerticallyGrouped()||(n.groupIndex=t?this.groups.length-1:0),n.events=[],!0}}});h(!0,y,{MultiDayView:a,DayView:a.extend({options:{name:"DayView",title:"Day"},name:"day"}),WeekView:a.extend({options:{name:"WeekView",title:"Week",selectedDateFormat:"{0:D} - {1:D}"},name:"week",calculateDateRange:function(){for(var f=this.options.date,n=i.date.dayOfWeek(f,this.calendarInfo().firstDay,-1),u=[],t=0,r=7;t<r;t++)u.push(n),n=i.date.nextDay(n);this._render(u)}}),WorkWeekView:a.extend({options:{name:"WorkWeekView",title:"Work Week",selectedDateFormat:"{0:D} - {1:D}"},name:"workWeek",nextDate:function(){return i.date.dayOfWeek(i.date.nextDay(this.endDate()),this.options.workWeekStart,1)},previousDate:function(){return i.date.previousDay(this.startDate())},calculateDateRange:function(){for(var r=this.options.date,n=i.date.dayOfWeek(r,this.options.workWeekStart,-1),u=i.date.dayOfWeek(n,this.options.workWeekEnd,1),t=[];n<=u;)t.push(n),n=i.date.nextDay(n);this._render(t)}})})}(window.kendo.jQuery),window.kendo},typeof define=="function"&&define.amd?define:function(n,t){t()});
//# sourceMappingURL=kendo.scheduler.dayview.min.js.map
