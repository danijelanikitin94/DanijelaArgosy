(function(n,t){t(["./kendo.dataviz.chart"],n)})(function(){return function(n){function g(){}function pt(n){return g.prototype=n,new g}var e=window.kendo,nt=e.Class,tt=e.Observable,t=e.deepExtend,y=Math,l=n.proxy,a=e.util,it=a.last,rt=a.renderTemplate,i=e.dataviz,p=a.defined,ut=i.filterSeriesByType,ft=e.template,s=i.ui.Chart,et=i.Selection,v=i.addDuration,w=a.limitValue,b=i.lteDateIndex,r=i.toDate,o=i.toTime,ot=28,k="change",c="k-",st="drag",ht="dragEnd",h="_navigator",u=h,ct=i.EQUALLY_SPACED_SERIES,lt=3,at="zoom",vt="zoomEnd",yt=s.extend({init:function(t,i){n(t).addClass(c+"chart");s.fn.init.call(this,t,i)},_applyDefaults:function(n,r){var u=this,e=u.element.width()||i.DEFAULT_WIDTH,o={seriesDefaults:{categoryField:n.dateField},axisDefaults:{categoryAxis:{name:"default",majorGridLines:{visible:!1},labels:{step:2},majorTicks:{visible:!1},maxDateGroups:y.floor(e/ot)}}};r&&(r=t({},r,o));u._navigator||f.setup(n,r);s.fn._applyDefaults.call(u,n,r)},_initDataSource:function(n){var e=n||{},u=e.dataSource,c=u&&u.serverFiltering,l=[].concat(e.categoryAxis)[0],a=e.navigator||{},r=a.select,v=r&&r.from&&r.to,o,h;c&&v&&(o=[].concat(u.filter||[]),h=new i.DateCategoryAxis(t({baseUnit:"fit"},l,{categories:[r.from,r.to]})),u.filter=f.buildFilter(h.range().min,r.to).concat(o));s.fn._initDataSource.call(this,n)},options:{name:"StockChart",dateField:"date",axisDefaults:{categoryAxis:{type:"date",baseUnit:"fit",justified:!0},valueAxis:{narrowRange:!0,labels:{format:"C"}}},navigator:{select:{},seriesDefaults:{markers:{visible:!1},tooltip:{visible:!0,template:"#= kendo.toString(category, 'd') #"},line:{width:2}},hint:{},visible:!0},tooltip:{visible:!0},legend:{visible:!1}},_resize:function(){var n=this.options.transitions;this.options.transitions=!1;this._fullRedraw();this.options.transitions=n},_redraw:function(){var t=this,n=t._navigator;n&&n.dataSource?n.redrawSlaves():t._fullRedraw()},_fullRedraw:function(){var n=this,t=n._navigator;t||(t=n._navigator=new f(n));t._setRange();s.fn._redraw.call(n);t._initSelection()},_onDataChanged:function(){var n=this;s.fn._onDataChanged.call(n);n._dataBound=!0},_bindCategoryAxis:function(n,t,i){var e=this,f=e.options.categoryAxis,o=f.length,r;if(s.fn._bindCategoryAxis.apply(this,arguments),n.name===u)while(i<o)r=f[i++],r.pane==h&&(r.categories=n.categories)},_trackSharedTooltip:function(n){var t=this,r=t._plotArea,i=r.paneByPoint(n);i&&i.options.name===h?t._unsetActivePoint():s.fn._trackSharedTooltip.call(t,n)},destroy:function(){var n=this;n._navigator.destroy();s.fn.destroy.call(n)}}),f=tt.extend({init:function(n){var i=this;i.chart=n;i.options=t({},i.options,n.options.navigator);i._initDataSource();p(i.options.hint.visible)||(i.options.hint.visible=i.options.visible);n.bind(st,l(i._drag,i));n.bind(ht,l(i._dragEnd,i));n.bind(at,l(i._zoom,i));n.bind(vt,l(i._zoomEnd,i))},options:{},_initDataSource:function(){var n=this,i=n.options,t=i.autoBind,r=i.dataSource;p(t)||(t=n.chart.options.autoBind);n._dataChangedHandler=l(n._onDataChanged,n);r&&(n.dataSource=e.data.DataSource.create(r).bind(k,n._dataChangedHandler),t&&n.dataSource.fetch())},_onDataChanged:function(){for(var i=this,n=i.chart,o=n.options.series,a=o.length,s=n.options.categoryAxis,r,v=s.length,c=i.dataSource.view(),e,t,l,f=0;f<a;f++)e=o[f],e.axis==u&&n._isBindable(e)&&(e.data=c);for(r=0;r<v;r++)t=s[r],t.pane==h&&(t.name==u?(n._bindCategoryAxis(t,c,r),l=t.categories):t.categories=l);n._model&&(i.redraw(),i.filterAxes(),(!n.options.dataSource||n.options.dataSource&&n._dataBound)&&i.redrawSlaves())},destroy:function(){var n=this,t=n.dataSource;t&&t.unbind(k,n._dataChangeHandler);n.selection&&n.selection.destroy()},redraw:function(){this._redrawSelf();this._initSelection()},_initSelection:function(){var t=this,e=t.chart,f=t.options,i=t.mainAxis(),o=pt(i),s=i.range(),h=s.min,c=s.max,a=i.options.categories,l=t.options.select,u=t.selection,v=r(l.from),y=r(l.to);a.length!==0&&(u&&(u.destroy(),u.wrapper.remove()),o.box=i.box,u=t.selection=new et(e,o,{min:h,max:c,from:v,to:y,selectStart:n.proxy(t._selectStart,t),select:n.proxy(t._select,t),selectEnd:n.proxy(t._selectEnd,t),mousewheel:{zoom:"left"}}),f.hint.visible&&(t.hint=new d(e.element,{min:h,max:c,template:f.hint.template,format:f.hint.format})))},_setRange:function(){var c=this.chart._createPlotArea(!0),e=c.namedCategoryAxes[u],o=e.options,s=e.range(),t=s.min,i=v(s.max,o.baseUnitStep,o.baseUnit),h=this.options.select||{},f=r(h.from)||t,n;f<t&&(f=t);n=r(h.to)||i;n>i&&(n=i);this.options.select={from:f,to:n};this.filterAxes()},_redrawSelf:function(n){var t=this.chart._plotArea;t&&t.redraw(it(t.panes),n)},redrawSlaves:function(){var i=this,t=i.chart,n=t._plotArea,r=n.panes.slice(0,-1);n.srcSeries=t.options.series;n.redraw(r)},_drag:function(n){var t=this,c=t.chart,v=c._eventCoordinates(n.originalEvent),l=t.mainAxis(),u=l.range(),y=l.pane.box.containsPoint(v),p=c._plotArea.categoryAxis,a=n.axisRanges[p.options.name],f=t.options.select,e=t.selection,s,i,h;a&&!y&&e&&(s=f.from&&f.to?o(f.to)-o(f.from):o(e.options.to)-o(e.options.from),i=r(w(o(a.min),u.min,o(u.max)-s)),h=r(w(o(i)+s,o(u.min)+s,u.max)),t.options.select={from:i,to:h},t._liveDrag()&&(t.filterAxes(),t.redrawSlaves()),e.set(i,h),t.showHint(i,h))},_dragEnd:function(){var n=this;n.filterAxes();n.filterDataSource();n.redrawSlaves();n.hint&&n.hint.hide()},_liveDrag:function(){var t=e.support,i=t.touch,n=t.browser,r=n.mozilla,u=n.msie&&n.version<9;return!i&&!r&&!u},readSelection:function(){var n=this,r=n.selection,t=r.options,i=n.options.select;i.from=t.from;i.to=t.to},filterAxes:function(){for(var i=this,u=i.options.select||{},e=i.chart,f=e.options.categoryAxis,o=u.from,s=u.to,t,n=0;n<f.length;n++)t=f[n],t.pane!==h&&(t.min=r(o),t.max=r(s))},filterDataSource:function(){var r=this,e=r.options.select||{},o=r.chart,u=o.dataSource,s=u&&u.options.serverFiltering,n;r.dataSource&&s&&(n=new i.DateCategoryAxis(t({baseUnit:"fit"},o.options.categoryAxis[0],{categories:[e.from,e.to]})).options,u.filter(f.buildFilter(v(n.min,-n.baseUnitStep,n.baseUnit),v(n.max,n.baseUnitStep,n.baseUnit))))},_zoom:function(n){var t=this,c=t.chart,u=n.delta,f=c._plotArea.categoryAxis,r=t.options.select,i=t.selection,o=t.mainAxis().options.categories,s,h;i&&(s=b(i.options.from,o),h=b(i.options.to,o),n.originalEvent.preventDefault(),y.abs(u)>1&&(u*=lt),h-s>1?(i.expand(u),t.readSelection()):(f.options.min=r.from,r.from=f.scaleRange(-n.delta).min),e.support.touch||(t.filterAxes(),t.redrawSlaves()),i.set(r.from,r.to),t.showHint(t.options.select.from,t.options.select.to))},_zoomEnd:function(n){this._dragEnd(n)},showHint:function(n,t){var i=this,r=i.chart,u=r._plotArea;i.hint&&i.hint.show(n,t,u.backgroundBox())},_selectStart:function(n){var t=this.chart;t._selectStart.call(t,n)},_select:function(n){var t=this,i=t.chart;t.showHint(n.from,n.to);i._select.call(i,n)},_selectEnd:function(n){var t=this,i=t.chart;t.hint&&t.hint.hide();t.readSelection();t.filterAxes();t.filterDataSource();t.redrawSlaves();i._selectEnd.call(i,n)},mainAxis:function(){var n=this.chart._plotArea;if(n)return n.namedCategoryAxes[u]}}),d;f.setup=function(n,i){n=n||{};i=i||{};var r=t({},i.navigator,n.navigator),e=n.panes=[].concat(n.panes),u=t({},r.pane,{name:h});r.visible||(u.visible=!1,u.height=.1);e.push(u);f.attachAxes(n,r);f.attachSeries(n,r,i)};f.attachAxes=function(n,i){var e,o,c=i.series||[];e=n.categoryAxis=[].concat(n.categoryAxis);o=n.valueAxis=[].concat(n.valueAxis);var l=ut(c,ct),s=l.length===0,r=t({type:"date",pane:h,roundToBaseUnit:!s,justified:s,_collapse:!1,tooltip:{visible:!1},labels:{step:1},autoBind:!i.dataSource,autoBaseUnitSteps:{minutes:[1],hours:[1,2],days:[1,2],weeks:[],months:[1],years:[1]},_overlap:!1}),f=i.categoryAxis;e.push(t({},r,{maxDateGroups:200},f,{name:u,baseUnit:"fit",baseUnitStep:"auto",labels:{visible:!1},majorTicks:{visible:!1}}),t({},r,f,{name:u+"_labels",maxDateGroups:20,baseUnitStep:"auto",autoBaseUnitSteps:{minutes:[]},majorTicks:{visible:!0}}),t({},r,f,{name:u+"_ticks",maxDateGroups:200,majorTicks:{visible:!0,width:.5},labels:{visible:!1,mirror:!0}}));o.push(t({name:u,pane:h,majorGridLines:{visible:!1},visible:!1},i.valueAxis))};f.attachSeries=function(n,i,r){for(var s=n.series=n.series||[],e=[].concat(i.series||[]),o=r.seriesColors,h=i.seriesDefaults,f=0;f<e.length;f++)s.push(t({color:o[f%o.length],categoryField:i.dateField,visibleInLegend:!1,tooltip:{visible:!1}},h,e[f],{axis:u,categoryAxis:u,autoBind:!i.dataSource}))};f.buildFilter=function(n,t){return[{field:"Date",operator:"gte",value:r(n)},{field:"Date",operator:"lt",value:r(t)}]};d=nt.extend({init:function(i,r){var u=this;u.options=t({},u.options,r);u.container=i;u.chartPadding={top:parseInt(i.css("paddingTop"),10),left:parseInt(i.css("paddingLeft"),10)};u.template=u.template;u.template||(u.template=u.template=rt("<div class='"+c+"navigator-hint' style='display: none; position: absolute; top: 1px; left: 1px;'><div class='"+c+"tooltip "+c+"chart-tooltip'>&nbsp;<\/div><div class='"+c+"scroll' /><\/div>"));u.element=n(u.template()).appendTo(i)},options:{format:"{0:d} - {1:d}",hideDelay:500},show:function(n,t,i){var u=this,y=r(o(n)+o(t-n)/2),f=u.options,h=e.format(u.options.format,n,t),s=u.element.find("."+c+"tooltip"),p=u.element.find("."+c+"scroll"),l=i.width()*.4,a=i.center().x-l,w=i.center().x,b=w-a,k=f.max-f.min,d=b/k,g=y-f.min,v;u._hideTimeout&&clearTimeout(u._hideTimeout);u._visible||(u.element.stop(!1,!0).css("visibility","hidden").show(),u._visible=!0);f.template&&(v=ft(f.template),h=v({from:n,to:t}));s.html(h).css({left:i.center().x-s.outerWidth()/2,top:i.y1});p.css({width:l,left:a+g*d,top:i.y1+parseInt(s.css("margin-top"),10)+parseInt(s.css("border-top-width"),10)+s.height()/2});u.element.css("visibility","visible")},hide:function(){var n=this;n._hideTimeout&&clearTimeout(n._hideTimeout);n._hideTimeout=setTimeout(function(){n._visible=!1;n.element.fadeOut("slow")},n.options.hideDelay)}});i.ui.plugin(yt);t(i,{Navigator:f})}(window.kendo.jQuery),window.kendo},typeof define=="function"&&define.amd?define:function(n,t){t()});
//# sourceMappingURL=kendo.dataviz.stock.min.js.map
