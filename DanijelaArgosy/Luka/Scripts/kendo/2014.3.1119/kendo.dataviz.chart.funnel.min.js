(function(n,t){t(["./kendo.dataviz.chart","./kendo.drawing"],n)})(function(){return function(n,t){var r=window.kendo,f=r.deepExtend,h=n.extend,d=r.isFunction,g=r.template,c=r.util,nt=c.append,l=r.drawing,u=r.geometry,i=r.dataviz,tt=r.drawing.Color,e=i.ChartElement,it=i.PieChartMixin,a=i.PlotAreaBase,rt=i.PlotAreaFactory,ut=i.Point2D,v=i.Box2D,y=i.SeriesBinder,ft=i.TextBox,p=i.autoFormat,et=i.evalOptions,w=c.limitValue,ot=i.seriesTotal,b="funnel",st="black",k="white",ht=a.extend({render:function(){var n=this,t=n.series;n.createFunnelChart(t)},createFunnelChart:function(n){var i=this,t=n[0],r=new o(i,{series:n,legend:i.options.legend,neckRatio:t.neckRatio,dynamicHeight:t.dynamicHeight,dynamicSlope:t.dynamicSlope,segmentSpacing:t.segmentSpacing,highlight:t.highlight});i.appendChart(r)},appendChart:function(n,t){a.fn.appendChart.call(this,n,t);nt(this.options.legend.items,n.legendItems)}}),o=e.extend({init:function(n,t){var i=this;e.fn.init.call(i,t);i.plotArea=n;i.points=[];i.labels=[];i.legendItems=[];i.render()},options:{neckRatio:.3,width:300,dynamicSlope:!1,dynamicHeight:!0,segmentSpacing:0,labels:{visible:!1,align:"center",position:"center"}},formatPointValue:function(n,t){return p(t,n.value)},render:function(){var e=this,v=e.options,l=e.plotArea.options.seriesColors||[],p=l.length,r=v.series[0],o,n,s=r.data,a,u,i,h,c;if(s)for(a=ot(r),i=0;i<s.length;i++)(o=y.current.bindPoint(r,i),u=o.valueFields.value,u!==null&&u!==t)&&(n=o.fields,d(r.color)||(r.color=n.color||l[i%p]),n=f({index:i,owner:e,series:r,category:n.category,dataItem:s[i],percentage:Math.abs(u)/a,visibleInLegend:n.visibleInLegend,visible:n.visible},n),h=e.createSegment(u,n),c=e.createLabel(u,n),h&&c&&h.append(c))},evalSegmentOptions:function(n,t,i){var r=i.series;et(n,{value:t,series:r,dataItem:i.dataItem,index:i.index},{defaults:r._defaults,excluded:["data"]})},createSegment:function(n,t){var r=this,i,u;return r.createLegendItem(n,t),t.visible!==!1?(u=f({},t.series),r.evalSegmentOptions(u,n,t),i=new s(n,u,t),h(i,t),r.append(i),r.points.push(i),i):void 0},createLabel:function(n,t){var u=this,e=t.series,c=t.dataItem,i=f({},u.options.labels,e.labels),r=n,o,s,h;if(i.visible)return i.template?(s=g(i.template),r=s({dataItem:c,value:n,percentage:t.percentage,category:t.category,series:e})):i.format&&(r=p(i.format,r)),i.color||i.align!=="center"||(h=new tt(e.color).percBrightness(),i.color=h>180?st:k),u.evalSegmentOptions(i,n,t),o=new ft(r,f({vAlign:i.position},i)),u.labels.push(o),o},labelPadding:function(){for(var i=this.labels,f,r,u,n={left:0,right:0},t=0;t<i.length;t++)f=i[t],r=f.options.align,r!=="center"&&(u=i[t].box.width(),r==="left"?n.left=Math.max(n.left,u):n.right=Math.max(n.right,u));return n},reflow:function(t){var d=this,l=d.options,c=d.points,a=c.length,g=l.neckRatio<=1,r,v,p,e,y,o,i=t.clone().unpad(d.labelPadding()),f=i.width(),s=0,h=g?0:(f-f/l.neckRatio)/2,nt=l.segmentSpacing,et=l.dynamicSlope,b=i.height()-nt*(a-1),ot=g?l.neckRatio*f:f,tt,k,it,rt,ft,ut;if(a){if(et)for(tt=c[0],k=tt,n.each(c,function(n,t){t.percentage>k.percentage&&(k=t)}),p=tt.percentage/k.percentage*f,h=(f-p)/2,r=0;r<a;r++)y=c[r].percentage,it=c[r+1],rt=it?it.percentage:y,e=c[r].points=[],v=l.dynamicHeight?b*y:b/a,o=(f-p*(rt/y))/2,o=w(o,0,f),e.push(new u.Point(i.x1+h,i.y1+s)),e.push(new u.Point(i.x1+f-h,i.y1+s)),e.push(new u.Point(i.x1+f-o,i.y1+v+s)),e.push(new u.Point(i.x1+o,i.y1+v+s)),h=o,s+=v+nt,p*=rt/y,p=w(p,0,f);else for(ft=g?f:f-h*2,ut=(ft-ot)/2,r=0;r<a;r++)e=c[r].points=[],y=c[r].percentage,o=l.dynamicHeight?ut*y:ut/a,v=l.dynamicHeight?b*y:b/a,e.push(new u.Point(i.x1+h,i.y1+s)),e.push(new u.Point(i.x1+f-h,i.y1+s)),e.push(new u.Point(i.x1+f-h-o,i.y1+v+s)),e.push(new u.Point(i.x1+h+o,i.y1+v+s)),h+=o,s+=v+nt;for(r=0;r<a;r++)c[r].reflow(t)}}}),s;f(o.fn,it);s=e.extend({init:function(n,t,i){var r=this;e.fn.init.call(r,t);r.value=n;r.options.index=i.index},options:{color:k,border:{width:1}},reflow:function(n){var i=this,t=i.points,r=i.children[0];i.box=new v(t[0].x,t[0].y,t[1].x,t[2].y);r&&r.reflow(new v(n.x1,t[0].y,n.x2,t[2].y))},createVisual:function(){e.fn.createVisual.call(this);var n=this.options,t=n.border,i=l.Path.fromPoints(this.points,{fill:{color:n.color,opacity:n.opacity},stroke:{color:t.color,opacity:t.opacity,width:t.width}}).close();this.visual.append(i)},createHighlight:function(n){return l.Path.fromPoints(this.points,n)},highlightOverlay:function(n,t){var u=this.options,i=u.highlight||{};if(i.visible!==!1){var r=i.border||{},f=h({},t,{fill:i.color,stroke:r.color,strokeOpacity:r.opacity,strokeWidth:r.width,fillOpacity:i.opacity});return n.createPolyline(this.points,!0,f)}},tooltipAnchor:function(n){var t=this.box;return new ut(t.center().x-n/2,t.y1)},formatValue:function(n){var t=this;return t.owner.formatPointValue(t,n)}});f(s.fn,i.PointEventsMixin);rt.current.register(ht,[b]);y.current.register([b],["value"],["category","color","visibleInLegend","visible"]);f(i,{FunnelChart:o})}(window.kendo.jQuery),window.kendo},typeof define=="function"&&define.amd?define:function(n,t){t()});
//# sourceMappingURL=kendo.dataviz.chart.funnel.min.js.map
