(function(n,t){t(["./kendo.data","./kendo.userevents","./kendo.tooltip","./kendo.mobile.scroller","./kendo.drawing","./kendo.core","./kendo.draganddrop"],n)})(function(){return function(n){function r(n){return typeof n!==y}function p(n,i){var r=w(i);return t.round(n*r)/r}function w(n){return n?t.pow(10,n):1}function b(n,i,r){return t.max(t.min(n,r),i)}function k(n){return n*h}function d(n){return n/h}function g(n){return typeof n=="number"&&!isNaN(n)}function nt(n,t){return r(n)?n:t}function tt(n){return n*n}function c(n){var t=[];for(var i in n)t.push(i+n[i]);return t.sort().join("")}function l(n){for(var t=2166136261,i=0;i<n.length;++i)t+=(t<<1)+(t<<4)+(t<<7)+(t<<8)+(t<<24),t^=n.charCodeAt(i);return t>>>0}function it(n){return l(c(n))}function o(n){for(var o=n.length,r=u,e=f,i=0;i<o;i++)e=t.max(e,n[i]),r=t.min(r,n[i]);return{min:r,max:e}}function rt(n){return o(n).min}function ut(n){return o(n).max}function ft(n){return s(n).min}function et(n){return s(n).max}function s(n){for(var i,r=u,e=f,o=0,s=n.length;o<s;o++)i=n[o],i!==null&&isFinite(i)&&(r=t.min(r,i),e=t.max(e,i));return{min:r===u?undefined:r,max:e===f?undefined:e}}function ot(n){if(n)return n[n.length-1]}function st(n,t){return n.push.apply(n,t),n}function ht(n){return i.template(n,{useWithBlock:!1,paramName:"d"})}function a(n,t){return r(t)&&t!==null?" "+n+"='"+t+"' ":""}function ct(n){for(var i="",t=0;t<n.length;t++)i+=a(n[t][0],n[t][1]);return i}function lt(n){for(var u,i="",t=0;t<n.length;t++)u=n[t][1],r(u)&&(i+=n[t][0]+":"+u+";");if(i!=="")return i}function at(n){return typeof n!="string"&&(n+="px"),n}function vt(n){var u=[],r,t;if(n)for(r=i.toHyphens(n).split("-"),t=0;t<r.length;t++)u.push("k-pos-"+r[t]);return u.join(" ")}function yt(n){return n===""||n===null||n==="none"||n==="transparent"||!r(n)}var t=Math,i=window.kendo,v=i.deepExtend,pt=i.dataviz,h=t.PI/180,u=Number.MAX_VALUE,f=-Number.MAX_VALUE,y="undefined",wt=n.inArray,bt=[].push,kt=[].pop,dt=[].splice,gt=[].shift,ni=[].slice,ti=[].unshift,e=Date.now;e||(e=function(){return(new Date).getTime()});v(i,{util:{MAX_NUM:u,MIN_NUM:f,append:st,arrayLimits:o,arrayMin:rt,arrayMax:ut,defined:r,deg:d,hashKey:l,hashObject:it,isNumber:g,isTransparent:yt,last:ot,limitValue:b,now:e,objectKey:c,round:p,rad:k,renderAttr:a,renderAllAttr:ct,renderPos:vt,renderSize:at,renderStyle:lt,renderTemplate:ht,sparseArrayLimits:s,sparseArrayMin:ft,sparseArrayMax:et,sqr:tt,valueOrDefault:nt}});i.dataviz.util=i.util}(window.kendo.jQuery),function(){var t=Math,d=t.abs,y=t.atan,h=t.atan2,u=t.cos,p=t.max,w=t.min,r=t.sin,b=t.tan,e=window.kendo,k=e.Class,a=e.dataviz,g=e.deepExtend,o=e.util,nt=o.defined,c=o.deg,s=o.rad,v=o.round,i=o.sqr,l=o.valueOrDefault,n=k.extend({init:function(n,t){arguments.length===1?(this.lat=n[0],this.lng=n[1]):(this.lat=n,this.lng=t)},DISTANCE_ITERATIONS:100,DISTANCE_CONVERGENCE:1e-12,DISTANCE_PRECISION:2,FORMAT:"{0:N6},{1:N6}",toArray:function(){return[this.lat,this.lng]},equals:function(n){return n&&n.lat===this.lat&&n.lng===this.lng},clone:function(){return new n(this.lat,this.lng)},round:function(n){return this.lng=v(this.lng,n),this.lat=v(this.lat,n),this},wrap:function(){return this.lng=this.lng%180,this.lat=this.lat%90,this},distanceTo:function(n,t){return this.greatCircleTo(n,t).distance},destination:function(i,f,o){f=s(f);o=o||a.map.datums.WGS84;var l=s(this.lat),p=s(this.lng),v=i/e.dataviz.map.datums.WGS84.a,y=t.asin(r(l)*u(v)+u(l)*r(v)*u(f)),w=p+h(r(f)*r(v)*u(l),u(v)-r(l)*r(y));return new n(c(y),c(w))},greatCircleTo:function(f,e){var ct,ot;if(f=n.create(f),e=e||a.map.datums.WGS84,!f||this.clone().round(8).equals(f.clone().round(8)))return{distance:0,azimuthFrom:0,azimuthTo:0};for(var bt=e.a,st=e.b,nt=e.f,at=s(f.lng-this.lng),vt=y((1-nt)*b(s(this.lat))),tt=r(vt),w=u(vt),yt=y((1-nt)*b(s(f.lat))),it=r(yt),p=u(yt),rt=at,pt,kt=this.DISTANCE_ITERATIONS,wt=!1,ut,ft,k,g,et,o,ht;!wt&&kt-->0;)ut=r(rt),ft=u(rt),k=t.sqrt(i(p*ut)+i(w*it-tt*p*ft)),et=tt*it+w*p*ft,ht=h(k,et),ct=w*p*ut/k,g=1-i(ct),o=0,g!==0&&(o=et-2*tt*it/g),pt=rt,ot=nt/16*g*(4+nt*(4-3*g)),rt=at+(1-ot)*nt*ct*(ht+ot*k*(o+ot*et*(-1+2*i(o)))),wt=d(rt-pt)<=this.DISTANCE_CONVERGENCE;var l=g*(i(bt)-i(st))/i(st),dt=1+l/16384*(4096+l*(-768+l*(320-175*l))),lt=l/1024*(256+l*(-128+l*(74-47*l))),gt=lt*k*(o+lt/4*(et*(-1+2*i(o))-lt/6*o*(-3+4*i(k))*(-3+4*i(o)))),ni=h(p*ut,w*it-tt*p*ft),ti=h(w*ut,-tt*p+w*it*ft);return{distance:v(st*dt*(ht-gt),this.DISTANCE_PRECISION),azimuthFrom:c(ni),azimuthTo:c(ti)}}}),f;n.fn.toString=function(){return e.format(this.FORMAT,this.lng,this.lat)};n.fromLngLat=function(t){return new n(t[1],t[0])};n.fromLatLng=function(t){return new n(t[0],t[1])};n.create=function(t,i){if(nt(t))return t instanceof n?t.clone():arguments.length===1&&t.length===2?n.fromLatLng(t):new n(t,i)};f=k.extend({init:function(t,i){t=n.create(t);i=n.create(i);t.lng+180>i.lng+180&&t.lat+90<i.lat+90?(this.se=t,this.nw=i):(this.se=i,this.nw=t)},contains:function(n){var t=this.nw,i=this.se,r=l(n.lng,n[1]),u=l(n.lat,n[0]);return n&&r+180>=t.lng+180&&r+180<=i.lng+180&&u+90>=i.lat+90&&u+90<=t.lat+90},center:function(){var t=this.nw,i=this.se,r=t.lng+(i.lng-t.lng)/2,u=t.lat+(i.lat-t.lat)/2;return new n(u,r)},containsAny:function(n){for(var t=!1,i=0;i<n.length;i++)t=t||this.contains(n[i]);return t},include:function(n){var t=this.nw,i=this.se,r=l(n.lng,n[1]),u=l(n.lat,n[0]);t.lng=w(t.lng,r);t.lat=p(t.lat,u);i.lng=p(i.lng,r);i.lat=w(i.lat,u)},includeAll:function(n){for(var t=0;t<n.length;t++)this.include(n[t])},edges:function(){var t=this.nw,i=this.se;return{nw:this.nw,ne:new n(t.lat,i.lng),se:this.se,sw:new n(i.lat,t.lng)}},toArray:function(){var t=this.nw,i=this.se;return[t,new n(t.lat,i.lng),i,new n(i.lat,t.lng)]},overlaps:function(n){return this.containsAny(n.toArray())||n.containsAny(this.toArray())}});f.World=new f([90,-180],[-90,180]);f.create=function(n,t){return n instanceof f?n:n&&t?new f(n,t):n&&n.length===4&&!t?new f([n[0],n[1]],[n[2],n[3]]):void 0};g(a,{map:{Extent:f,Location:n}})}(window.kendo.jQuery),function(){var n=window.kendo,t=n.ui.Widget,r=n.template,e=n.dataviz,i=n.util.valueOrDefault,u=n.util.defined,f=t.extend({init:function(n,i){t.fn.init.call(this,n,i);this._initOptions(i);this.items=[];this.element.addClass("k-widget k-attribution")},options:{name:"Attribution",separator:"&nbsp;|&nbsp;",itemTemplate:"#= text #"},filter:function(n,t){this._extent=n;this._zoom=t;this._render()},add:function(n){u(n)&&(typeof n=="string"&&(n={text:n}),this.items.push(n),this._render())},remove:function(n){for(var i,r=[],t=0;t<this.items.length;t++)i=this.items[t],i.text!==n&&r.push(i);this.items=r;this._render()},clear:function(){this.items=[];this.element.empty()},_render:function(){for(var u,i,n=[],f=r(this.options.itemTemplate),t=0;t<this.items.length;t++)u=this.items[t],i=this._itemText(u),i!==""&&n.push(f({text:i}));n.length>0?this.element.empty().append(n.join(this.options.separator)).show():this.element.hide()},_itemText:function(n){var t="",i=this._inZoomLevel(n.minZoom,n.maxZoom),r=this._inArea(n.extent);return i&&r&&(t+=n.text),t},_inZoomLevel:function(n,t){return n=i(n,-Number.MAX_VALUE),t=i(t,Number.MAX_VALUE),this._zoom>n&&this._zoom<t},_inArea:function(n){var t=!0;return n&&(t=n.contains(this._extent)),t}});n.dataviz.ui.plugin(f)}(window.kendo.jQuery),function(n){function r(n){return t.format('<button class="k-button k-navigator-{0}"><span class="k-icon k-i-arrow-{0}"/><\/button>',n)}var t=window.kendo,u=t.ui.Widget,i=t.keys,f=n.proxy,e=".kendoNavigator",o=r("n")+r("e")+r("s")+r("w"),s=u.extend({init:function(n,i){u.fn.init.call(this,n,i);this._initOptions(i);this.element.addClass("k-widget k-header k-shadow k-navigator").append(o).on("click"+e,".k-button",f(this,"_click"));var r=this.element.parent().closest("["+t.attr("role")+"]");this._keyroot=r.length>0?r:this.element;this._tabindex(this._keyroot);this._keydown=f(this._keydown,this);this._keyroot.on("keydown",this._keydown)},options:{name:"Navigator",panStep:1},events:["pan"],dispose:function(){this._keyroot.off("keydown",this._keydown)},_pan:function(n,t){var i=this.options.panStep;this.trigger("pan",{x:n*i,y:t*i})},_click:function(t){var r=0,u=0,i=n(t.currentTarget);i.is(".k-navigator-n")?u=1:i.is(".k-navigator-s")?u=-1:i.is(".k-navigator-e")?r=1:i.is(".k-navigator-w")&&(r=-1);this._pan(r,u);t.preventDefault()},_keydown:function(n){switch(n.which){case i.UP:this._pan(0,1);n.preventDefault();break;case i.DOWN:this._pan(0,-1);n.preventDefault();break;case i.RIGHT:this._pan(1,0);n.preventDefault();break;case i.LEFT:this._pan(-1,0);n.preventDefault()}}});t.dataviz.ui.plugin(s)}(window.kendo.jQuery),function(n){function f(n,i){return t.format('<button class="k-button k-zoom-{0}" title="zoom-{0}">{1}<\/button>',n,i)}var t=window.kendo,i=t.ui.Widget,r=t.keys,u=n.proxy,e=".kendoZoomControl",o=f("in","+")+f("out","-"),s=187,h=189,c=61,l=173,a=i.extend({init:function(n,r){i.fn.init.call(this,n,r);this._initOptions(r);this.element.addClass("k-widget k-zoom-control k-button-wrap k-buttons-horizontal").append(o).on("click"+e,".k-button",u(this,"_click"));var f=this.element.parent().closest("["+t.attr("role")+"]");this._keyroot=f.length>0?f:this.element;this._tabindex(this._keyroot);this._keydown=u(this._keydown,this);this._keyroot.on("keydown",this._keydown)},options:{name:"ZoomControl",zoomStep:1},events:["change"],_change:function(n){var t=this.options.zoomStep;this.trigger("change",{delta:n*t})},_click:function(t){var r=n(t.currentTarget),i=1;r.is(".k-zoom-out")&&(i=-1);this._change(i);t.preventDefault()},_keydown:function(n){switch(n.which){case r.NUMPAD_PLUS:case s:case c:this._change(1);break;case r.NUMPAD_MINUS:case h:case l:this._change(-1)}}});t.dataviz.ui.plugin(a)}(window.kendo.jQuery),function(){var n=Math,f=n.atan,l=n.exp,a=n.pow,v=n.sin,y=n.log,p=n.tan,t=window.kendo,i=t.Class,w=t.dataviz,rt=t.deepExtend,e=t.geometry,b=e.Point,ut=w.map,k=ut.Location,o=t.util,s=o.rad,d=o.deg,r=o.limitValue,u=n.PI,h=u/2,g=u/4,ft=u/180,nt={a:6378137,b:6356752.3142451793,f:.0033528106647474805,e:.081819190842621486},c=i.extend({init:function(n){this._initOptions(n)},MAX_LNG:180,MAX_LAT:85.0840590501,INVERSE_ITERATIONS:15,INVERSE_CONVERGENCE:1e-12,options:{centralMeridian:0,datum:nt},forward:function(n,t){var i=this,u=i.options,f=u.datum,e=f.a,o=u.centralMeridian,h=r(n.lat,-i.MAX_LAT,i.MAX_LAT),c=t?r(n.lng,-i.MAX_LNG,i.MAX_LNG):n.lng,l=s(c-o)*e,a=i._projectLat(h);return new b(l,a)},_projectLat:function(n){var t=this.options.datum,i=t.e,f=t.a,r=s(n),e=p(g+r/2),u=i*v(r),o=a((1-u)/(1+u),i/2);return f*y(e*o)},inverse:function(n,t){var i=this,f=i.options,e=f.datum,o=e.a,s=f.centralMeridian,u=n.x/(ft*o)+s,h=r(i._inverseY(n.y),-i.MAX_LAT,i.MAX_LAT);return t&&(u=r(u,-i.MAX_LNG,i.MAX_LNG)),new k(h,u)},_inverseY:function(t){for(var r=this,e=r.options.datum,p=e.a,o=e.e,w=o/2,s=l(-t/p),i=h-2*f(s),u=0;u<=r.INVERSE_ITERATIONS;u++){var c=o*v(i),b=a((1-c)/(1+c),w),y=h-2*f(s*b)-i;if(i+=y,n.abs(y)<=r.INVERSE_CONVERGENCE)break}return d(i)}}),tt=c.extend({MAX_LAT:85.0511287798,_projectLat:function(n){var t=this.options.datum.a,i=s(n),r=p(g+i/2);return t*y(r)},_inverseY:function(n){var t=this.options.datum.a,i=l(-n/t);return d(h-2*f(i))}}),it=i.extend({forward:function(n){return new b(n.lng,n.lat)},inverse:function(n){return new k(n.y,n.x)}}),et=i.extend({init:function(){var t=this,i=t._proj=new tt,n=this.c=2*u*i.options.datum.a;this._tm=e.transform().translate(.5,.5).scale(1/n,-1/n);this._itm=e.transform().scale(n,-n).translate(-.5,-.5)},toPoint:function(n,t,i){var r=this._proj.forward(n,i);return r.transform(this._tm).scale(t||1)},toLocation:function(n,t,i){return n=n.clone().scale(1/(t||1)).transform(this._itm),this._proj.inverse(n,i)}}),ot=i.extend({init:function(){this._proj=new c},toPoint:function(n){return this._proj.forward(n)},toLocation:function(n){return this._proj.inverse(n)}}),st=i.extend({init:function(){this._proj=new it},toPoint:function(n){return this._proj.forward(n)},toLocation:function(n){return this._proj.inverse(n)}});rt(w,{map:{crs:{EPSG3395:ot,EPSG3857:et,EPSG4326:st},datums:{WGS84:nt},projections:{Equirectangular:it,Mercator:c,SphericalMercator:tt}}})}(window.kendo.jQuery),function(n){var t=n.proxy,c=n.noop,i=window.kendo,e=i.Class,r=i.dataviz,o=i.deepExtend,s=r.map.Extent,u=i.util,f=u.defined,l=u.valueOrDefault,h=e.extend({init:function(i,r){this._initOptions(r);this.map=i;this.element=n("<div class='k-layer'><\/div>").css({zIndex:this.options.zIndex,opacity:this.options.opacity}).appendTo(i.scrollElement);this._beforeReset=t(this._beforeReset,this);this._reset=t(this._reset,this);this._resize=t(this._resize,this);this._panEnd=t(this._panEnd,this);this._activate();this._updateAttribution()},destroy:function(){this._deactivate()},show:function(){this.reset();this._activate();this._applyExtent(!0)},hide:function(){this._deactivate();this._setVisibility(!1)},reset:function(){this._beforeReset();this._reset()},_reset:function(){this._applyExtent()},_beforeReset:n.noop,_resize:n.noop,_panEnd:function(){this._applyExtent()},_applyExtent:function(){var n=this.options,t=this.map.zoom(),r=!f(n.minZoom)||t>=n.minZoom,u=!f(n.maxZoom)||t<=n.maxZoom,i=s.create(n.extent),e=!i||i.overlaps(this.map.extent());this._setVisibility(r&&u&&e)},_setVisibility:function(n){this.element.css("display",n?"":"none")},_activate:function(){var n=this.map;n.bind("beforeReset",this._beforeReset);n.bind("reset",this._reset);n.bind("resize",this._resize);n.bind("panEnd",this._panEnd)},_deactivate:function(){var n=this.map;n.unbind("beforeReset",this._beforeReset);n.unbind("reset",this._reset);n.unbind("resize",this._resize);n.unbind("panEnd",this._panEnd)},_updateAttribution:function(){var n=this.map.attribution;n&&n.add(this.options.attribution)}});o(r,{map:{layers:{Layer:h}}})}(window.kendo.jQuery),function(n){var i=Math,t=window.kendo,r=t.deepExtend,u=n.inArray,f={observers:function(){return this._observers=this._observers||[],this._observers},addObserver:function(n){return this._observers?this._observers.push(n):this._observers=[n],this},removeObserver:function(n){var t=this.observers(),i=u(n,t);return i!=-1&&t.splice(i,1),this},trigger:function(n,t){var r=this._observers,u,i;if(r&&!this._suspended)for(i=0;i<r.length;i++)u=r[i],u[n]&&u[n](t);return this},optionsChange:function(n){this.trigger("optionsChange",n)},geometryChange:function(n){this.trigger("geometryChange",n)},suspend:function(){return this._suspended=(this._suspended||0)+1,this},resume:function(){return this._suspended=i.max((this._suspended||0)-1,0),this},_observerField:function(n,t){this[n]&&this[n].removeObserver(this);this[n]=t;t.addObserver(this)}};r(t,{mixins:{ObserversMixin:f}})}(window.kendo.jQuery),function(n){function ut(n){return n===null?null:n instanceof w?n:new w(n)}function nt(n){return n&&h.isFunction(n.matrix)?n.matrix():n}function ft(n,t,r,u){var f=0,e=0;return u&&(f=i.atan2(u.c*r,u.a*t),u.b!==0&&(e=i.atan2(u.d*r,u.b*t))),{x:f,y:e}}function et(n,t){while(n<t)n+=90;return n}function k(n,t){for(var i,u,r=0;r<t.length;r++)i=t[r],u=i.charAt(0).toUpperCase()+i.substring(1,i.length),n["set"+u]=ot(i),n["get"+u]=st(i)}function ot(n){return function(t){return this[n]!==t&&(this[n]=t,this.geometryChange()),this}}function st(n){return function(){return this[n]}}function ht(n,t,r){n>t&&(t+=360);var u=i.abs(t-n);return r||(u=360-u),u}function d(n,t,r,f,e,o){var s=u((e-n)/r,3),h=u((o-t)/f,3);return u(g(i.atan2(h,s)))}function ct(n,r,u,f,e,s,h,c){var l,a,b,tt,k,v,g,y;if(r!==f){var et=u-n,it=f-r,p=o(e,2),w=o(s,2),rt=(w*et*(n+u)+p*it*(r+f))/(2*p*it),ot=rt-f,nt=-(et*w)/(p*it);k=1/p+o(nt,2)/w;v=2*(nt*ot/w-u/p);g=o(u,2)/p+o(ot,2)/w-1;y=i.sqrt(o(v,2)-4*k*g);l=(-v-y)/(2*k);a=rt+nt*l;b=(-v+y)/(2*k);tt=rt+nt*b}else if(n!==u)v=-2*f,g=o((u-n)*s/(2*e),2)+o(f,2)-o(s,2),y=i.sqrt(o(v,2)-4*g),l=b=(n+u)/2,a=(-v-y)/2,tt=(-v+y)/2;else return!1;var ut=d(l,a,e,s,n,r),ft=d(l,a,e,s,u,f),st=ht(ut,ft,c);return(h&&st<=180||!h&&st>180)&&(l=b,a=tt,ut=d(l,a,e,s,n,r),ft=d(l,a,e,s,u,f)),{center:new t(l,a),startAngle:ut,endAngle:ft}}var i=Math,o=i.pow,lt=n.inArray,h=window.kendo,l=h.Class,a=h.deepExtend,p=h.mixins.ObserversMixin,s=h.util,c=s.defined,v=s.rad,g=s.deg,u=s.round,tt=i.PI/2,it=s.MIN_NUM,rt=s.MAX_NUM,t=l.extend({init:function(n,t){this.x=n||0;this.y=t||0},equals:function(n){return n&&n.x===this.x&&n.y===this.y},clone:function(){return new t(this.x,this.y)},rotate:function(n,t){return this.transform(ut().rotate(n,t))},translate:function(n,t){return this.x+=n,this.y+=t,this.geometryChange(),this},translateWith:function(n){return this.translate(n.x,n.y)},move:function(n,t){return this.x=this.y=0,this.translate(n,t)},scale:function(n,t){return c(t)||(t=n),this.x*=n,this.y*=t,this.geometryChange(),this},scaleCopy:function(n,t){return this.clone().scale(n,t)},transform:function(n){var t=nt(n),i=this.x,r=this.y;return this.x=t.a*i+t.c*r+t.e,this.y=t.b*i+t.d*r+t.f,this.geometryChange(),this},transformCopy:function(n){var t=this.clone();return n&&t.transform(n),t},distanceTo:function(n){var t=this.x-n.x,r=this.y-n.y;return i.sqrt(t*t+r*r)},round:function(n){return this.x=u(this.x,n),this.y=u(this.y,n),this.geometryChange(),this},toArray:function(n){var t=c(n),i=t?u(this.x,n):this.x,r=t?u(this.y,n):this.y;return[i,r]}}),f,e,b,y,r,w;k(t.fn,["x","y"]);a(t.fn,p);t.fn.toString=function(n,t){var i=this.x,r=this.y;return c(n)&&(i=u(i,n),r=u(r,n)),t=t||" ",i+t+r};t.create=function(n,i){if(c(n))return n instanceof t?n:arguments.length===1&&n.length===2?new t(n[0],n[1]):new t(n,i)};t.min=function(){for(var f,n=s.MAX_NUM,r=s.MAX_NUM,u=0;u<arguments.length;u++)f=arguments[u],n=i.min(f.x,n),r=i.min(f.y,r);return new t(n,r)};t.max=function(){for(var f,n=s.MIN_NUM,r=s.MIN_NUM,u=0;u<arguments.length;u++)f=arguments[u],n=i.max(f.x,n),r=i.max(f.y,r);return new t(n,r)};t.minPoint=function(){return new t(it,it)};t.maxPoint=function(){return new t(rt,rt)};t.ZERO=new t(0,0);f=l.extend({init:function(n,t){this.width=n||0;this.height=t||0},equals:function(n){return n&&n.width===this.width&&n.height===this.height},clone:function(){return new f(this.width,this.height)},toArray:function(n){var t=c(n),i=t?u(this.width,n):this.width,r=t?u(this.height,n):this.height;return[i,r]}});k(f.fn,["width","height"]);a(f.fn,p);f.create=function(n,t){if(c(n))return n instanceof f?n:arguments.length===1&&n.length===2?new f(n[0],n[1]):new f(n,t)};f.ZERO=new f(0,0);e=l.extend({init:function(n,i){this.setOrigin(n||new t);this.setSize(i||new f)},clone:function(){return new e(this.origin.clone(),this.size.clone())},equals:function(n){return n&&n.origin.equals(this.origin)&&n.size.equals(this.size)},setOrigin:function(n){return this._observerField("origin",t.create(n)),this.geometryChange(),this},getOrigin:function(){return this.origin},setSize:function(n){return this._observerField("size",f.create(n)),this.geometryChange(),this},getSize:function(){return this.size},width:function(){return this.size.width},height:function(){return this.size.height},topLeft:function(){return this.origin.clone()},bottomRight:function(){return this.origin.clone().translate(this.width(),this.height())},topRight:function(){return this.origin.clone().translate(this.width(),0)},bottomLeft:function(){return this.origin.clone().translate(0,this.height())},center:function(){return this.origin.clone().translate(this.width()/2,this.height()/2)},bbox:function(n){var t=this.topLeft().transformCopy(n),i=this.topRight().transformCopy(n),r=this.bottomRight().transformCopy(n),u=this.bottomLeft().transformCopy(n);return e.fromPoints(t,i,r,u)}});a(e.fn,p);e.fromPoints=function(){var n=t.min.apply(this,arguments),i=t.max.apply(this,arguments),r=new f(i.x-n.x,i.y-n.y);return new e(n,r)};e.union=function(n,i){return e.fromPoints(t.min(n.topLeft(),i.topLeft()),t.max(n.bottomRight(),i.bottomRight()))};e.intersect=function(n,r){return n={left:n.topLeft().x,top:n.topLeft().y,right:n.bottomRight().x,bottom:n.bottomRight().y},r={left:r.topLeft().x,top:r.topLeft().y,right:r.bottomRight().x,bottom:r.bottomRight().y},n.left<=r.right&&r.left<=n.right&&n.top<=r.bottom&&r.top<=n.bottom?e.fromPoints(new t(i.max(n.left,r.left),i.max(n.top,r.top)),new t(i.min(n.right,r.right),i.min(n.bottom,r.bottom))):void 0};b=l.extend({init:function(n,i){this.setCenter(n||new t);this.setRadius(i||0)},setCenter:function(n){return this._observerField("center",t.create(n)),this.geometryChange(),this},getCenter:function(){return this.center},equals:function(n){return n&&n.center.equals(this.center)&&n.radius===this.radius},clone:function(){return new b(this.center.clone(),this.radius)},pointAt:function(n){return this._pointAt(v(n))},bbox:function(n){for(var r=t.maxPoint(),u=t.minPoint(),f=ft(this.center,this.radius,this.radius,n),i=0;i<4;i++){var s=this._pointAt(f.x+i*tt).transformCopy(n),h=this._pointAt(f.y+i*tt).transformCopy(n),o=new t(s.x,h.y);r=t.min(r,o);u=t.max(u,o)}return e.fromPoints(r,u)},_pointAt:function(n){var r=this.center,u=this.radius;return new t(r.x-u*i.cos(n),r.y-u*i.sin(n))}});k(b.fn,["radius"]);a(b.fn,p);y=l.extend({init:function(n,i){this.setCenter(n||new t);i=i||{};this.radiusX=i.radiusX;this.radiusY=i.radiusY||i.radiusX;this.startAngle=i.startAngle;this.endAngle=i.endAngle;this.anticlockwise=i.anticlockwise||!1},clone:function(){return new y(this.center,{radiusX:this.radiusX,radiusY:this.radiusY,startAngle:this.startAngle,endAngle:this.endAngle,anticlockwise:this.anticlockwise})},setCenter:function(n){return this._observerField("center",t.create(n)),this.geometryChange(),this},getCenter:function(){return this.center},MAX_INTERVAL:45,pointAt:function(n){var r=this.center,u=v(n);return new t(r.x+this.radiusX*i.cos(u),r.y+this.radiusY*i.sin(u))},curvePoints:function(){for(var r,n,u=this.startAngle,a=this.endAngle,c=this.anticlockwise?-1:1,f=[this.pointAt(u)],t=u,e=this._arcInterval(),o=e.endAngle-e.startAngle,s=i.ceil(o/this.MAX_INTERVAL),l=o/s,h=1;h<=s;h++)r=t+c*l,n=this._intervalCurvePoints(t,r),f.push(n.cp1,n.cp2,n.p2),t=r;return f},bbox:function(n){for(var i=this,l=i._arcInterval(),s=l.startAngle,r=l.endAngle,a=ft(this.center,this.radiusX,this.radiusY,n),w=g(a.x),b=g(a.y),u=i.pointAt(s).transformCopy(n),v=i.pointAt(r).transformCopy(n),h=t.min(u,v),c=t.max(u,v),f=et(w,s),o=et(b,s),y,p;f<r||o<r;)f<r&&(y=i.pointAt(f).transformCopy(n),f+=90),o<r&&(p=i.pointAt(o).transformCopy(n),o+=90),u=new t(y.x,p.y),h=t.min(h,u),c=t.max(c,u);return e.fromPoints(h,c)},_arcInterval:function(){var t=this.startAngle,n=this.endAngle,i=this.anticlockwise,r;return i&&(r=t,t=n,n=r),(t>n||i&&t===n)&&(n+=360),{startAngle:t,endAngle:n}},_intervalCurvePoints:function(n,i){var r=this,f=r.pointAt(n),e=r.pointAt(i),o=r._derivativeAt(n),s=r._derivativeAt(i),u=(v(i)-v(n))/3,h=new t(f.x+u*o.x,f.y+u*o.y),c=new t(e.x-u*s.x,e.y-u*s.y);return{p1:f,cp1:h,cp2:c,p2:e}},_derivativeAt:function(n){var r=this,u=v(n);return new t(-r.radiusX*i.sin(u),r.radiusY*i.cos(u))}});k(y.fn,["radiusX","radiusY","startAngle","endAngle","anticlockwise"]);a(y.fn,p);y.fromPoints=function(n,t,i,r,u,f){var e=ct(n.x,n.y,t.x,t.y,i,r,u,f);return new y(e.center,{startAngle:e.startAngle,endAngle:e.endAngle,radiusX:i,radiusY:r,anticlockwise:f===0})};r=l.extend({init:function(n,t,i,r,u,f){this.a=n||0;this.b=t||0;this.c=i||0;this.d=r||0;this.e=u||0;this.f=f||0},multiplyCopy:function(n){return new r(this.a*n.a+this.c*n.b,this.b*n.a+this.d*n.b,this.a*n.c+this.c*n.d,this.b*n.c+this.d*n.d,this.a*n.e+this.c*n.f+this.e,this.b*n.e+this.d*n.f+this.f)},clone:function(){return new r(this.a,this.b,this.c,this.d,this.e,this.f)},equals:function(n){return n?this.a===n.a&&this.b===n.b&&this.c===n.c&&this.d===n.d&&this.e===n.e&&this.f===n.f:!1},round:function(n){return this.a=u(this.a,n),this.b=u(this.b,n),this.c=u(this.c,n),this.d=u(this.d,n),this.e=u(this.e,n),this.f=u(this.f,n),this},toArray:function(n){var i=[this.a,this.b,this.c,this.d,this.e,this.f],t;if(c(n))for(t=0;t<i.length;t++)i[t]=u(i[t],n);return i}});r.fn.toString=function(n,t){return this.toArray(n).join(t||",")};r.translate=function(n,t){return new r(1,0,0,1,n,t)};r.unit=function(){return new r(1,0,0,1,0,0)};r.rotate=function(n,t,u){var f=new r;return f.a=i.cos(v(n)),f.b=i.sin(v(n)),f.c=-f.b,f.d=f.a,f.e=t-t*f.a+u*f.b||0,f.f=u-u*f.a-t*f.b||0,f};r.scale=function(n,t){return new r(n,0,0,t,0,0)};r.IDENTITY=r.unit();w=l.extend({init:function(n){this._matrix=n||r.unit()},clone:function(){return new w(this._matrix.clone())},equals:function(n){return n&&n._matrix.equals(this._matrix)},_optionsChange:function(){this.optionsChange({field:"transform",value:this})},translate:function(n,t){return this._matrix=this._matrix.multiplyCopy(r.translate(n,t)),this._optionsChange(),this},scale:function(n,i,u){return c(i)||(i=n),u&&(u=t.create(u),this._matrix=this._matrix.multiplyCopy(r.translate(u.x,u.y))),this._matrix=this._matrix.multiplyCopy(r.scale(n,i)),u&&(this._matrix=this._matrix.multiplyCopy(r.translate(-u.x,-u.y))),this._optionsChange(),this},rotate:function(n,i){return i=t.create(i)||t.ZERO,this._matrix=this._matrix.multiplyCopy(r.rotate(n,i.x,i.y)),this._optionsChange(),this},multiply:function(n){var t=nt(n);return this._matrix=this._matrix.multiplyCopy(t),this._optionsChange(),this},matrix:function(){return this._matrix}});a(w.fn,p);a(h,{geometry:{Arc:y,Circle:b,Matrix:r,Point:t,Rect:e,Size:f,Transformation:w,transform:ut,toMatrix:nt}});h.dataviz.geometry=h.geometry}(window.kendo.jQuery),function(n){var l=n.proxy,t=window.kendo,a=t.Class,v=t.data.DataSource,f=t.dataviz,e=t.deepExtend,y=t.util.last,p=t.util.defined,w=t.geometry,i=t.drawing,u=i.Group,o=f.map,s=o.Location,r=o.layers.Layer,h=r.extend({init:function(n,u){r.fn.init.call(this,n,u);this.surface=i.Surface.create(this.element,{width:n.scrollElement.width(),height:n.scrollElement.height()});this._initRoot();this.movable=new t.ui.Movable(this.surface.element);this._markers=[];this._click=this._handler("shapeClick");this.surface.bind("click",this._click);this._mouseenter=this._handler("shapeMouseEnter");this.surface.bind("mouseenter",this._mouseenter);this._mouseleave=this._handler("shapeMouseLeave");this.surface.bind("mouseleave",this._mouseleave);this._initDataSource()},options:{autoBind:!0},destroy:function(){r.fn.destroy.call(this);this.surface.destroy();this.dataSource.unbind("change",this._dataChange)},setDataSource:function(n){this.dataSource&&this.dataSource.unbind("change",this._dataChange);this.dataSource=n;this.dataSource.bind("change",this._dataChange);this.options.autoBind&&this.dataSource.fetch()},_reset:function(){r.fn._reset.call(this);this._translateSurface();this._data&&this._load(this._data)},_initRoot:function(){this._root=new u;this.surface.draw(this._root)},_beforeReset:function(){this.surface.clear();this._initRoot()},_resize:function(){this.surface.size(this.map.size())},_initDataSource:function(){var n=this.options.dataSource;this._dataChange=l(this._dataChange,this);this.dataSource=v.create(n).bind("change",this._dataChange);n&&this.options.autoBind&&this.dataSource.fetch()},_dataChange:function(n){this._data=n.sender.view();this._load(this._data)},_load:function(n){var i,t,r;for(this._clearMarkers(),this._loader||(this._loader=new c(this.map,this.options.style,this)),i=new u,t=0;t<n.length;t++)r=this._loader.parse(n[t]),r&&i.append(r);this._root.clear();this._root.append(i)},shapeCreated:function(n){var t=!1,r;return n instanceof i.Circle&&(t=p(this._createMarker(n))),t||(r={layer:this,shape:n},t=this.map.trigger("shapeCreated",r)),t},_createMarker:function(n){var t=this.map.markers.bind({location:n.location},n.dataItem);return t&&this._markers.push(t),t},_clearMarkers:function(){for(var n=0;n<this._markers.length;n++)this.map.markers.remove(this._markers[n]);this._markers=[]},_panEnd:function(n){r.fn._panEnd.call(this,n);this._translateSurface()},_translateSurface:function(){var t=this.map,n=t.locationToView(t.extent().nw);this.surface.translate&&(this.surface.translate(n),this.movable.moveTo({x:n.x,y:n.y}))},_handler:function(n){var t=this;return function(i){if(i.element){var r={layer:t,shape:i.element,originalEvent:i.originalEvent};t.map.trigger(n,r)}}}}),c=a.extend({init:function(n,t,i){this.observer=i;this.locator=n;this.style=t},parse:function(n){var t=new u;return n.type==="Feature"?this._loadGeometryTo(t,n.geometry,n):this._loadGeometryTo(t,n,n),t.children.length<2&&(t=t.children[0]),t},_shapeCreated:function(n){var t=!1;return this.observer&&this.observer.shapeCreated&&(t=this.observer.shapeCreated(n)),t},_loadGeometryTo:function(n,t,i){var u=t.coordinates,r,f;switch(t.type){case"LineString":f=this._loadPolygon(n,[u],i);this._setLineFill(f);break;case"MultiLineString":for(r=0;r<u.length;r++)f=this._loadPolygon(n,[u[r]],i),this._setLineFill(f);break;case"Polygon":this._loadPolygon(n,u,i);break;case"MultiPolygon":for(r=0;r<u.length;r++)this._loadPolygon(n,u[r],i);break;case"Point":this._loadPoint(n,u,i);break;case"MultiPoint":for(r=0;r<u.length;r++)this._loadPoint(n,u[r],i)}},_setLineFill:function(n){var t=n.segments;(t.length<4||!t[0].anchor().equals(y(t).anchor()))&&(n.options.fill=null)},_loadShape:function(n,t){return this._shapeCreated(t)||n.append(t),t},_loadPolygon:function(n,t,i){var r=this._buildPolygon(t);return r.dataItem=i,this._loadShape(n,r)},_buildPolygon:function(n){for(var t,r,e=n.length>1?i.MultiPath:i.Path,f=new e(this.style),u=0;u<n.length;u++)for(t=0;t<n[u].length;t++)r=this.locator.locationToView(s.fromLngLat(n[u][t])),t===0?f.moveTo(r.x,r.y):f.lineTo(r.x,r.y);return f},_loadPoint:function(n,t,r){var f=s.fromLngLat(t),e=this.locator.locationToView(f),o=new w.Circle(e,10),u=new i.Circle(o,this.style);return u.dataItem=r,u.location=f,this._loadShape(n,u)}});e(t.data,{schemas:{geojson:{type:"json",data:function(n){return n.type==="FeatureCollection"?n.features:n.type==="GeometryCollection"?n.geometries:n}}},transports:{geojson:{read:{dataType:"json"}}}});e(f,{map:{layers:{shape:h,ShapeLayer:h},GeoJSONLoader:c}})}(window.kendo.jQuery),function(n){var p=n.proxy,t=window.kendo,r=t.getter,i=t.dataviz,h=t.deepExtend,u=t.util,f=u.defined,w=u.isNumber,c=t.geometry,e=t.drawing,o=i.map,l=o.Location,a=o.layers.ShapeLayer,b=Math.PI,s=a.extend({options:{autoBind:!0,locationField:"location",valueField:"value",minSize:0,maxSize:100,scale:"sqrt",symbol:"circle"},_load:function(n){var t,u,v,a,c,e;if(n.length!==0)for(t=this.options,u=r(t.valueField),n=n.slice(0),n.sort(function(n,t){return u(t)-u(n)}),v=u(n[0]),a=this._scaleType(),e=0;e<n.length;e++){var o=n[e],i=r(t.locationField)(o),s=r(t.valueField)(o);if(f(i)&&f(s)){c||(c=new a([0,s],[t.minSize,t.maxSize]));i=l.create(i);var y=this.map.locationToView(i),p=c.map(s),h=this._createSymbol({center:y,size:p,style:t.style,dataItem:o,location:i});h.dataItem=o;h.location=i;h.value=s;this._drawSymbol(h)}}},_scaleType:function(){var n=this.options.scale;return t.isFunction(n)?n:i.map.scales[n]},_createSymbol:function(n){var r=this.options.symbol;return t.isFunction(r)||(r=i.map.symbols[r]),r(n)},_drawSymbol:function(n){var t={layer:this,shape:n},i=this.map.trigger("shapeCreated",t);i||this.surface.draw(n)}}),v=t.Class.extend({init:function(n,t){this._domain=n;this._range=t;var i=Math.sqrt(n[1])-Math.sqrt(n[0]),r=t[1]-t[0];this._ratio=r/i},map:function(n){var t=(Math.sqrt(n)-Math.sqrt(this._domain[0]))*this._ratio;return this._range[0]+t}}),y={circle:function(n){var t=new c.Circle(n.center,n.size/2);return new e.Circle(t,n.style)},square:function(n){var r=new e.Path(n.style),t=n.size/2,i=n.center;return r.moveTo(i.x-t,i.y-t).lineTo(i.x+t,i.y-t).lineTo(i.x+t,i.y+t).lineTo(i.x-t,i.y+t).close(),r}};h(i,{map:{layers:{bubble:s,BubbleLayer:s},scales:{sqrt:v},symbols:y}})}(window.kendo.jQuery),function(n){function g(n){return new f(a(n.x),a(n.y))}function o(n,t){return"x:"+n.x+"y:"+n.y+"zoom:"+t}var t=Math,s=n.proxy,i=window.kendo,u=i.Class,h=i.template,c=i.dataviz,l=i.deepExtend,k=i.geometry,f=k.Point,r=c.map.layers.Layer,e=i.util,a=e.round,v=e.renderSize,d=e.limitValue,y=r.extend({init:function(n,t){r.fn.init.call(this,n,t);typeof this.options.subdomains=="string"&&(this.options.subdomains=this.options.subdomains.split(""));var i=this._viewType();this._view=new i(this.element,this.options)},destroy:function(){r.fn.destroy.call(this);this._view.destroy();this._view=null},_reset:function(){r.fn._reset.call(this);this._updateView();this._view.clear();this._view.reset()},_viewType:function(){return p},_activate:function(){r.fn._activate.call(this);i.support.mobileOS||(this._pan||(this._pan=i.throttle(s(this._render,this),100)),this.map.bind("pan",this._pan))},_deactivate:function(){r.fn._deactivate.call(this);this._pan&&this.map.unbind("pan",this._pan)},_updateView:function(){var t=this._view,n=this.map,i=n.extent(),r={nw:n.locationToLayer(i.nw).round(),se:n.locationToLayer(i.se).round()};t.center(n.locationToLayer(n.center()));t.extent(r);t.zoom(n.zoom())},_resize:function(){this._render()},_panEnd:function(n){r.fn._panEnd.call(this,n);this._render()},_render:function(){this._updateView();this._view.render()}}),p=u.extend({init:function(n,t){this.element=n;this._initOptions(t);this.pool=new b},options:{tileSize:256,subdomains:["a","b","c"],urlTemplate:""},center:function(n){this._center=n},extent:function(n){this._extent=n},zoom:function(n){this._zoom=n},pointToTileIndex:function(n){return new f(t.floor(n.x/this.options.tileSize),t.floor(n.y/this.options.tileSize))},clear:function(){this.pool.empty()},tileCount:function(){var n=this.size(),u=this.pointToTileIndex(this._extent.nw),i=this._extent.nw,r=this.indexToPoint(u).translate(-i.x,-i.y);return{x:t.ceil((t.abs(r.x)+n.width)/this.options.tileSize),y:t.ceil((t.abs(r.y)+n.height)/this.options.tileSize)}},size:function(){var n=this._extent.nw,i=this._extent.se,t=i.clone().translate(-n.x,-n.y);return{width:t.x,height:t.y}},indexToPoint:function(n){var t=n.x,i=n.y;return new f(t*this.options.tileSize,i*this.options.tileSize)},subdomainText:function(){var n=this.options.subdomains;return n[this.subdomainIndex++%n.length]},destroy:function(){this.element.empty();this.pool.empty()},reset:function(){this.subdomainIndex=0;this.basePoint=this._extent.nw;this.render()},render:function(){for(var r=this.tileCount(),u=this.pointToTileIndex(this._extent.nw),n,i,t=0;t<r.x;t++)for(i=0;i<r.y;i++)n=this.createTile({x:u.x+t,y:u.y+i}),n.options.visible||(this.element.append(n.element),n.options.visible=!0)},createTile:function(n){var t=this.tileOptions(n);return this.pool.get(this._center,t)},tileOptions:function(n){var r=this.wrapIndex(n),t=this.indexToPoint(n),i=this.basePoint,u=t.clone().translate(-i.x,-i.y);return{index:r,currentIndex:n,point:t,offset:g(u),zoom:this._zoom,subdomain:this.subdomainText(),urlTemplate:this.options.urlTemplate,errorUrlTemplate:this.options.errorUrlTemplate}},wrapIndex:function(n){var i=t.pow(2,this._zoom);return{x:this.wrapValue(n.x,i),y:d(n.y,0,i-1)}},wrapValue:function(n,i){var r=t.abs(n)%i;return n>=0?r:i-(r===0?i:r)}}),w=u.extend({init:function(n){this._initOptions(n);this.createElement();this.load();this.options.visible=!1},options:{urlTemplate:"",errorUrlTemplate:"",visible:!1},createElement:function(){this.element=n("<img style='position: absolute; display: block; visibility: visible;' />").error(s(function(n){this.errorUrl()?n.target.setAttribute("src",this.errorUrl()):n.target.removeAttribute("src")},this))},load:function(n){this.options=l({},this.options,n);var t=this.element[0];t.style.visibility="visible";t.style.display="block";t.style.top=v(this.options.offset.y);t.style.left=v(this.options.offset.x);t.setAttribute("src",this.url());this.options.id=o(this.options.currentIndex,this.options.zoom);this.options.visible=!0},url:function(){var n=h(this.options.urlTemplate);return n(this.urlOptions())},errorUrl:function(){var n=h(this.options.errorUrlTemplate);return n(this.urlOptions())},urlOptions:function(){var n=this.options;return{zoom:n.zoom,subdomain:n.subdomain,z:n.zoom,x:n.index.x,y:n.index.y,s:n.subdomain,quadkey:n.quadkey,q:n.quadkey,culture:n.culture,c:n.culture}},destroy:function(){this.element&&(this.element.remove(),this.element=null)}}),b=u.extend({init:function(){this._items=[]},options:{maxSize:100},get:function(n,t){var i=this;return i._items.length>=i.options.maxSize?i._update(n,t):i._create(t)},empty:function(){for(var t=this._items,n=0;n<t.length;n++)t[n].destroy();this._items=[]},_create:function(n){for(var e=this,f=e._items,s=o(n.currentIndex,n.zoom),t,u,r,i=0;i<f.length;i++)u=f[i],u.options.id===s&&(t=u,r=t);return t?t.load(n):(r=new w(n),this._items.push(r)),r},_update:function(n,t){for(var h=this,r=h._items,s=-Number.MAX_VALUE,u,f,e,c=o(t.currentIndex,t.zoom),i=0;i<r.length;i++){if(e=r[i],u=e.options.point.clone().distanceTo(n),e.options.id===c)return r[i];s<u&&(f=i,s=u)}return r[f].load(t),r[f]}});l(c,{map:{layers:{tile:y,TileLayer:y,ImageTile:w,TilePool:b,TileView:p}}})}(window.kendo.jQuery),function(n){var l=Math,a=n.proxy,i=window.kendo,v=i.Class,y=i.template,t=i.dataviz,r=i.deepExtend,u=i.util.defined,c=t.map.Extent,f=t.map.Location,p=t.map.layers.Layer,e=t.map.layers.TileLayer,o=t.map.layers.TileView,s=e.extend({init:function(t,i){e.fn.init.call(this,t,i);this._onMetadata=n.proxy(this._onMetadata,this);this._fetchMetadata()},options:{baseUrl:"//dev.virtualearth.net/REST/v1/Imagery/Metadata/",imagerySet:"road"},_fetchMetadata:function(){var t=this.options;if(!t.key)throw new Error("Bing tile layer: API key is required");n.ajax({url:t.baseUrl+t.imagerySet,data:{output:"json",include:"ImageryProviders",key:t.key,uriScheme:this._scheme(window.location.protocol)},type:"get",dataType:"jsonp",jsonp:"jsonp",success:this._onMetadata})},_scheme:function(n){return n.replace(":","")==="https"?"https":"http"},_onMetadata:function(n){var t,i;n&&n.resourceSets.length&&(t=this.resource=n.resourceSets[0].resources[0],r(this._view.options,{urlTemplate:t.imageUrl.replace("{subdomain}","#= subdomain #").replace("{quadkey}","#= quadkey #").replace("{culture}","#= culture #"),subdomains:t.imageUrlSubdomains}),i=this.options,u(i.minZoom)||(i.minZoom=t.zoomMin),u(i.maxZoom)||(i.maxZoom=t.zoomMax),this._addAttribution(),this.reset())},_viewType:function(){return h},_addAttribution:function(){var e=this.map.attribution,t,i,r,u,n;if(e&&(t=this.resource.imageryProviders,t))for(i=0;i<t.length;i++)for(r=t[i],u=0;u<r.coverageAreas.length;u++)n=r.coverageAreas[u],e.add({text:r.attribution,minZoom:n.zoomMin,maxZoom:n.zoomMax,extent:new c(new f(n.bbox[2],n.bbox[1]),new f(n.bbox[0],n.bbox[3]))})},imagerySet:function(n){if(n)this.options.imagerySet=n,this.map.attribution.clear(),this._fetchMetadata(),this._reset();else return this.options.imagerySet}}),h=o.extend({options:{culture:"en-US"},tileOptions:function(n){var t=o.fn.tileOptions.call(this,n);return t.culture=this.options.culture,t.quadkey=this.tileQuadKey(this.wrapIndex(n)),t},tileQuadKey:function(n){for(var u="",t,r,i=this._zoom;i>0;i--)t=0,r=1<<i-1,(n.x&r)!=0&&t++,(n.y&r)!=0&&(t+=2),u+=t;return u}});r(t,{map:{layers:{bing:s,BingLayer:s,BingView:h}}})}(window.kendo.jQuery),function(n){var a=document,f=Math,v=n.inArray,e=n.proxy,t=window.kendo,y=t.Class,p=t.data.DataSource,o=t.ui.Tooltip,s=t.dataviz,h=t.deepExtend,u=s.map,c=u.Location,r=u.layers.Layer,l=r.extend({init:function(n,t){r.fn.init.call(this,n,t);this._markerClick=e(this._markerClick,this);this.element.on("click",".k-marker",this._markerClick);this.items=[];this._initDataSource()},destroy:function(){r.fn.destroy.call(this);this.element.off("click",".k-marker",this._markerClick);this.dataSource.unbind("change",this._dataChange);this.clear()},options:{zIndex:1e3,autoBind:!0,dataSource:{},locationField:"location",titleField:"title"},add:function(t){if(n.isArray(t))for(var i=0;i<t.length;i++)this._addOne(t[i]);else return this._addOne(t)},remove:function(n){n.destroy();var t=v(n,this.items);t>-1&&this.items.splice(t,1)},clear:function(){for(var n=0;n<this.items.length;n++)this.items[n].destroy();this.items=[]},update:function(n){var t=n.location(),i;t&&(n.showAt(this.map.locationToView(t)),i={marker:n,layer:this},this.map.trigger("markerActivate",i))},_reset:function(){var t,n;for(r.fn._reset.call(this),t=this.items,n=0;n<t.length;n++)this.update(t[n])},bind:function(n,t){var i=u.Marker.create(n,this.options),r,f;return i.dataItem=t,r={marker:i,layer:this},f=this.map.trigger("markerCreated",r),f?void 0:(this.add(i),i)},setDataSource:function(n){this.dataSource&&this.dataSource.unbind("change",this._dataChange);this.dataSource=n;this.dataSource.bind("change",this._dataChange);this.options.autoBind&&this.dataSource.fetch()},_addOne:function(n){var t=i.create(n,this.options);return t.addTo(this),t},_initDataSource:function(){var n=this.options.dataSource;this._dataChange=e(this._dataChange,this);this.dataSource=p.create(n).bind("change",this._dataChange);n&&this.options.autoBind&&this.dataSource.fetch()},_dataChange:function(n){this._load(n.sender.view())},_load:function(n){var u,f,i,r;for(this._data=n,this.clear(),u=t.getter(this.options.locationField),f=t.getter(this.options.titleField),i=0;i<n.length;i++)r=n[i],this.bind({location:u(r),title:f(r)},r)},_markerClick:function(t){var i={marker:n(t.target).data("kendoMarker"),layer:this};this.map.trigger("markerClick",i)}}),i=y.extend({init:function(n){this.options=n||{}},addTo:function(n){this.layer=n.markers||n;this.layer.items.push(this);this.layer.update(this)},location:function(n){return n?(this.options.location=c.create(n).toArray(),this.layer&&this.layer.update(this),this):c.create(this.options.location)},showAt:function(n){this.render();this.element.css({left:f.round(n.x),top:f.round(n.y)});this.tooltip&&this.tooltip.popup&&this.tooltip.popup._position()},hide:function(){this.element&&(this.element.remove(),this.element=null);this.tooltip&&(this.tooltip.destroy(),this.tooltip=null)},destroy:function(){this.layer=null;this.hide()},render:function(){if(!this.element){var i=this.options,r=this.layer;this.element=n(a.createElement("span")).addClass("k-marker k-marker-"+t.toHyphens(i.shape||"pin")).attr("title",i.title).data("kendoMarker",this).css("zIndex",i.zIndex);r&&r.element.append(this.element);this.renderTooltip()}},renderTooltip:function(){var i=this,f=i.options.title,n=i.options.tooltip||{},r,u;n&&o&&(r=n.template,r&&(u=t.template(r),n.content=function(n){return n.location=i.location(),n.marker=i,u(n)}),(f||n.content||n.contentUrl)&&(this.tooltip=new o(this.element,n),this.tooltip.marker=this))}});i.create=function(n,t){return n instanceof i?n:new i(h({},t,n))};h(s,{map:{layers:{marker:l,MarkerLayer:l},Marker:i}})}(window.kendo.jQuery),function(n){var d=document,r=Math,v=r.min,y=r.pow,t=n.proxy,i=window.kendo,o=i.ui.Widget,p=i.deepExtend,u=i.dataviz,f=u.ui,s=i.geometry,w=s.Point,h=u.map,b=h.Extent,e=h.Location,g=h.crs.EPSG3857,c=i.util,nt=c.defined,l=c.limitValue,k=c.renderPos,a=c.valueOrDefault,tt="k-",it=.9,rt=.93,ut="DOMMouseScroll mousewheel",ft=5,et=o.extend({init:function(n,r){i.destroy(n);o.fn.init.call(this,n);this._initOptions(r);this.bind(this.events,r);this.crs=new g;this.element.addClass(tt+this.options.name.toLowerCase()).css("position","relative").empty().append(d.createElement("div"));this._viewOrigin=this._getOrigin();this._initScroller();this._initMarkers();this._initControls();this._initLayers();this._reset();this._mousewheel=t(this._mousewheel,this);this.element.bind("click",t(this._click,this));this.element.bind(ut,this._mousewheel)},options:{name:"Map",controls:{attribution:!0,navigator:{panStep:100},zoom:!0},layers:[],layerDefaults:{shape:{style:{fill:{color:"#fff"},stroke:{color:"#aaa",width:.5}}},bubble:{style:{fill:{color:"#fff",opacity:.5},stroke:{color:"#aaa",width:.5}}},marker:{shape:"pinTarget",tooltip:{position:"top"}}},center:[0,0],zoom:3,minSize:256,minZoom:1,maxZoom:19,markers:[],markerDefaults:{shape:"pinTarget",tooltip:{position:"top"}},wraparound:!0},events:["beforeReset","click","reset","pan","panEnd","markerActivate","markerClick","markerCreated","shapeClick","shapeCreated","shapeMouseEnter","shapeMouseLeave","zoomStart","zoomEnd"],destroy:function(){this.scroller.destroy();this.navigator&&this.navigator.destroy();this.attribution&&this.attribution.destroy();this.zoomControl&&this.zoomControl.destroy();this.markers.destroy();for(var n=0;n<this.layers.length;n++)this.layers[n].destroy();o.fn.destroy.call(this)},zoom:function(n){var t=this.options;return nt(n)?(n=l(n,t.minZoom,t.maxZoom),t.zoom!==n&&(t.zoom=n,this._reset()),this):t.zoom},center:function(n){return n?(this.options.center=e.create(n).toArray(),this._reset(),this):e.create(this.options.center)},extent:function(n){return n?(this._setExtent(n),this):this._getExtent()},setOptions:function(n){o.fn.setOptions.call(this,n);this._reset()},locationToLayer:function(n,t){var i=!this.options.wraparound;return n=e.create(n),this.crs.toPoint(n,this._layerSize(t),i)},layerToLocation:function(n,t){var i=!this.options.wraparound;return n=w.create(n),this.crs.toLocation(n,this._layerSize(t),i)},locationToView:function(n){n=e.create(n);var t=this.locationToLayer(this._viewOrigin),i=this.locationToLayer(n);return i.translateWith(t.scale(-1))},viewToLocation:function(n,t){var i=this.locationToLayer(this._getOrigin(),t);return n=w.create(n),n=n.clone().translateWith(i),this.layerToLocation(n,t)},eventOffset:function(n){var i=this.element.offset(),t=n.originalEvent||n,r=a(t.pageX,t.clientX)-i.left,u=a(t.pageY,t.clientY)-i.top;return new s.Point(r,u)},eventToView:function(n){var t=this.eventOffset(n);return this.locationToView(this.viewToLocation(t))},eventToLayer:function(n){return this.locationToLayer(this.eventToLocation(n))},eventToLocation:function(n){var t=this.eventOffset(n);return this.viewToLocation(t)},viewSize:function(){var t=this.element,i=this._layerSize(),n=t.width();return this.options.wraparound||(n=v(i,n)),{width:n,height:v(i,t.height())}},_setOrigin:function(n,t){var r=this.viewSize(),i;return n=this._origin=e.create(n),i=this.locationToLayer(n,t),i.x+=r.width/2,i.y+=r.height/2,this.options.center=this.layerToLocation(i,t).toArray(),this},_getOrigin:function(n){var i=this.viewSize(),t;return(n||!this._origin)&&(t=this.locationToLayer(this.center()),t.x-=i.width/2,t.y-=i.height/2,this._origin=this.layerToLocation(t)),this._origin},_setExtent:function(n){var i,u,t;for(n=b.create(n),this.center(n.center()),i=this.element.width(),u=this.element.height(),t=this.options.maxZoom;t>=this.options.minZoom;t--){var f=this.locationToLayer(n.nw,t),e=this.locationToLayer(n.se,t),o=r.abs(e.x-f.x),s=r.abs(e.y-f.y);if(o<=i&&s<=u)break}this.zoom(t)},_getExtent:function(){var t=this._getOrigin(),n=this.locationToLayer(t),i=this.viewSize(),r;return n.x+=i.width,n.y+=i.height,r=this.layerToLocation(n),new b(t,r)},_zoomAround:function(n,t){this._setOrigin(this.layerToLocation(n,t),t);this.zoom(t)},_initControls:function(){var n=this.options.controls;f.Attribution&&n.attribution&&this._createAttribution(n.attribution);i.support.mobileOS||(f.Navigator&&n.navigator&&this._createNavigator(n.navigator),f.ZoomControl&&n.zoom&&this._createZoomControl(n.zoom))},_createControlElement:function(t,i){var u=t.position||i,f="."+k(u).replace(" ","."),r=n(".k-map-controls"+f,this.element);return r.length===0&&(r=n("<div>").addClass("k-map-controls "+k(u)).appendTo(this.element)),n("<div>").appendTo(r)},_createAttribution:function(n){var t=this._createControlElement(n,"bottomRight");this.attribution=new f.Attribution(t,n)},_createNavigator:function(n){var r=this._createControlElement(n,"topLeft"),i=this.navigator=new f.Navigator(r,n);this._navigatorPan=t(this._navigatorPan,this);i.bind("pan",this._navigatorPan);this._navigatorCenter=t(this._navigatorCenter,this);i.bind("center",this._navigatorCenter)},_navigatorPan:function(n){var t=this,f=t.scroller,r=f.scrollLeft+n.x,u=f.scrollTop-n.y,i=this._virtualSize,e=this.element.height(),o=this.element.width();r=l(r,i.x.min,i.x.max-o);u=l(u,i.y.min,i.y.max-e);t.scroller.one("scroll",function(n){t._scrollEnd(n)});t.scroller.scrollTo(-r,-u)},_navigatorCenter:function(){this.center(this.options.center)},_createZoomControl:function(n){var i=this._createControlElement(n,"topLeft"),r=this.zoomControl=new f.ZoomControl(i,n);this._zoomControlChange=t(this._zoomControlChange,this);r.bind("change",this._zoomControlChange)},_zoomControlChange:function(n){this.trigger("zoomStart",{originalEvent:n})||(this.zoom(this.zoom()+n.delta),this.trigger("zoomEnd",{originalEvent:n}))},_initScroller:function(){var r=i.support.mobileOS?rt:it,u=this.options.zoomable!==!1,n=this.scroller=new i.mobile.ui.Scroller(this.element.children(0),{friction:r,velocityMultiplier:ft,zoom:u,mousewheelScrolling:!1});n.bind("scroll",t(this._scroll,this));n.bind("scrollEnd",t(this._scrollEnd,this));n.userEvents.bind("gesturestart",t(this._scaleStart,this));n.userEvents.bind("gestureend",t(this._scale,this));this.scrollElement=n.scrollElement},_initLayers:function(){for(var t=this.options.layers,f=this.layers=[],n=0;n<t.length;n++){var i=t[n],r=i.type||"shape",e=this.options.layerDefaults[r],o=u.map.layers[r];f.push(new o(this,p({},e,i)))}},_initMarkers:function(){this.markers=new h.layers.MarkerLayer(this,this.options.markerDefaults);this.markers.add(this.options.markers)},_scroll:function(n){var t=this.locationToLayer(this._viewOrigin).round(),i=n.sender.movable,r=new s.Point(i.x,i.y).scale(-1).scale(1/i.scale);t.x+=r.x;t.y+=r.y;this._setOrigin(this.layerToLocation(t));this.trigger("pan",{originalEvent:n,origin:this._getOrigin(),center:this.center()})},_scrollEnd:function(n){this.trigger("panEnd",{originalEvent:n,origin:this._getOrigin(),center:this.center()})},_scaleStart:function(n){if(this.trigger("zoomStart",{originalEvent:n})){var t=n.touches[1];t&&t.cancel()}},_scale:function(n){var r=this.scroller.movable.scale,t=this._scaleToZoom(r),i=new s.Point(n.center.x,n.center.y),u=this.viewToLocation(i,t),f=this.locationToLayer(u,t),e=f.translate(-i.x,-i.y);this._zoomAround(e,t);this.trigger("zoomEnd",{originalEvent:n})},_scaleToZoom:function(n){var t=this._layerSize()*n,i=t/this.options.minSize,u=r.log(i)/r.log(2);return r.round(u)},_reset:function(){this.attribution&&this.attribution.filter(this.center(),this.zoom());this._viewOrigin=this._getOrigin(!0);this._resetScroller();this.trigger("beforeReset");this.trigger("reset")},_resetScroller:function(){var t=this.scroller,e=t.dimensions.x,o=t.dimensions.y,u=this._layerSize(),s=20*u,c=this.extent().nw,r=this.locationToLayer(c).round(),h,n,i,f;t.movable.round=!0;t.reset();t.userEvents.cancel();h=this.options.maxZoom-this.zoom();t.dimensions.maxScale=y(2,h);n={min:-r.x,max:u-r.x};i={min:-r.y,max:u-r.y};this.options.wraparound&&(n.min=-s,n.max=s);this.options.pannable===!1&&(f=this.viewSize(),n.min=i.min=0,n.max=f.width,i.max=f.height);e.makeVirtual();o.makeVirtual();e.virtualSize(n.min,n.max);o.virtualSize(i.min,i.max);this._virtualSize={x:n,y:i}},_renderLayers:function(){var t=this.options.layers,f=this.layers=[],e=this.scrollWrap,n;for(e.empty(),n=0;n<t.length;n++){var i=t[n],r=i.type||"shape",o=this.options.layerDefaults[r],s=u.map.layers[r];f.push(new s(this,p({},o,i)))}},_layerSize:function(n){return n=a(n,this.options.zoom),this.options.minSize*y(2,n)},_click:function(n){var t=this.eventOffset(n);this.trigger("click",{originalEvent:n,location:this.viewToLocation(t)})},_mousewheel:function(n){n.preventDefault();var e=u.mwDelta(n)>0?-1:1,t=this.options,f=this.zoom(),i=l(f+e,t.minZoom,t.maxZoom);if(t.zoomable!==!1&&i!==f&&!this.trigger("zoomStart",{originalEvent:n})){var r=this.eventOffset(n),o=this.viewToLocation(r),s=this.locationToLayer(o,i),h=s.translate(-r.x,-r.y);this._zoomAround(h,i);this.trigger("zoomEnd",{originalEvent:n})}}});u.ui.plugin(et)}(window.kendo.jQuery),window.kendo},typeof define=="function"&&define.amd?define:function(n,t){t()});
//# sourceMappingURL=kendo.dataviz.map.min.js.map
