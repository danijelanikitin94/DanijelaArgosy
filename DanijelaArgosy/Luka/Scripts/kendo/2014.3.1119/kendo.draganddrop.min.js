(function(n,t){t(["./kendo.core","./kendo.userevents"],n)})(function(){return function(n,t){function wt(t,i){try{return n.contains(t,i)||t==i}catch(r){return!1}}function y(n,t){return parseInt(n.css(t),10)||0}function ot(n,t){return Math.min(Math.max(n,t.min),t.max)}function st(n,t){var i=b(n),r=i.left+y(n,"borderLeftWidth")+y(n,"paddingLeft"),u=i.top+y(n,"borderTopWidth")+y(n,"paddingTop"),f=r+n.width()-t.outerWidth(!0),e=u+n.height()-t.outerHeight(!0);return{x:{min:r,max:f},y:{min:u,max:e}}}function bt(n,i,r){for(var f,e,u=0,o=i&&i.length,s=r&&r.length;n&&n.parentNode;){for(u=0;u<o;u++)if(f=i[u],f.element[0]===n)return{target:f,targetElement:n};for(u=0;u<s;u++)if(e=r[u],p.matchesSelector.call(n,e.options.filter))return{target:e,targetElement:n};n=n.parentNode}return t}var i=window.kendo,p=i.support,w=window.document,yt=i.Class,o=i.ui.Widget,e=i.Observable,pt=i.UserEvents,u=n.proxy,r=n.extend,b=i.getOffset,a={},s={},h={},f,k=i.elementUnderCursor,nt="keyup",l="change",tt="dragstart",it="hold",rt="drag",ut="dragend",ft="dragcancel",d="dragenter",v="dragleave",et="drop",kt=e.extend({init:function(t,r){var f=this,o=t[0];f.capture=!1;o.addEventListener?(n.each(i.eventMap.down.split(" "),function(){o.addEventListener(this,u(f._press,f),!0)}),n.each(i.eventMap.up.split(" "),function(){o.addEventListener(this,u(f._release,f),!0)})):(n.each(i.eventMap.down.split(" "),function(){o.attachEvent(this,u(f._press,f))}),n.each(i.eventMap.up.split(" "),function(){o.attachEvent(this,u(f._release,f))}));e.fn.init.call(f);f.bind(["press","release"],r||{})},captureNext:function(){this.capture=!0},cancelCapture:function(){this.capture=!1},_press:function(n){var t=this;t.trigger("press");t.capture&&n.preventDefault()},_release:function(n){var t=this;t.trigger("release");t.capture&&(n.preventDefault(),t.cancelCapture())}}),ht=e.extend({init:function(t){var i=this;e.fn.init.call(i);i.forcedEnabled=!1;n.extend(i,t);i.scale=1;i.horizontal?(i.measure="offsetWidth",i.scrollSize="scrollWidth",i.axis="x"):(i.measure="offsetHeight",i.scrollSize="scrollHeight",i.axis="y")},makeVirtual:function(){n.extend(this,{virtual:!0,forcedEnabled:!0,_virtualMin:0,_virtualMax:0})},virtualSize:function(n,t){(this._virtualMin!==n||this._virtualMax!==t)&&(this._virtualMin=n,this._virtualMax=t,this.update())},outOfBounds:function(n){return n>this.max||n<this.min},forceEnabled:function(){this.forcedEnabled=!0},getSize:function(){return this.container[0][this.measure]},getTotal:function(){return this.element[0][this.scrollSize]},rescale:function(n){this.scale=n},update:function(n){var t=this,u=t.virtual?t._virtualMax:t.getTotal(),r=u*t.scale,i=t.getSize();u!==0&&(t.max=t.virtual?-t._virtualMin:0,t.size=i,t.total=r,t.min=Math.min(t.max,i-r),t.minScale=i/u,t.centerOffset=(r-i)/2,t.enabled=t.forcedEnabled||r>i,n||t.trigger(l,t))}}),dt=e.extend({init:function(n){var t=this;e.fn.init.call(t);t.x=new ht(r({horizontal:!0},n));t.y=new ht(r({horizontal:!1},n));t.container=n.container;t.forcedMinScale=n.minScale;t.maxScale=n.maxScale||100;t.bind(l,n)},rescale:function(n){this.x.rescale(n);this.y.rescale(n);this.refresh()},centerCoordinates:function(){return{x:Math.min(0,-this.x.centerOffset),y:Math.min(0,-this.y.centerOffset)}},refresh:function(){var n=this;n.x.update();n.y.update();n.enabled=n.x.enabled||n.y.enabled;n.minScale=n.forcedMinScale||Math.min(n.x.minScale,n.y.minScale);n.fitScale=Math.max(n.x.minScale,n.y.minScale);n.trigger(l)}}),ct=e.extend({init:function(n){var t=this;r(t,n);e.fn.init.call(t)},outOfBounds:function(){return this.dimension.outOfBounds(this.movable[this.axis])},dragMove:function(n){var t=this,i=t.dimension,r=t.axis,u=t.movable,f=u[r]+n;i.enabled&&((f<i.min&&n<0||f>i.max&&n>0)&&(n*=t.resistance),u.translateAxis(r,n),t.trigger(l,t))}}),gt=yt.extend({init:function(n){var t=this,u,f,e,i;r(t,{elastic:!0},n);e=t.elastic?.5:0;i=t.movable;t.x=u=new ct({axis:"x",dimension:t.dimensions.x,resistance:e,movable:i});t.y=f=new ct({axis:"y",dimension:t.dimensions.y,resistance:e,movable:i});t.userEvents.bind(["move","end","gesturestart","gesturechange"],{gesturestart:function(n){t.gesture=n;t.offset=t.dimensions.container.offset()},gesturechange:function(n){var h=t.gesture,c=h.center,l=n.center,r=n.distance/h.distance,v=t.dimensions.minScale,a=t.dimensions.maxScale,e,o,s;i.scale<=v&&r<1&&(r+=(1-r)*.8);i.scale*r>=a&&(r=a/i.scale);o=i.x+t.offset.left;s=i.y+t.offset.top;e={x:(o-c.x)*r+l.x-o,y:(s-c.y)*r+l.y-s};i.scaleWith(r);u.dragMove(e.x);f.dragMove(e.y);t.dimensions.rescale(i.scale);t.gesture=n;n.preventDefault()},move:function(n){n.event.target.tagName.match(/textarea|input/i)||(u.dimension.enabled||f.dimension.enabled?(u.dragMove(n.x.delta),f.dragMove(n.y.delta),n.preventDefault()):n.touch.skip())},end:function(n){n.preventDefault()}})}}),ni=p.transitions.prefix+"Transform",g,lt,c,at,vt;g=p.hasHW3D?function(n,t,i){return"translate3d("+n+"px,"+t+"px,0) scale("+i+")"}:function(n,t,i){return"translate("+n+"px,"+t+"px) scale("+i+")"};lt=e.extend({init:function(t){var i=this;e.fn.init.call(i);i.element=n(t);i.element[0].style.webkitTransformOrigin="left top";i.x=0;i.y=0;i.scale=1;i._saveCoordinates(g(i.x,i.y,i.scale))},translateAxis:function(n,t){this[n]+=t;this.refresh()},scaleTo:function(n){this.scale=n;this.refresh()},scaleWith:function(n){this.scale*=n;this.refresh()},translate:function(n){this.x+=n.x;this.y+=n.y;this.refresh()},moveAxis:function(n,t){this[n]=t;this.refresh()},moveTo:function(n){r(this,n);this.refresh()},refresh:function(){var n=this,r=n.x,u=n.y,t;n.round&&(r=Math.round(r),u=Math.round(u));t=g(r,u,n.scale);t!=n.coordinates&&(i.support.browser.msie&&i.support.browser.version<10?(n.element[0].style.position="absolute",n.element[0].style.left=n.x+"px",n.element[0].style.top=n.y+"px"):n.element[0].style[ni]=t,n._saveCoordinates(t),n.trigger(l))},_saveCoordinates:function(n){this.coordinates=n}});c=o.extend({init:function(n,t){var i=this,r;o.fn.init.call(i,n,t);r=i.options.group;r in s?s[r].push(i):s[r]=[i]},events:[d,v,et],options:{name:"DropTarget",group:"default"},destroy:function(){var i=this.options.group,t=s[i]||h[i],n;if(t.length>1){for(o.fn.destroy.call(this),n=0;n<t.length;n++)if(t[n]==this){t.splice(n,1);break}}else c.destroyGroup(i)},_trigger:function(n,t){var i=this,u=a[i.options.group];if(u)return i.trigger(n,r({},t.event,{draggable:u,dropTarget:t.dropTarget}))},_over:function(n){this._trigger(d,n)},_out:function(n){this._trigger(v,n)},_drop:function(n){var t=this,i=a[t.options.group];i&&(i.dropped=!t._trigger(et,n))}});c.destroyGroup=function(n){var t=s[n]||h[n],i;if(t){for(i=0;i<t.length;i++)o.fn.destroy.call(t[i]);t.length=0;delete s[n];delete h[n]}};c._cache=s;at=c.extend({init:function(n,t){var i=this,r;o.fn.init.call(i,n,t);r=i.options.group;r in h?h[r].push(i):h[r]=[i]},options:{name:"DropTargetArea",group:"default",filter:null}});vt=o.extend({init:function(n,t){var i=this;o.fn.init.call(i,n,t);i._activated=!1;i.userEvents=new pt(i.element,{global:!0,allowSelection:!0,filter:i.options.filter,threshold:i.options.distance,start:u(i._start,i),hold:u(i._hold,i),move:u(i._drag,i),end:u(i._end,i),cancel:u(i._cancel,i),select:u(i._select,i)});i._afterEndHandler=u(i._afterEnd,i);i._captureEscape=u(i._captureEscape,i)},events:[it,tt,rt,ut,ft],options:{name:"Draggable",distance:i.support.touch?0:5,group:"default",cursorOffset:null,axis:null,container:null,filter:null,ignore:null,holdToDrag:!1,dropped:!1},cancelHold:function(){this._activated=!1},_captureEscape:function(n){var t=this;n.keyCode===i.keys.ESC&&(t._trigger(ft,{event:n}),t.userEvents.cancel())},_updateHint:function(t){var r=this,i,o=r.options,u=r.boundaries,e=o.axis,f=r.options.cursorOffset;f?i={left:t.x.location+f.left,top:t.y.location+f.top}:(r.hintOffset.left+=t.x.delta,r.hintOffset.top+=t.y.delta,i=n.extend({},r.hintOffset));u&&(i.top=ot(i.top,u.y),i.left=ot(i.left,u.x));e==="x"?delete i.top:e==="y"&&delete i.left;r.hint.css(i)},_shouldIgnoreTarget:function(t){var i=this.options.ignore;return i&&n(t).is(i)},_select:function(n){this._shouldIgnoreTarget(n.event.target)||n.preventDefault()},_start:function(t){var r=this,u=r.options,o=u.container,f=u.hint,e;if(this._shouldIgnoreTarget(t.touch.initialTouch)||u.holdToDrag&&!r._activated){r.userEvents.cancel();return}r.currentTarget=t.target;r.currentTargetOffset=b(r.currentTarget);f&&(r.hint&&r.hint.stop(!0,!0).remove(),r.hint=i.isFunction(f)?n(f.call(r,r.currentTarget)):f,e=b(r.currentTarget),r.hintOffset=e,r.hint.css({position:"absolute",zIndex:2e4,left:e.left,top:e.top}).appendTo(w.body),r.angular("compile",function(){return r.hint.removeAttr("ng-repeat"),{elements:r.hint.get(),scopeFrom:t.target}}));a[u.group]=r;r.dropped=!1;o&&(r.boundaries=st(o,r.hint));r._trigger(tt,t)&&(r.userEvents.cancel(),r._afterEnd());r.userEvents.capture();n(w).on(nt,r._captureEscape)},_hold:function(n){this.currentTarget=n.target;this._trigger(it,n)?this.userEvents.cancel():this._activated=!0},_drag:function(t){var i=this;t.preventDefault();i._withDropTarget(t,function(i,u){if(!i){f&&(f._trigger(v,r(t,{dropTarget:n(f.targetElement)})),f=null);return}if(f){if(u===f.targetElement)return;f._trigger(v,r(t,{dropTarget:n(f.targetElement)}))}i._trigger(d,r(t,{dropTarget:n(u)}));f=r(i,{targetElement:u})});i._trigger(rt,r(t,{dropTarget:f}));i.hint&&i._updateHint(t)},_end:function(t){var i=this;i._withDropTarget(t,function(i,u){i&&(i._drop(r({},t,{dropTarget:n(u)})),f=null)});i._trigger(ut,t);i._cancel(t.event)},_cancel:function(){var n=this;n._activated=!1;n.hint&&!n.dropped?setTimeout(function(){n.hint.stop(!0,!0).animate(n.currentTargetOffset,"fast",n._afterEndHandler)},0):n._afterEnd()},_trigger:function(n,t){var i=this;return i.trigger(n,r({},t.event,{x:t.x,y:t.y,currentTarget:i.currentTarget,dropTarget:t.dropTarget}))},_withDropTarget:function(n,t){var r=this,i,u,o=r.options,f=s[o.group],e=h[o.group];(f&&f.length||e&&e.length)&&(i=k(n),r.hint&&wt(r.hint[0],i)&&(r.hint.hide(),i=k(n),i||(i=k(n)),r.hint.show()),u=bt(i,f,e),u?t(u.target,u.targetElement):t())},destroy:function(){var n=this;o.fn.destroy.call(n);n._afterEnd();n.userEvents.destroy();n.currentTarget=null},_afterEnd:function(){var t=this;t.hint&&t.hint.remove();delete a[t.options.group];t.trigger("destroy");n(w).off(nt,t._captureEscape)}});i.ui.plugin(c);i.ui.plugin(at);i.ui.plugin(vt);i.TapCapture=kt;i.containerBoundaries=st;r(i.ui,{Pane:gt,PaneDimensions:dt,Movable:lt})}(window.kendo.jQuery),window.kendo},typeof define=="function"&&define.amd?define:function(n,t){t()});
//# sourceMappingURL=kendo.draganddrop.min.js.map
