(function(n,t){t(["./kendo.core","./kendo.fx","./kendo.mobile.scroller","./kendo.view"],n)})(function(){return function(n){function g(n){for(var f=n.find(i("popover")),o=r.roles,u=0,e=f.length;u<e;u++)t.initWidget(f[u],{},o)}function nt(n){t.triggeredByInput(n)||n.preventDefault()}function tt(i){i.each(function(){t.initWidget(n(this),{},r.roles)})}var t=window.kendo,pt=window.angular,u=t.mobile,r=u.ui,h=t.attr,wt=t.Class,f=r.Widget,ht=t.ViewClone,e="init",ct='<div style="height: 100%; width: 100%; position: absolute; top: 0; left: 0; z-index: 20000; display: none" />',a="beforeShow",o="show",v="afterShow",y="beforeHide",p="transitionEnd",w="transitionStart",s="hide",b="destroy",k=t.attrValue,i=t.roleSelector,d=t.directiveSelector,c=t.compileMobileDirective,lt=f.extend({init:function(t,i){f.fn.init.call(this,t,i);this.params={};n.extend(this,i);this.transition=this.transition||this.defaultTransition;this._id();this.options.$angular?this._overlay():(this._layout(),this._overlay(),this._scroller(),this._model())},events:[e,a,o,v,y,s,b,w,p],options:{name:"View",title:"",layout:null,getLayout:n.noop,reload:!1,transition:"",defaultTransition:"",useNativeScrolling:!1,stretch:!1,zoom:!1,model:null,modelScope:window,scroller:{},initWidgets:!0},enable:function(n){typeof n=="undefined"&&(n=!0);n?this.overlay.hide():this.overlay.show()},destroy:function(){this.layout&&this.layout.detach(this);this.trigger(b);f.fn.destroy.call(this);this.scroller&&this.scroller.destroy();this.options.$angular&&this.element.scope().$destroy();t.destroy(this.element)},purge:function(){this.destroy();this.element.remove()},triggerBeforeShow:function(){return this.trigger(a,{view:this})?!1:!0},showStart:function(){var n=this.element;n.css("display","");this.inited?this._invokeNgController():(this.inited=!0,this.trigger(e,{view:this}));this.layout&&this.layout.attach(this);this._padIfNativeScrolling();this.trigger(o,{view:this});t.resize(n)},showEnd:function(){this.trigger(v,{view:this});this._padIfNativeScrolling()},hideStart:function(){this.trigger(y,{view:this})},hideEnd:function(){var n=this;n.element.hide();n.trigger(s,{view:n});n.layout&&n.layout.trigger(s,{view:n,layout:n.layout})},beforeTransition:function(n){this.trigger(w,{type:n})},afterTransition:function(n){this.trigger(p,{type:n})},_padIfNativeScrolling:function(){if(u.appLevelNativeScrolling()){var n=t.support.mobileOS&&t.support.mobileOS.android,i=u.application.os.android||u.application.skin().indexOf("android")>-1,r=n||i?"footer":"header",f=n||i?"header":"footer";this.content.css({paddingTop:this[r].height(),paddingBottom:this[f].height()})}},contentElement:function(){var n=this;return n.options.stretch?n.content:n.scrollerContent},clone:function(){return new ht(this)},_scroller:function(){var i=this;if(!u.appLevelNativeScrolling()&&(i.options.stretch?i.content.addClass("km-stretched-view"):(i.content.kendoMobileScroller(n.extend(i.options.scroller,{zoom:i.options.zoom,useNative:i.options.useNativeScrolling})),i.scroller=i.content.data("kendoMobileScroller"),i.scrollerContent=i.scroller.scrollElement),t.support.kineticScrollNeeded)){n(i.element).on("touchmove",".km-header",nt);if(!i.options.useNativeScrolling)n(i.element).on("touchmove",".km-content",nt)}},_model:function(){var n=this,f=n.element,i=n.options.model;typeof i=="string"&&(i=t.getter(i)(n.options.modelScope));n.model=i;g(f);n.element.css("display","");n.options.initWidgets&&(i?t.bind(f,i,r,t.ui,t.dataviz.ui):u.init(f.children()));n.element.css("display","none")},_id:function(){var n=this.element,i=n.attr("id")||"";this.id=k(n,"url")||"#"+i;this.id=="#"&&(this.id=t.guid(),n.attr("id",this.id))},_layout:function(){var t=i("content"),n=this.element;n.addClass("km-view");this.header=n.children(i("header")).addClass("km-header");this.footer=n.children(i("footer")).addClass("km-footer");n.children(t)[0]||n.wrapInner("<div "+h("role")+'="content"><\/div>');this.content=n.children(i("content")).addClass("km-content");this.element.prepend(this.header).append(this.footer);this.layout=this.options.getLayout(this.layout);this.layout&&this.layout.setup(this)},_overlay:function(){this.overlay=n(ct).appendTo(this.element)},_invokeNgController:function(){var n=this.element,t,i;this.options.$angular&&(t=n.controller(),i=n.scope(),t&&i.$apply(function(){n.injector().invoke(t.constructor,null,{$scope:i})}))}}),at=f.extend({init:function(n,i){f.fn.init.call(this,n,i);n=this.element;this.header=n.children(this._locate("header")).addClass("km-header");this.footer=n.children(this._locate("footer")).addClass("km-footer");this.elements=this.header.add(this.footer);g(n);this.options.$angular||t.mobile.init(this.element.children());this.element.detach();this.trigger(e,{layout:this})},_locate:function(n){return this.options.$angular?d(n):i(n)},options:{name:"Layout",id:null,platform:null},events:[e,o,s],setup:function(n){n.header[0]||(n.header=this.header);n.footer[0]||(n.footer=this.footer)},detach:function(n){var t=this;n.header===t.header&&t.header[0]&&n.element.prepend(t.header.detach()[0].cloneNode(!0));n.footer===t.footer&&t.footer.length&&n.element.append(t.footer.detach()[0].cloneNode(!0))},attach:function(n){var t=this,r=t.currentView;r&&t.detach(r);n.header===t.header&&(t.header.detach(),n.element.children(i("header")).remove(),n.element.prepend(t.header));n.footer===t.footer&&(t.footer.detach(),n.element.children(i("footer")).remove(),n.element.append(t.footer));t.trigger(o,{layout:t,view:n});t.currentView=n}}),it=t.Observable,vt=/<body[^>]*>(([\u000a\u000d\u2028\u2029]|.)*)<\/body>/i,rt="loadStart",ut="loadComplete",ft="showStart",et="sameViewRequested",ot="viewShow",st="viewTypeDetermined",l="after",yt=it.extend({init:function(i){var r=this,e,o,u,f;if(it.fn.init.call(r),n.extend(r,i),r.sandbox=n("<div />"),u=r.container,e=r._hideViews(u),r.rootView=e.first(),!r.rootView[0]&&i.rootNeeded){o=u[0]==t.mobile.application.element[0]?'Your kendo mobile application element does not contain any direct child elements with data-role="view" attribute set. Make sure that you instantiate the mobile application using the correct container.':'Your pane element does not contain any direct child elements with data-role="view" attribute set.';throw new Error(o);}r.layouts={};r.viewContainer=new t.ViewContainer(r.container);r.viewContainer.bind("accepted",function(n){n.view.params=r.params});r.viewContainer.bind("complete",function(n){r.trigger(ot,{view:n.view})});r.viewContainer.bind(l,function(){r.trigger(l)});this.getLayoutProxy=n.proxy(this,"_getLayout");r._setupLayouts(u);f=u.children(r._locate("modalview drawer"));r.$angular?f.each(function(t,i){c(n(i),function(){})}):tt(f);this.bind(this.events,i)},events:[ft,l,ot,rt,ut,et,st],destroy:function(){t.destroy(this.container);for(var n in this.layouts)this.layouts[n].destroy()},view:function(){return this.viewContainer.view},showView:function(n,i,r){if(n=n.replace(new RegExp("^"+this.remoteViewURLPrefix),""),n===""&&this.remoteViewURLPrefix&&(n="/"),n===this.url)return this.trigger(et),!1;this.trigger(ft);var u=this,o=function(t){return u.viewContainer.show(t,i,n)},e=u._findViewElement(n),f=t.widgetInstance(e);return u.url=n,u.params=r,f&&f.reload&&(f.purge(),e=[]),this.trigger(st,{remote:e.length===0,url:n}),e[0]?(f||(f=u._createView(e)),o(f)):(this.serverNavigation?location.href=n:u._loadView(n,o),!0)},append:function(n,t){var i=this.sandbox,f=(t||"").split("?")[0],e=this.container,u,o,r;return vt.test(n)&&(n=RegExp.$1),i[0].innerHTML=n,e.append(i.children("script, style")),u=this._hideViews(i),r=u.first(),r.length||(u=r=i.wrapInner("<div data-role=view />").children()),f&&r.hide().attr(h("url"),f),this._setupLayouts(i),o=i.children(this._locate("modalview drawer")),e.append(i.children(this._locate("layout modalview drawer")).add(u)),tt(o),this._createView(r)},_locate:function(n){return this.$angular?d(n):i(n)},_findViewElement:function(n){var i,t=n.split("?")[0];return t?(i=this.container.children("["+h("url")+"='"+t+"']"),i[0]||t.indexOf("/")!==-1||(i=this.container.children(t.charAt(0)==="#"?t:"#"+t)),i):this.rootView},_createView:function(n){if(this.$angular){var i=this;return c(n,function(n){n.viewOptions={defaultTransition:i.transition,loader:i.loader,container:i.container,getLayout:i.getLayoutProxy}})}return t.initWidget(n,{defaultTransition:this.transition,loader:this.loader,container:this.container,getLayout:this.getLayoutProxy,modelScope:this.modelScope,reload:k(n,"reload")},r.roles)},_getLayout:function(n){return n===""?null:n?this.layouts[n]:this.layouts[this.layout]},_loadView:function(i,r){this._xhr&&this._xhr.abort();this.trigger(rt);this._xhr=n.get(t.absoluteURL(i,this.remoteViewURLPrefix),"html").always(n.proxy(this,"_xhrComplete",r,i))},_xhrComplete:function(n,t,i){var r=!0;typeof i=="object"&&(r=i.status===0&&i.responseText.length>0,i=i.responseText);this.trigger(ut);r&&n(this.append(i,t))},_hideViews:function(n){return n.children(this._locate("view splitview")).hide()},_setupLayouts:function(i){var e=this,f;i.children(e._locate("layout")).each(function(){f=e.$angular?c(n(this)):t.initWidget(n(this),{},r.roles);var i=f.options.platform;i&&i!==u.application.os.name?f.destroy():e.layouts[f.options.id]=f})}});t.mobile.ViewEngine=yt;r.plugin(lt);r.plugin(at)}(window.kendo.jQuery),window.kendo},typeof define=="function"&&define.amd?define:function(n,t){t()});
//# sourceMappingURL=kendo.mobile.view.min.js.map
